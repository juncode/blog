<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Chapter 17 Replication</title>
<link rel="stylesheet" href="mvl.css" type="text/css" />
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2" />
<link rel="start" href="index.html" title="{book-title}" />
<link rel="up" href="" title="" />
<link rel="prev" href="ha-overview.html" title="Chapter 16 High Availability and Scalability" />
<link rel="next" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2" />
<script language="javascript" type="text/javascript">
  function addOnload(theFunc)
  {
    var previous = window.onload;
    if (typeof window.onload != 'function')
    {
      window.onload = theFunc;
    }
    else
    {
      window.onload = function()
      {
        previous();
        theFunc();
      }
    }
  }

  addOnload(function()
  {
    var base = new Date(1429753320*1000);
    var now = new Date();
    var diff = ((now-base)/1000)/(24*3600);

    if (diff > 90) {
      var nodes = document.getElementsByClassName('titlepage');
      nodes[0].innerHTML = '<p style="border: 5px #ff0000 solid; padding: 5px; margin 5px">' +
        'This copy of the manual is more than 90 days old. We encourage you to download a ' +
        'new version from <a href="http://dev.mysql.com">dev.mysql.com/doc</a>.</p>' + nodes[0].innerHTML;
    }
  });
</script>
<noscript></noscript>
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr>
<th colspan="3" align="center">Chapter 17 Replication</th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="ha-overview.html">Prev</a> </td>
<th width="60%" align="center"></th>
<td width="20%" align="right"> <a accesskey="n" href="mysql-cluster.html">Next</a></td>
</tr>
</table>
<hr>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="replication"></a>Chapter 17 Replication</h1>

</div>

</div>

</div>
<div class="toc">
<p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="replication.html#replication-configuration">17.1 Replication Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="replication.html#replication-howto">17.1.1 How to Set Up Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-formats">17.1.2 Replication Formats</a></span></dt><dt><span class="section"><a href="replication.html#replication-options">17.1.3 Replication and Binary Logging Options and Variables</a></span></dt><dt><span class="section"><a href="replication.html#replication-administration">17.1.4 Common Replication Administration Tasks</a></span></dt></dl></dd><dt><span class="section"><a href="replication.html#replication-implementation">17.2 Replication Implementation</a></span></dt><dd><dl><dt><span class="section"><a href="replication.html#replication-implementation-details">17.2.1 Replication Implementation Details</a></span></dt><dt><span class="section"><a href="replication.html#slave-logs">17.2.2 Replication Relay and Status Logs</a></span></dt><dt><span class="section"><a href="replication.html#replication-rules">17.2.3 How Servers Evaluate Replication Filtering Rules</a></span></dt></dl></dd><dt><span class="section"><a href="replication.html#replication-solutions">17.3 Replication Solutions</a></span></dt><dd><dl><dt><span class="section"><a href="replication.html#replication-solutions-backups">17.3.1 Using Replication for Backups</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-diffengines">17.3.2 Using Replication with Different Master and Slave Storage Engines</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-scaleout">17.3.3 Using Replication for Scale-Out</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-partitioning">17.3.4 Replicating Different Databases to Different Slaves</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-performance">17.3.5 Improving Replication Performance</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-switch">17.3.6 Switching Masters During Failover</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-ssl">17.3.7 Setting Up Replication Using SSL</a></span></dt><dt><span class="section"><a href="replication.html#replication-semisync">17.3.8 Semisynchronous Replication</a></span></dt></dl></dd><dt><span class="section"><a href="replication.html#replication-notes">17.4 Replication Notes and Tips</a></span></dt><dd><dl><dt><span class="section"><a href="replication.html#replication-features">17.4.1 Replication Features and Issues</a></span></dt><dt><span class="section"><a href="replication.html#replication-compatibility">17.4.2 Replication Compatibility Between MySQL Versions</a></span></dt><dt><span class="section"><a href="replication.html#replication-upgrade">17.4.3 Upgrading a Replication Setup</a></span></dt><dt><span class="section"><a href="replication.html#replication-problems">17.4.4 Troubleshooting Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-bugs">17.4.5 How to Report Replication Bugs or Problems</a></span></dt></dl></dd></dl>
</div>
<a class="indexterm" name="idm140301485618576"></a><a class="indexterm" name="idm140301485617504"></a><a class="indexterm" name="idm140301485616016"></a><a class="indexterm" name="idm140301485614512"></a><p>
    Replication enables data from one MySQL database server (the master)
    to be replicated to one or more MySQL database servers (the slaves).
    Replication is asynchronous by default, therefore slaves do not need
    to be connected permanently to receive updates from the master. This
    means that updates can occur over long-distance connections and even
    over temporary or intermittent connections such as a dial-up
    service. Depending on the configuration, you can replicate all
    databases, selected databases, or even selected tables within a
    database.
  </p><p>
    For answers to some questions often asked by those who are new to
    MySQL Replication, see <a class="xref" href="faqs.html#faqs-replication" title="A.13 MySQL 5.5 FAQ: Replication">Section A.13, “MySQL 5.5 FAQ: Replication”</a>.
  </p><p>
    Advantages of replication in MySQL include:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        Scale-out solutions - spreading the load among multiple slaves
        to improve performance. In this environment, all writes and
        updates must take place on the master server. Reads, however,
        may take place on one or more slaves. This model can improve the
        performance of writes (since the master is dedicated to
        updates), while dramatically increasing read speed across an
        increasing number of slaves.
      </p></li><li class="listitem"><p>
        Data security - because data is replicated to the slave, and the
        slave can pause the replication process, it is possible to run
        backup services on the slave without corrupting the
        corresponding master data.
      </p></li><li class="listitem"><p>
        Analytics - live data can be created on the master, while the
        analysis of the information can take place on the slave without
        affecting the performance of the master.
      </p></li><li class="listitem"><p>
        Long-distance data distribution - if a branch office would like
        to work with a copy of your main data, you can use replication
        to create a local copy of the data for their use without
        requiring permanent access to the master.
</p></li></ul>
</div>
<p>
    Replication in MySQL features support for one-way, asynchronous
    replication, in which one server acts as the master, while one or
    more other servers act as slaves. This is in contrast to the
    <span class="emphasis"><em>synchronous</em></span> replication which is a
    characteristic of MySQL Cluster (see
    <a class="xref" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2">Chapter 18, <i>MySQL Cluster NDB 7.2</i></a>). In MySQL 5.5, an
    interface to semisynchronous replication is supported in addition to
    the built-in asynchronous replication. With semisynchronous
    replication, a commit performed on the master side blocks before
    returning to the session that performed the transaction until at
    least one slave acknowledges that it has received and logged the
    events for the transaction. See
    <a class="xref" href="replication.html#replication-semisync" title="17.3.8 Semisynchronous Replication">Section 17.3.8, “Semisynchronous Replication”</a>
  </p><p>
    There are a number of solutions available for setting up replication
    between two servers, but the best method to use depends on the
    presence of data and the engine types you are using. For more
    information on the available options, see
    <a class="xref" href="replication.html#replication-howto" title="17.1.1 How to Set Up Replication">Section 17.1.1, “How to Set Up Replication”</a>.
  </p><p>
    There are two core types of replication format, Statement Based
    Replication (SBR), which replicates entire SQL statements, and Row
    Based Replication (RBR), which replicates only the changed rows. You
    may also use a third variety, Mixed Based Replication (MBR). For
    more information on the different replication formats, see
    <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>. In MySQL 5.5,
    statement-based format is the default.
  </p><p>
    Replication is controlled through a number of different options and
    variables. These control the core operation of the replication,
    timeouts, and the databases and filters that can be applied on
    databases and tables. For more information on the available options,
    see <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>.
  </p><p>
    You can use replication to solve a number of different problems,
    including problems with performance, supporting the backup of
    different databases, and as part of a larger solution to alleviate
    system failures. For information on how to address these issues, see
    <a class="xref" href="replication.html#replication-solutions" title="17.3 Replication Solutions">Section 17.3, “Replication Solutions”</a>.
  </p><p>
    For notes and tips on how different data types and statements are
    treated during replication, including details of replication
    features, version compatibility, upgrades, and problems and their
    resolution, including an FAQ, see
    <a class="xref" href="replication.html#replication-notes" title="17.4 Replication Notes and Tips">Section 17.4, “Replication Notes and Tips”</a>.
  </p><p>
    For detailed information on the implementation of replication, how
    replication works, the process and contents of the binary log,
    background threads and the rules used to decide how statements are
    recorded and replication, see
    <a class="xref" href="replication.html#replication-implementation" title="17.2 Replication Implementation">Section 17.2, “Replication Implementation”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="replication-configuration"></a>17.1 Replication Configuration</h2>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-howto">17.1.1 How to Set Up Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-formats">17.1.2 Replication Formats</a></span></dt><dt><span class="section"><a href="replication.html#replication-options">17.1.3 Replication and Binary Logging Options and Variables</a></span></dt><dt><span class="section"><a href="replication.html#replication-administration">17.1.4 Common Replication Administration Tasks</a></span></dt></dl>
</div>
<p>
    Replication between servers in MySQL is based on the binary logging
    mechanism. The MySQL instance operating as the master (the source of
    the database changes) writes updates and changes as
    <span class="quote">“<span class="quote">events</span>”</span> to the binary log. The information in the
    binary log is stored in different logging formats according to the
    database changes being recorded. Slaves are configured to read the
    binary log from the master and to execute the events in the binary
    log on the slave's local database.
  </p><p>
    The master is <span class="quote">“<span class="quote">dumb</span>”</span> in this scenario. Once binary
    logging has been enabled, all statements are recorded in the binary
    log. Each slave receives a copy of the entire contents of the binary
    log. It is the responsibility of the slave to decide which
    statements in the binary log should be executed; you cannot
    configure the master to log only certain events. If you do not
    specify otherwise, all events in the master binary log are executed
    on the slave. If required, you can configure the slave to process
    only events that apply to particular databases or tables.
  </p><p>
    Each slave keeps a record of the binary log coordinates: The file
    name and position within the file that it has read and processed
    from the master. This means that multiple slaves can be connected to
    the master and executing different parts of the same binary log.
    Because the slaves control this process, individual slaves can be
    connected and disconnected from the server without affecting the
    master's operation. Also, because each slave remembers the position
    within the binary log, it is possible for slaves to be disconnected,
    reconnect and then <span class="quote">“<span class="quote">catch up</span>”</span> by continuing from the
    recorded position.
  </p><p>
    Both the master and each slave must be configured with a unique ID
    (using the <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> option). In
    addition, each slave must be configured with information about the
    master host name, log file name, and position within that file.
    These details can be controlled from within a MySQL session using
    the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement on the
    slave. The details are stored within the slave's
    <code class="filename">master.info</code> file.
  </p><p>
    This section describes the setup and configuration required for a
    replication environment, including step-by-step instructions for
    creating a new replication environment. The major components of this
    section are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        For a guide to setting up two or more servers for replication,
        <a class="xref" href="replication.html#replication-howto" title="17.1.1 How to Set Up Replication">Section 17.1.1, “How to Set Up Replication”</a>, deals with the
        configuration of the systems and provides methods for copying
        data between the master and slaves.
      </p></li><li class="listitem"><p>
        Events in the binary log are recorded using a number of formats.
        These are referred to as statement-based replication (SBR) or
        row-based replication (RBR). A third type, mixed-format
        replication (MIXED), uses SBR or RBR replication automatically
        to take advantage of the benefits of both SBR and RBR formats
        when appropriate. The different formats are discussed in
        <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.
      </p></li><li class="listitem"><p>
        Detailed information on the different configuration options and
        variables that apply to replication is provided in
        <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>.
      </p></li><li class="listitem"><p>
        Once started, the replication process should require little
        administration or monitoring. However, for advice on common
        tasks that you may want to execute, see
        <a class="xref" href="replication.html#replication-administration" title="17.1.4 Common Replication Administration Tasks">Section 17.1.4, “Common Replication Administration Tasks”</a>.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-howto"></a>17.1.1 How to Set Up Replication</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-howto-masterbaseconfig">17.1.1.1 Setting the Replication Master Configuration</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-slavebaseconfig">17.1.1.2 Setting the Replication Slave Configuration</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-repuser">17.1.1.3 Creating a User for Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-masterstatus">17.1.1.4 Obtaining the Replication Master Binary Log Coordinates</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-mysqldump">17.1.1.5 Creating a Data Snapshot Using mysqldump</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-rawdata">17.1.1.6 Creating a Data Snapshot Using Raw Data Files</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-newservers">17.1.1.7 Setting Up Replication with New Master and Slaves</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-existingdata">17.1.1.8 Setting Up Replication with Existing Data</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-additionalslaves">17.1.1.9 Introducing Additional Slaves to an Existing Replication Environment</a></span></dt><dt><span class="section"><a href="replication.html#replication-howto-slaveinit">17.1.1.10 Setting the Master Configuration on the Slave</a></span></dt></dl>
</div>
<p>
      This section describes how to set up complete replication of a
      MySQL server. There are a number of different methods for setting
      up replication, and the exact method to use depends on how you are
      setting up replication, and whether you already have data within
      your master database.
    </p><p>
      There are some generic tasks that are common to all replication
      setups:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          On the master, you must enable binary logging and configure a
          unique server ID. This might require a server restart. See
          <a class="xref" href="replication.html#replication-howto-masterbaseconfig" title="17.1.1.1 Setting the Replication Master Configuration">Section 17.1.1.1, “Setting the Replication Master Configuration”</a>.
        </p></li><li class="listitem"><p>
          On each slave that you want to connect to the master, you must
          configure a unique server ID. This might require a server
          restart. See
          <a class="xref" href="replication.html#replication-howto-slavebaseconfig" title="17.1.1.2 Setting the Replication Slave Configuration">Section 17.1.1.2, “Setting the Replication Slave Configuration”</a>.
        </p></li><li class="listitem"><p>
          You may want to create a separate user that will be used by
          your slaves to authenticate with the master to read the binary
          log for replication. The step is optional. See
          <a class="xref" href="replication.html#replication-howto-repuser" title="17.1.1.3 Creating a User for Replication">Section 17.1.1.3, “Creating a User for Replication”</a>.
        </p></li><li class="listitem"><p>
          Before creating a data snapshot or starting the replication
          process, you should record the position of the binary log on
          the master. You will need this information when configuring
          the slave so that the slave knows where within the binary log
          to start executing events. See
          <a class="xref" href="replication.html#replication-howto-masterstatus" title="17.1.1.4 Obtaining the Replication Master Binary Log Coordinates">Section 17.1.1.4, “Obtaining the Replication Master Binary Log Coordinates”</a>.
        </p></li><li class="listitem"><p>
          If you already have data on your master and you want to use it
          to synchronize your slave, you will need to create a data
          snapshot. You can create a snapshot using
          <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> (see
          <a class="xref" href="replication.html#replication-howto-mysqldump" title="17.1.1.5 Creating a Data Snapshot Using mysqldump">Section 17.1.1.5, “Creating a Data Snapshot Using mysqldump”</a>) or by copying
          the data files directly (see
          <a class="xref" href="replication.html#replication-howto-rawdata" title="17.1.1.6 Creating a Data Snapshot Using Raw Data Files">Section 17.1.1.6, “Creating a Data Snapshot Using Raw Data Files”</a>).
        </p></li><li class="listitem"><p>
          You will need to configure the slave with settings for
          connecting to the master, such as the host name, login
          credentials, and binary log file name and position. See
          <a class="xref" href="replication.html#replication-howto-slaveinit" title="17.1.1.10 Setting the Master Configuration on the Slave">Section 17.1.1.10, “Setting the Master Configuration on the Slave”</a>.
</p></li></ul>
</div>
<p>
      Once you have configured the basic options, you will need to
      follow the instructions for your replication setup. A number of
      alternatives are provided:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If you are establishing a new MySQL master and one or more
          slaves, you need only set up the configuration, as you have no
          data to exchange. For guidance on setting up replication in
          this situation, see
          <a class="xref" href="replication.html#replication-howto-newservers" title="17.1.1.7 Setting Up Replication with New Master and Slaves">Section 17.1.1.7, “Setting Up Replication with New Master and Slaves”</a>.
        </p></li><li class="listitem"><p>
          If you are already running a MySQL server, and therefore
          already have data that must be transferred to your slaves
          before replication starts, have not previously configured the
          binary log and are able to shut down your MySQL server for a
          short period during the process, see
          <a class="xref" href="replication.html#replication-howto-existingdata" title="17.1.1.8 Setting Up Replication with Existing Data">Section 17.1.1.8, “Setting Up Replication with Existing Data”</a>.
        </p></li><li class="listitem"><p>
          If you are adding slaves to an existing replication
          environment, you can set up the slaves without affecting the
          master. See
          <a class="xref" href="replication.html#replication-howto-additionalslaves" title="17.1.1.9 Introducing Additional Slaves to an Existing Replication Environment">Section 17.1.1.9, “Introducing Additional Slaves to an Existing Replication Environment”</a>.
</p></li></ul>
</div>
<p>
      If you will be administering MySQL replication servers, we suggest
      that you read this entire chapter through and try all statements
      mentioned in <a class="xref" href="sql-syntax.html#replication-master-sql" title="13.4.1 SQL Statements for Controlling Master Servers">Section 13.4.1, “SQL Statements for Controlling Master Servers”</a>, and
      <a class="xref" href="sql-syntax.html#replication-slave-sql" title="13.4.2 SQL Statements for Controlling Slave Servers">Section 13.4.2, “SQL Statements for Controlling Slave Servers”</a>. You should also
      familiarize yourself with the replication startup options
      described in <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Note that certain steps within the setup process require the
        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege. If you do not
        have this privilege, it might not be possible to enable
        replication.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-masterbaseconfig"></a>17.1.1.1 Setting the Replication Master Configuration</h4>

</div>

</div>

</div>
<p>
        On a replication master, you must enable binary logging and
        establish a unique server ID. If this has not already been done,
        this part of master setup requires a server restart.
      </p><p>
        Binary logging <span class="emphasis"><em>must</em></span> be enabled on the
        master because the binary log is the basis for sending data
        changes from the master to its slaves. If binary logging is not
        enabled, replication will not be possible.
      </p><p>
        Each server within a replication group must be configured with a
        unique server ID. This ID is used to identify individual servers
        within the group, and must be a positive integer between 1 and
        (2<sup>32</sup>)−1. How you organize and
        select the numbers is entirely up to you.
      </p><p>
        To configure the binary log and server ID options, you will need
        to shut down your MySQL server and edit the
        <code class="filename">my.cnf</code> or <code class="filename">my.ini</code> file.
        Add the following options to the configuration file within the
        <code class="literal">[mysqld]</code> section. If these options already
        exist, but are commented out, uncomment the options and alter
        them according to your needs. For example, to enable binary
        logging using a log file name prefix of
        <code class="literal">mysql-bin</code>, and configure a server ID of 1,
        use these lines:
      </p><pre class="programlisting">
[mysqld]
log-bin=mysql-bin
server-id=1
</pre><p>
        After making the changes, restart the server.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          If you omit <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> (or set
          it explicitly to its default value of 0), a master refuses
          connections from all slaves.
</p>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          For the greatest possible durability and consistency in a
          replication setup using <code class="literal">InnoDB</code> with
          transactions, you should use
          <code class="literal">innodb_flush_log_at_trx_commit=1</code> and
          <code class="literal">sync_binlog=1</code> in the master
          <code class="filename">my.cnf</code> file.
</p>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          Ensure that the <a class="link" href="server-administration.html#option_mysqld_skip-networking"><code class="option">skip-networking</code></a>
          option is not enabled on your replication master. If
          networking has been disabled, your slave will not able to
          communicate with the master and replication will fail.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-slavebaseconfig"></a>17.1.1.2 Setting the Replication Slave Configuration</h4>

</div>

</div>

</div>
<p>
        On a replication slave, you must establish a unique server ID.
        If this has not already been done, this part of slave setup
        requires a server restart.
      </p><p>
        If the slave server ID is not already set, or the current value
        conflicts with the value that you have chosen for the master
        server, you should shut down your slave server and edit the
        configuration to specify a unique server ID. For example:
      </p><pre class="programlisting">
[mysqld]
server-id=2
</pre><p>
        After making the changes, restart the server.
      </p><p>
        If you are setting up multiple slaves, each one must have a
        unique <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> value that
        differs from that of the master and from each of the other
        slaves. Think of <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> values
        as something similar to IP addresses: These IDs uniquely
        identify each server instance in the community of replication
        partners.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          If you omit <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> (or set
          it explicitly to its default value of 0), a slave refuses to
          connect to a master.
</p>
</div>
<p>
        You do not have to enable binary logging on the slave for
        replication to be enabled. However, if you enable binary logging
        on the slave, you can use the binary log for data backups and
        crash recovery on the slave, and also use the slave as part of a
        more complex replication topology (for example, where the slave
        acts as a master to other slaves).

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-repuser"></a>17.1.1.3 Creating a User for Replication</h4>

</div>

</div>

</div>
<p>
        Each slave must connect to the master using a MySQL user name
        and password, so there must be a user account on the master that
        the slave can use to connect. Any account can be used for this
        operation, providing it has been granted the
        <a class="link" href="security.html#priv_replication-slave"><code class="literal">REPLICATION SLAVE</code></a> privilege. You
        may wish to create a different account for each slave, or
        connect to the master using the same account for each slave.
      </p><p>
        You need not create an account specifically for replication.
        However, you should be aware that the user name and password
        will be stored in plain text within the
        <code class="literal">master.info</code> file (see
        <a class="xref" href="replication.html#slave-logs-status" title="17.2.2.2 Slave Status Logs">Section 17.2.2.2, “Slave Status Logs”</a>). Therefore, you may want to
        create a separate account that has privileges only for the
        replication process, to minimize the possibility of compromise
        to other accounts.
      </p><p>
        To create a new account, use <a class="link" href="sql-syntax.html#create-user" title="13.7.1.1 CREATE USER Syntax"><code class="literal">CREATE
        USER</code></a>. To grant this account the privileges required
        for replication, use the <a class="link" href="sql-syntax.html#grant" title="13.7.1.3 GRANT Syntax"><code class="literal">GRANT</code></a>
        statement. If you create an account solely for the purposes of
        replication, that account needs only the
        <a class="link" href="security.html#priv_replication-slave"><code class="literal">REPLICATION SLAVE</code></a> privilege. For
        example, to set up a new user, <code class="literal">repl</code>, that can
        connect for replication from any host within the
        <code class="literal">mydomain.com</code> domain, issue these statements
        on the master:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE USER 'repl'@'%.mydomain.com' IDENTIFIED BY 'slavepass';</code></strong>
mysql&gt; <strong class="userinput"><code>GRANT REPLICATION SLAVE ON *.* TO 'repl'@'%.mydomain.com';</code></strong>
</pre><p>
        See <a class="xref" href="sql-syntax.html#account-management-sql" title="13.7.1 Account Management Statements">Section 13.7.1, “Account Management Statements”</a>, for more
        information on statements for manipulation of user accounts.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-masterstatus"></a>17.1.1.4 Obtaining the Replication Master Binary Log Coordinates</h4>

</div>

</div>

</div>
<p>
        To configure replication on the slave you must determine the
        master's current coordinates within its binary log. You will
        need this information so that when the slave starts the
        replication process, it is able to start processing events from
        the binary log at the correct point.
      </p><p>
        If you have existing data on your master that you want to
        synchronize on your slaves before starting the replication
        process, you must stop processing statements on the master, and
        then obtain its current binary log coordinates and dump its
        data, before permitting the master to continue executing
        statements. If you do not stop the execution of statements, the
        data dump and the master status information that you use will
        not match and you will end up with inconsistent or corrupted
        databases on the slaves.
      </p><p>
        To obtain the master binary log coordinates, follow these steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Start a session on the master by connecting to it with the
            command-line client, and flush all tables and block write
            statements by executing the
            <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
            READ LOCK</code></a> statement:
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>FLUSH TABLES WITH READ LOCK;</code></strong>
</pre><p>
            For <code class="literal">InnoDB</code> tables, note that
            <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
            READ LOCK</code></a> also blocks
            <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">COMMIT</code></a> operations.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
              Leave the client from which you issued the
              <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH
              TABLES</code></a> statement running so that the read lock
              remains in effect. If you exit the client, the lock is
              released.
</p>
</div>
</li><li class="listitem"><p>
            In a different session on the master, use the
            <a class="link" href="sql-syntax.html#show-master-status" title="13.7.5.24 SHOW MASTER STATUS Syntax"><code class="literal">SHOW MASTER STATUS</code></a> statement
            to determine the current binary log file name and position:
          </p><pre class="programlisting">
mysql &gt; <strong class="userinput"><code>SHOW MASTER STATUS;</code></strong>
+------------------+----------+--------------+------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+------------------+----------+--------------+------------------+
| mysql-bin.000003 | 73       | test         | manual,mysql     |
+------------------+----------+--------------+------------------+
</pre><p>
            The <code class="literal">File</code> column shows the name of the log
            file and <code class="literal">Position</code> shows the position
            within the file. In this example, the binary log file is
            <code class="literal">mysql-bin.000003</code> and the position is 73.
            Record these values. You need them later when you are
            setting up the slave. They represent the replication
            coordinates at which the slave should begin processing new
            updates from the master.
          </p><p>
            If the master has been running previously without binary
            logging enabled, the log file name and position values
            displayed by <a class="link" href="sql-syntax.html#show-master-status" title="13.7.5.24 SHOW MASTER STATUS Syntax"><code class="literal">SHOW MASTER
            STATUS</code></a> or <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump
            --master-data</strong></span></a> will be empty. In that case, the
            values that you need to use later when specifying the
            slave's log file and position are the empty string
            (<code class="literal">''</code>) and <code class="literal">4</code>.
</p></li></ol>
</div>
<p>
        You now have the information you need to enable the slave to
        start reading from the binary log in the correct place to start
        replication.
      </p><p>
        If you have existing data that needs be to synchronized with the
        slave before you start replication, leave the client running so
        that the lock remains in place and then proceed to
        <a class="xref" href="replication.html#replication-howto-mysqldump" title="17.1.1.5 Creating a Data Snapshot Using mysqldump">Section 17.1.1.5, “Creating a Data Snapshot Using mysqldump”</a>, or
        <a class="xref" href="replication.html#replication-howto-rawdata" title="17.1.1.6 Creating a Data Snapshot Using Raw Data Files">Section 17.1.1.6, “Creating a Data Snapshot Using Raw Data Files”</a>. The idea here is to
        prevent any further changes so that the data copied to the
        slaves is in synchrony with the master.
      </p><p>
        If you are setting up a brand new master and slave replication
        group, you can exit the first session to release the read lock.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-mysqldump"></a>17.1.1.5 Creating a Data Snapshot Using mysqldump</h4>

</div>

</div>

</div>
<p>
        One way to create a snapshot of the data in an existing master
        database is to use the <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> tool to
        create a dump of all the databases you want to replicate. Once
        the data dump has been completed, you then import this data into
        the slave before starting the replication process.
      </p><p>
        The example shown here dumps all databases to a file named
        <code class="filename">dbdump.db</code>, and includes the
        <a class="link" href="programs.html#option_mysqldump_master-data"><code class="option">--master-data</code></a> option which
        automatically appends the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
        TO</code></a> statement required on the slave to start the
        replication process:
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqldump --all-databases --master-data &gt; dbdump.db</code></strong>
</pre><p>
        If you do not use
        <a class="link" href="programs.html#option_mysqldump_master-data"><code class="option">--master-data</code></a>, then it is
        necessary to lock all tables in a separate session manually
        (using <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
        READ LOCK</code></a>) prior to running
        <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>, then exiting or running UNLOCK
        TABLES from the second session to release the locks. You must
        also obtain binary log position information matching the
        snapshot, using <a class="link" href="sql-syntax.html#show-master-status" title="13.7.5.24 SHOW MASTER STATUS Syntax"><code class="literal">SHOW MASTER
        STATUS</code></a>, and use this to issue the appropriate
        <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement when
        starting the slave.
      </p><p>
        When choosing databases to include in the dump, remember that
        you need to filter out databases on each slave that you do not
        want to include in the replication process.
      </p><p>
        To import the data, either copy the dump file to the slave, or
        access the file from the master when connecting remotely to the
        slave.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-rawdata"></a>17.1.1.6 Creating a Data Snapshot Using Raw Data Files</h4>

</div>

</div>

</div>
<p>
        If your database is large, copying the raw data files can be
        more efficient than using <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> and
        importing the file on each slave. This technique skips the
        overhead of updating indexes as the <code class="literal">INSERT</code>
        statements are replayed.
      </p><p>
        Using this method with tables in storage engines with complex
        caching or logging algorithms requires extra steps to produce a
        perfect <span class="quote">“<span class="quote">point in time</span>”</span> snapshot: the initial copy
        command might leave out cache information and logging updates,
        even if you have acquired a global read lock. How the storage
        engine responds to this depends on its crash recovery abilities.
      </p><p>
        This method also does not work reliably if the master and slave
        have different values for
        <a class="link" href="server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a>,
        <a class="link" href="server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a>, or
        <a class="link" href="server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a> and you are
        copying tables having full-text indexes.
      </p><p>
        If you use <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables, you can
        use the <span class="command"><strong>mysqlbackup</strong></span> command from the MySQL
        Enterprise Backup component to produce a consistent snapshot.
        This command records the log name and offset corresponding to
        the snapshot to be later used on the slave. MySQL Enterprise
        Backup is a commercial product that is included as part of a
        MySQL Enterprise subscription. See
        <a class="xref" href="mysql-enterprise.html#mysql-enterprise-backup" title="25.2 MySQL Enterprise Backup Overview">Section 25.2, “MySQL Enterprise Backup Overview”</a> for detailed
        information.
      </p><p>
        Otherwise, use the <a class="link" href="glossary.html#glos_cold_backup" title="cold backup">cold
        backup</a> technique to obtain a reliable binary snapshot of
        <code class="literal">InnoDB</code> tables: copy all data files after
        doing a <a class="link" href="glossary.html#glos_slow_shutdown" title="slow shutdown">slow shutdown</a>
        of the MySQL Server.
      </p><p>
        To create a raw data snapshot of <code class="literal">MyISAM</code>
        tables, you can use standard copy tools such as
        <span class="command"><strong>cp</strong></span> or <span class="command"><strong>copy</strong></span>, a remote copy
        tool such as <span class="command"><strong>scp</strong></span> or <span class="command"><strong>rsync</strong></span>,
        an archiving tool such as <span class="command"><strong>zip</strong></span> or
        <span class="command"><strong>tar</strong></span>, or a file system snapshot tool such as
        <span class="command"><strong>dump</strong></span>, providing that your MySQL data files
        exist on a single file system. If you are replicating only
        certain databases, copy only those files that relate to those
        tables. (For <code class="literal">InnoDB</code>, all tables in all
        databases are stored in the
        <a class="link" href="glossary.html#glos_system_tablespace" title="system tablespace">system tablespace</a>
        files, unless you have the
        <a class="link" href="innodb-storage-engine.html#sysvar_innodb_file_per_table"><code class="option">innodb_file_per_table</code></a> option
        enabled.)
      </p><p>
        You might want to specifically exclude the following files from
        your archive:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Files relating to the <code class="literal">mysql</code> database.
          </p></li><li class="listitem"><p>
            The <code class="filename">master.info</code> file.
          </p></li><li class="listitem"><p>
            The master's binary log files.
          </p></li><li class="listitem"><p>
            Any relay log files.
</p></li></ul>
</div>
<p>
        To get the most consistent results with a raw data snapshot,
        shut down the master server during the process, as follows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Acquire a read lock and get the master's status. See
            <a class="xref" href="replication.html#replication-howto-masterstatus" title="17.1.1.4 Obtaining the Replication Master Binary Log Coordinates">Section 17.1.1.4, “Obtaining the Replication Master Binary Log Coordinates”</a>.
          </p></li><li class="listitem"><p>
            In a separate session, shut down the master server:
          </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqladmin shutdown</code></strong>
</pre></li><li class="listitem"><p>
            Make a copy of the MySQL data files. The following examples
            show common ways to do this. You need to choose only one of
            them:
          </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>tar cf <em class="replaceable"><code>/tmp/db.tar</code></em> <em class="replaceable"><code>./data</code></em></code></strong>
shell&gt; <strong class="userinput"><code>zip -r <em class="replaceable"><code>/tmp/db.zip</code></em> <em class="replaceable"><code>./data</code></em></code></strong>
shell&gt; <strong class="userinput"><code>rsync --recursive <em class="replaceable"><code>./data</code></em> <em class="replaceable"><code>/tmp/dbdata</code></em></code></strong>
</pre></li><li class="listitem"><p>
            Restart the master server.
</p></li></ol>
</div>
<p>
        If you are not using <code class="literal">InnoDB</code> tables, you can
        get a snapshot of the system from a master without shutting down
        the server as described in the following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Acquire a read lock and get the master's status. See
            <a class="xref" href="replication.html#replication-howto-masterstatus" title="17.1.1.4 Obtaining the Replication Master Binary Log Coordinates">Section 17.1.1.4, “Obtaining the Replication Master Binary Log Coordinates”</a>.
          </p></li><li class="listitem"><p>
            Make a copy of the MySQL data files. The following examples
            show common ways to do this. You need to choose only one of
            them:
          </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>tar cf <em class="replaceable"><code>/tmp/db.tar</code></em> <em class="replaceable"><code>./data</code></em></code></strong>
shell&gt; <strong class="userinput"><code>zip -r <em class="replaceable"><code>/tmp/db.zip</code></em> <em class="replaceable"><code>./data</code></em></code></strong>
shell&gt; <strong class="userinput"><code>rsync --recursive <em class="replaceable"><code>./data</code></em> <em class="replaceable"><code>/tmp/dbdata</code></em></code></strong>
</pre></li><li class="listitem"><p>
            In the client where you acquired the read lock, release the
            lock:
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>UNLOCK TABLES;</code></strong>
</pre></li></ol>
</div>
<p>
        Once you have created the archive or copy of the database, copy
        the files to each slave before starting the slave replication
        process.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-newservers"></a>17.1.1.7 Setting Up Replication with New Master and Slaves</h4>

</div>

</div>

</div>
<p>
        The easiest and most straightforward method for setting up
        replication is to use new master and slave servers.
      </p><p>
        You can also use this method if you are setting up new servers
        but have an existing dump of the databases from a different
        server that you want to load into your replication
        configuration. By loading the data into a new master, the data
        will be automatically replicated to the slaves.
      </p><p>
        To set up replication between a new master and slave:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Configure the MySQL master with the necessary configuration
            properties. See
            <a class="xref" href="replication.html#replication-howto-masterbaseconfig" title="17.1.1.1 Setting the Replication Master Configuration">Section 17.1.1.1, “Setting the Replication Master Configuration”</a>.
          </p></li><li class="listitem"><p>
            Start up the MySQL master.
          </p></li><li class="listitem"><p>
            Set up a user. See
            <a class="xref" href="replication.html#replication-howto-repuser" title="17.1.1.3 Creating a User for Replication">Section 17.1.1.3, “Creating a User for Replication”</a>.
          </p></li><li class="listitem"><p>
            Obtain the master status information. See
            <a class="xref" href="replication.html#replication-howto-masterstatus" title="17.1.1.4 Obtaining the Replication Master Binary Log Coordinates">Section 17.1.1.4, “Obtaining the Replication Master Binary Log Coordinates”</a>.
          </p></li><li class="listitem"><p>
            On the master, release the read lock:
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>UNLOCK TABLES;</code></strong>
</pre></li><li class="listitem"><p>
            On the slave, edit the MySQL configuration. See
            <a class="xref" href="replication.html#replication-howto-slavebaseconfig" title="17.1.1.2 Setting the Replication Slave Configuration">Section 17.1.1.2, “Setting the Replication Slave Configuration”</a>.
          </p></li><li class="listitem"><p>
            Start up the MySQL slave.
          </p></li><li class="listitem"><p>
            Execute a <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>
            statement to set the master replication server
            configuration. See
            <a class="xref" href="replication.html#replication-howto-slaveinit" title="17.1.1.10 Setting the Master Configuration on the Slave">Section 17.1.1.10, “Setting the Master Configuration on the Slave”</a>.
</p></li></ol>
</div>
<p>
        Perform the slave setup steps on each slave.
      </p><p>
        Because there is no data to load or exchange on a new server
        configuration you do not need to copy or import any information.
      </p><p>
        If you are setting up a new replication environment using the
        data from a different existing database server, you will now
        need to run the dump file generated from that server on the new
        master. The database updates will automatically be propagated to
        the slaves:
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysql -h master &lt; fulldb.dump</code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-existingdata"></a>17.1.1.8 Setting Up Replication with Existing Data</h4>

</div>

</div>

</div>
<p>
        When setting up replication with existing data, you will need to
        decide how best to get the data from the master to the slave
        before starting the replication service.
      </p><p>
        The basic process for setting up replication with existing data
        is as follows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            With the MySQL master running, create a user to be used by
            the slave when connecting to the master during replication.
            See <a class="xref" href="replication.html#replication-howto-repuser" title="17.1.1.3 Creating a User for Replication">Section 17.1.1.3, “Creating a User for Replication”</a>.
          </p></li><li class="listitem"><p>
            If you have not already configured the
            <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> and enabled binary
            logging on the master server, you will need to shut it down
            to configure these options. See
            <a class="xref" href="replication.html#replication-howto-masterbaseconfig" title="17.1.1.1 Setting the Replication Master Configuration">Section 17.1.1.1, “Setting the Replication Master Configuration”</a>.
          </p><p>
            If you have to shut down your master server, this is a good
            opportunity to take a snapshot of its databases. You should
            obtain the master status (see
            <a class="xref" href="replication.html#replication-howto-masterstatus" title="17.1.1.4 Obtaining the Replication Master Binary Log Coordinates">Section 17.1.1.4, “Obtaining the Replication Master Binary Log Coordinates”</a>) before
            taking down the master, updating the configuration and
            taking a snapshot. For information on how to create a
            snapshot using raw data files, see
            <a class="xref" href="replication.html#replication-howto-rawdata" title="17.1.1.6 Creating a Data Snapshot Using Raw Data Files">Section 17.1.1.6, “Creating a Data Snapshot Using Raw Data Files”</a>.
          </p></li><li class="listitem"><p>
            If your master server is already correctly configured,
            obtain its status (see
            <a class="xref" href="replication.html#replication-howto-masterstatus" title="17.1.1.4 Obtaining the Replication Master Binary Log Coordinates">Section 17.1.1.4, “Obtaining the Replication Master Binary Log Coordinates”</a>) and then
            use <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> to take a snapshot (see
            <a class="xref" href="replication.html#replication-howto-mysqldump" title="17.1.1.5 Creating a Data Snapshot Using mysqldump">Section 17.1.1.5, “Creating a Data Snapshot Using mysqldump”</a>) or take a raw
            snapshot of the live server using the guide in
            <a class="xref" href="replication.html#replication-howto-rawdata" title="17.1.1.6 Creating a Data Snapshot Using Raw Data Files">Section 17.1.1.6, “Creating a Data Snapshot Using Raw Data Files”</a>.
          </p></li><li class="listitem"><p>
            Update the configuration of the slave. See
            <a class="xref" href="replication.html#replication-howto-slavebaseconfig" title="17.1.1.2 Setting the Replication Slave Configuration">Section 17.1.1.2, “Setting the Replication Slave Configuration”</a>.
          </p></li><li class="listitem"><p>
            The next step depends on how you created the snapshot of
            data on the master.
          </p><p>
            If you used <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="a"><li class="listitem"><p>
                Start the slave, using the
                <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option
                so that replication does not start.
              </p></li><li class="listitem"><p>
                Import the dump file:
              </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysql &lt; fulldb.dump</code></strong>
</pre></li></ol>
</div>
<p>
            If you created a snapshot using the raw data files:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="a"><li class="listitem"><p>
                Extract the data files into your slave data directory.
                For example:
              </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>tar xvf dbdump.tar</code></strong>
</pre><p>
                You may need to set permissions and ownership on the
                files so that the slave server can access and modify
                them.
              </p></li><li class="listitem"><p>
                Start the slave, using the
                <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option
                so that replication does not start.
</p></li></ol>
</div>
</li><li class="listitem"><p>
            Configure the slave with the replication coordinates from
            the master. This tells the slave the binary log file and
            position within the file where replication needs to start.
            Also, configure the slave with the login credentials and
            host name of the master. For more information on the
            <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement
            required, see <a class="xref" href="replication.html#replication-howto-slaveinit" title="17.1.1.10 Setting the Master Configuration on the Slave">Section 17.1.1.10, “Setting the Master Configuration on the Slave”</a>.
          </p></li><li class="listitem"><p>
            Start the slave threads:
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre></li></ol>
</div>
<p>
        After you have performed this procedure, the slave should
        connect to the master and catch up on any updates that have
        occurred since the snapshot was taken.
      </p><p>
        If you have forgotten to set the
        <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> option for the master,
        slaves cannot connect to it.
      </p><p>
        If you have forgotten to set the
        <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> option for the slave,
        you get the following error in the slave's error log:
      </p><pre class="programlisting">
Warning: You should set server-id to a non-0 value if master_host
is set; we will force server id to 2, but this MySQL server will
not act as a slave.
</pre><p>
        You also find error messages in the slave's error log if it is
        not able to replicate for any other reason.
      </p><p>
        Once a slave is replicating, you can find in its data directory
        one file named <code class="filename">master.info</code> and another
        named <code class="filename">relay-log.info</code>. The slave uses these
        two files to keep track of how much of the master's binary log
        it has processed. Do <span class="emphasis"><em>not</em></span> remove or edit
        these files unless you know exactly what you are doing and fully
        understand the implications. Even in that case, it is preferred
        that you use the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>
        statement to change replication parameters. The slave will use
        the values specified in the statement to update the status files
        automatically.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          The content of <code class="filename">master.info</code> overrides some
          of the server options specified on the command line or in
          <code class="filename">my.cnf</code>. See
          <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>, for more details.
</p>
</div>
<p>
        A single snapshot of the master suffices for multiple slaves. To
        set up additional slaves, use the same master snapshot and
        follow the slave portion of the procedure just described.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-additionalslaves"></a>17.1.1.9 Introducing Additional Slaves to an Existing Replication Environment</h4>

</div>

</div>

</div>
<p>
        To add another slave to an existing replication configuration,
        you can do so without stopping the master. Instead, set up the
        new slave by making a copy of an existing slave, except that you
        configure the new slave with a different
        <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> value.
      </p><p>
        To duplicate an existing slave:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Shut down the existing slave:
          </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqladmin shutdown</code></strong>
</pre></li><li class="listitem"><p>
            Copy the data directory from the existing slave to the new
            slave. You can do this by creating an archive using
            <span class="command"><strong>tar</strong></span> or <code class="literal">WinZip</code>, or by
            performing a direct copy using a tool such as
            <span class="command"><strong>cp</strong></span> or <span class="command"><strong>rsync</strong></span>. Ensure
            that you also copy the log files and relay log files.
          </p><p>
            A common problem that is encountered when adding new
            replication slaves is that the new slave fails with a series
            of warning and error messages like these:
          </p><pre class="programlisting">
071118 16:44:10 [Warning] Neither --relay-log nor --relay-log-index were used; so
replication may break when this MySQL server acts as a slave and has his hostname
changed!! Please use '--relay-log=<em class="replaceable"><code>new_slave_hostname</code></em>-relay-bin' to avoid this problem.
<span class="errortext">071118 16:44:10 [ERROR] Failed to open the relay log './<em class="replaceable"><code>old_slave_hostname</code></em>-relay-bin.003525'
(relay_log_pos 22940879)</span>
071118 16:44:10 <span class="errortext">[ERROR] Could not find target log during relay log initialization</span>
071118 16:44:10 <span class="errortext">[ERROR] Failed to initialize the master info structure</span>
</pre><p>
            This is due to the fact that, if the
            <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> option is not
            specified, the relay log files contain the host name as part
            of their file names. (This is also true of the relay log
            index file if the
            <a class="link" href="replication.html#option_mysqld_relay-log-index"><code class="option">--relay-log-index</code></a> option is
            not used. See <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>, for
            more information about these options.)
          </p><p>
            To avoid this problem, use the same value for
            <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> on the new slave
            that was used on the existing slave. (If this option was not
            set explicitly on the existing slave, use
            <code class="literal"><em class="replaceable"><code>existing_slave_hostname</code></em>-relay-bin</code>.)
            If this is not feasible, copy the existing slave's relay log
            index file to the new slave and set the
            <a class="link" href="replication.html#option_mysqld_relay-log-index"><code class="option">--relay-log-index</code></a> option on
            the new slave to match what was used on the existing slave.
            (If this option was not set explicitly on the existing
            slave, use
            <code class="literal"><em class="replaceable"><code>existing_slave_hostname</code></em>-relay-bin.index</code>.)
            Alternatively—if you have already tried to start the
            new slave (after following the remaining steps in this
            section) and have encountered errors like those described
            previously—then perform the following steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="a"><li class="listitem"><p>
                If you have not already done so, issue a
                <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> on the new
                slave.
              </p><p>
                If you have already started the existing slave again,
                issue a <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> on the
                existing slave as well.
              </p></li><li class="listitem"><p>
                Copy the contents of the existing slave's relay log
                index file into the new slave's relay log index file,
                making sure to overwrite any content already in the
                file.
              </p></li><li class="listitem"><p>
                Proceed with the remaining steps in this section.
</p></li></ol>
</div>
</li><li class="listitem"><p>
            Copy the <code class="filename">master.info</code> and
            <code class="filename">relay-log.info</code> files from the existing
            slave to the new slave if they were not located in the data
            directory. These files hold the current log coordinates for
            the master's binary log and the slave's relay log.
          </p></li><li class="listitem"><p>
            Start the existing slave.
          </p></li><li class="listitem"><p>
            On the new slave, edit the configuration and give the new
            slave a unique <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> not
            used by the master or any of the existing slaves.
          </p></li><li class="listitem"><p>
            Start the new slave. The slave will use the information in
            its <code class="filename">master.info</code> file to start the
            replication process.
</p></li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-howto-slaveinit"></a>17.1.1.10 Setting the Master Configuration on the Slave</h4>

</div>

</div>

</div>
<p>
        To set up the slave to communicate with the master for
        replication, you must tell the slave the necessary connection
        information. To do this, execute the following statement on the
        slave, replacing the option values with the actual values
        relevant to your system:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
    -&gt;     <strong class="userinput"><code>MASTER_HOST='<em class="replaceable"><code>master_host_name</code></em>',</code></strong>
    -&gt;     <strong class="userinput"><code>MASTER_USER='<em class="replaceable"><code>replication_user_name</code></em>',</code></strong>
    -&gt;     <strong class="userinput"><code>MASTER_PASSWORD='<em class="replaceable"><code>replication_password</code></em>',</code></strong>
    -&gt;     <strong class="userinput"><code>MASTER_LOG_FILE='<em class="replaceable"><code>recorded_log_file_name</code></em>',</code></strong>
    -&gt;     <strong class="userinput"><code>MASTER_LOG_POS=<em class="replaceable"><code>recorded_log_position</code></em>;</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          Replication cannot use Unix socket files. You must be able to
          connect to the master MySQL server using TCP/IP.
</p>
</div>
<p>
        The <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement
        has other options as well. For example, it is possible to set up
        secure replication using SSL. For a full list of options, and
        information about the maximum permissible length for the
        string-valued options, see <a class="xref" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax">Section 13.4.2.1, “CHANGE MASTER TO Syntax”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-formats"></a>17.1.2 Replication Formats</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-sbr-rbr">17.1.2.1 Advantages and Disadvantages of Statement-Based and Row-Based
Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-rbr-usage">17.1.2.2 Usage of Row-Based Logging and Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-rbr-safe-unsafe">17.1.2.3 Determination of Safe and Unsafe Statements in Binary Logging</a></span></dt></dl>
</div>
<p>
      Replication works because events written to the binary log are
      read from the master and then processed on the slave. The events
      are recorded within the binary log in different formats according
      to the type of event. The different replication formats used
      correspond to the binary logging format used when the events were
      recorded in the master's binary log. The correlation between
      binary logging formats and the terms used during replication are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Replication capabilities in MySQL originally were based on
          propagation of SQL statements from master to slave. This is
          called <em class="firstterm">statement-based replication</em>
          (often abbreviated as <em class="firstterm">SBR</em>), which
          corresponds to the standard statement-based binary logging
          format. In older versions of MySQL (5.1.4 and earlier), binary
          logging and replication used this format exclusively.
        </p></li><li class="listitem"><p>
          Row-based binary logging logs changes in individual table
          rows. When used with MySQL replication, this is known as
          <em class="firstterm">row-based replication</em> (often
          abbreviated as <em class="firstterm">RBR</em>). In row-based
          replication, the master writes <em class="firstterm">events</em>
          to the binary log that indicate how individual table rows are
          changed.
        </p></li><li class="listitem"><p>
          The server can change the binary logging format in real time
          according to the type of event using <em class="firstterm">mixed-format
          logging</em>.
        </p><p>
          When the mixed format is in effect, statement-based logging is
          used by default, but automatically switches to row-based
          logging in particular cases as described later. Replication
          using the mixed format is often referred to as
          <em class="firstterm">mixed-based replication</em> or
          <em class="firstterm">mixed-format replication</em>. For more
          information, see <a class="xref" href="server-administration.html#binary-log-mixed" title="5.2.4.3 Mixed Binary Logging Format">Section 5.2.4.3, “Mixed Binary Logging Format”</a>.
</p></li></ul>
</div>
<p>
      In MySQL 5.5, statement-based format is the default.
    </p><p><b>MySQL Cluster. </b>
        The default binary logging format in all MySQL Cluster NDB 7.2
        releases, beginning with MySQL Cluster NDB 7.2.1, is
        <code class="literal">STATEMENT</code>. (This is a change from previous
        versions of MySQL Cluster.) You should note that MySQL Cluster
        Replication always uses row-based replication, and that the
        <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDB</code></a> storage engine is incompatible
        with statement-based replication. This means that you must
        manually set the format to <code class="literal">ROW</code> prior to
        enabling MySQL Cluster Replication. See
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-general" title="18.6.2 General Requirements for MySQL Cluster Replication">Section 18.6.2, “General Requirements for MySQL Cluster Replication”</a>, for more
        information.
      </p><p>
      When using <code class="literal">MIXED</code> format, the binary logging
      format is determined in part by the storage engine being used and
      the statement being executed. For more information on mixed-format
      logging and the rules governing the support of different logging
      formats, see <a class="xref" href="server-administration.html#binary-log-mixed" title="5.2.4.3 Mixed Binary Logging Format">Section 5.2.4.3, “Mixed Binary Logging Format”</a>.
    </p><p>
      The logging format in a running MySQL server is controlled by
      setting the <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> server
      system variable. This variable can be set with session or global
      scope. The rules governing when and how the new setting takes
      effect are the same as for other MySQL server system
      variables—setting the variable for the current session lasts
      only until the end of that session, and the change is not visible
      to other sessions; setting the variable globally requires a
      restart of the server to take effect. For more information, see
      <a class="xref" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax">Section 13.7.4, “SET Syntax”</a>.
    </p><p>
      There are conditions under which you cannot change the binary
      logging format at runtime or doing so causes replication to fail.
      See <a class="xref" href="server-administration.html#binary-log-setting" title="5.2.4.2 Setting The Binary Log Format">Section 5.2.4.2, “Setting The Binary Log Format”</a>.
    </p><p>
      You must have the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege
      to set either the global or session
      <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> value.
    </p><p>
      The statement-based and row-based replication formats have
      different issues and limitations. For a comparison of their
      relative advantages and disadvantages, see
      <a class="xref" href="replication.html#replication-sbr-rbr" title="17.1.2.1 Advantages and Disadvantages of Statement-Based and Row-Based Replication">Section 17.1.2.1, “Advantages and Disadvantages of Statement-Based and Row-Based
        Replication”</a>.
    </p><p>
      With statement-based replication, you may encounter issues with
      replicating stored routines or triggers. You can avoid these
      issues by using row-based replication instead. For more
      information, see <a class="xref" href="stored-programs-views.html#stored-programs-logging" title="20.7 Binary Logging of Stored Programs">Section 20.7, “Binary Logging of Stored Programs”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-sbr-rbr"></a>17.1.2.1 Advantages and Disadvantages of Statement-Based and Row-Based
Replication</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140301485263408"></a><a class="indexterm" name="idm140301485261952"></a><p>
        Each binary logging format has advantages and disadvantages. For
        most users, the mixed replication format should provide the best
        combination of data integrity and performance. If, however, you
        want to take advantage of the features specific to the
        statement-based or row-based replication format when performing
        certain tasks, you can use the information in this section,
        which provides a summary of their relative advantages and
        disadvantages, to determine which is best for your needs.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="replication.html#replication-sbr-rbr-sbr-advantages" title="Advantages of statement-based replication">Advantages
            of statement-based replication</a>
          </p></li><li class="listitem"><p>
            <a class="link" href="replication.html#replication-sbr-rbr-sbr-disadvantages" title="Disadvantages of statement-based replication">Disadvantages
            of statement-based replication</a>
          </p></li><li class="listitem"><p>
            <a class="link" href="replication.html#replication-sbr-rbr-rbr-advantages" title="Advantages of row-based replication">Advantages
            of row-based replication</a>
          </p></li><li class="listitem"><p>
            <a class="link" href="replication.html#replication-sbr-rbr-rbr-disadvantages" title="Disadvantages of row-based replication">Disadvantages
            of row-based replication</a>
</p></li></ul>
</div>
<h5><a name="replication-sbr-rbr-sbr-advantages"></a>Advantages of statement-based replication</h5>
<a class="indexterm" name="idm140301485250592"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Proven technology that has existed in MySQL since 3.23.
          </p></li><li class="listitem"><p>
            Less data written to log files. When updates or deletes
            affect many rows, this results in <span class="emphasis"><em>much</em></span>
            less storage space required for log files. This also means
            that taking and restoring from backups can be accomplished
            more quickly.
          </p></li><li class="listitem"><p>
            Log files contain all statements that made any changes, so
            they can be used to audit the database.
</p></li></ul>
</div>
<h5><a name="replication-sbr-rbr-sbr-disadvantages"></a>Disadvantages of statement-based replication</h5>
<a class="indexterm" name="idm140301485244208"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Statements that are unsafe for SBR. </b><a class="indexterm" name="idm140301485241552"></a><a class="indexterm" name="idm140301485240032"></a>
              Not all statements which modify data (such as
              <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a>
              <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a>,
              <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
              <a class="link" href="sql-syntax.html#replace" title="13.2.8 REPLACE Syntax"><code class="literal">REPLACE</code></a> statements) can be
              replicated using statement-based replication. Any
              nondeterministic behavior is difficult to replicate when
              using statement-based replication. Examples of such DML
              (Data Modification Language) statements include the
              following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                A statement that depends on a UDF or stored program that
                is nondeterministic, since the value returned by such a
                UDF or stored program or depends on factors other than
                the parameters supplied to it. (Row-based replication,
                however, simply replicates the value returned by the UDF
                or stored program, so its effect on table rows and data
                is the same on both the master and slave.) See
                <a class="xref" href="replication.html#replication-features-invoked" title="17.4.1.11 Replication of Invoked Features">Section 17.4.1.11, “Replication of Invoked Features”</a>, for more
                information.
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> and
                <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statements that
                use a <code class="literal">LIMIT</code> clause without an
                <code class="literal">ORDER BY</code> are nondeterministic. See
                <a class="xref" href="replication.html#replication-features-limit" title="17.4.1.15 Replication and LIMIT">Section 17.4.1.15, “Replication and LIMIT”</a>.
              </p></li><li class="listitem"><p>
                Statements using any of the following functions cannot
                be replicated properly using statement-based
                replication:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <a class="link" href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a>,
                    <a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> (unless
                    both the master and the slave are started with the
                    <a class="link" href="server-administration.html#option_mysqld_sysdate-is-now"><code class="option">--sysdate-is-now</code></a>
                    option)
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a>
</p></li></ul>
</div>
<p>
                However, all other functions are replicated correctly
                using statement-based replication, including
                <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> and so forth.
              </p><p>
                For more information, see
                <a class="xref" href="replication.html#replication-features-functions" title="17.4.1.14 Replication and System Functions">Section 17.4.1.14, “Replication and System Functions”</a>.
</p></li></ul>
</div>
<p>
            Statements that cannot be replicated correctly using
            statement-based replication are logged with a warning like
            the one shown here:
          </p><pre class="programlisting">
[Warning] Statement is not safe to log in statement format.
</pre><p>
            A similar warning is also issued to the client in such
            cases. The client can display it using
            <a class="link" href="sql-syntax.html#show-warnings" title="13.7.5.41 SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a>.
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT ...
            SELECT</code></a> requires a greater number of row-level
            locks than with row-based replication.
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statements that
            require a table scan (because no index is used in the
            <code class="literal">WHERE</code> clause) must lock a greater number
            of rows than with row-based replication.
          </p></li><li class="listitem"><p>
            For <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>: An
            <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statement that uses
            <code class="literal">AUTO_INCREMENT</code> blocks other
            nonconflicting <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a>
            statements.
          </p></li><li class="listitem"><p>
            For complex statements, the statement must be evaluated and
            executed on the slave before the rows are updated or
            inserted. With row-based replication, the slave only has to
            modify the affected rows, not execute the full statement.
          </p></li><li class="listitem"><p>
            If there is an error in evaluation on the slave,
            particularly when executing complex statements,
            statement-based replication may slowly increase the margin
            of error across the affected rows over time. See
            <a class="xref" href="replication.html#replication-features-slaveerrors" title="17.4.1.27 Slave Errors During Replication">Section 17.4.1.27, “Slave Errors During Replication”</a>.
          </p></li><li class="listitem"><p>
            Stored functions execute with the same
            <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> value as the calling
            statement. However, this is not true of stored procedures.
          </p></li><li class="listitem"><p>
            Deterministic UDFs must be applied on the slaves.
          </p></li><li class="listitem"><p>
            Table definitions must be (nearly) identical on master and
            slave. See
            <a class="xref" href="replication.html#replication-features-differing-tables" title="17.4.1.9 Replication with Differing Table Definitions on Master and Slave">Section 17.4.1.9, “Replication with Differing Table Definitions on Master and Slave”</a>, for
            more information.
</p></li></ul>
</div>
<h5><a name="replication-sbr-rbr-rbr-advantages"></a>Advantages of row-based replication</h5>
<a class="indexterm" name="idm140301485170016"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            All changes can be replicated. This is the safest form of
            replication.
          </p><p>
            The <code class="literal">mysql</code> database is not replicated. The
            <code class="literal">mysql</code> database is instead seen as a
            node-specific database. Row-based replication is not
            supported on tables in this database. Instead, statements
            that would normally update this information—such as
            <a class="link" href="sql-syntax.html#grant" title="13.7.1.3 GRANT Syntax"><code class="literal">GRANT</code></a>,
            <a class="link" href="sql-syntax.html#revoke" title="13.7.1.5 REVOKE Syntax"><code class="literal">REVOKE</code></a> and the manipulation
            of triggers, stored routines (including stored procedures),
            and views—are all replicated to slaves using
            statement-based replication.
          </p><p>
            For statements such as
            <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE
            ... SELECT</code></a>, a <code class="literal">CREATE</code> statement
            is generated from the table definition and replicated using
            statement-based format, while the row insertions are
            replicated using row-based format.
          </p></li><li class="listitem"><p>
            The technology is the same as in most other database
            management systems; knowledge about other systems transfers
            to MySQL.
          </p></li><li class="listitem"><p>
            Fewer row locks are required on the master, which thus
            achieves higher concurrency, for the following types of
            statements:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#insert-select" title="13.2.5.1 INSERT ... SELECT Syntax"><code class="literal">INSERT
                ... SELECT</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statements with
                <code class="literal">AUTO_INCREMENT</code>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> or
                <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statements with
                <code class="literal">WHERE</code> clauses that do not use keys or
                do not change most of the examined rows.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Fewer row locks are required on the slave for any
            <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a>,
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
            <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statement.
</p></li></ul>
</div>
<h5><a name="replication-sbr-rbr-rbr-disadvantages"></a>Disadvantages of row-based replication</h5>
<a class="indexterm" name="idm140301485142608"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            RBR tends to generate more data that must be logged. To
            replicate a DML statement (such as an
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> or
            <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statement),
            statement-based replication writes only the statement to the
            binary log. By contrast, row-based replication writes each
            changed row to the binary log. If the statement changes many
            rows, row-based replication may write significantly more
            data to the binary log; this is true even for statements
            that are rolled back. This also means that taking and
            restoring from backup can require more time. In addition,
            the binary log is locked for a longer time to write the
            data, which may cause concurrency problems.
          </p></li><li class="listitem"><p>
            Deterministic UDFs that generate large
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> values take longer to
            replicate with row-based replication than with
            statement-based replication. This is because the
            <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> column value is logged,
            rather than the statement generating the data.
          </p></li><li class="listitem"><p>
            You cannot examine the logs to see what statements were
            executed, nor can you see on the slave what statements were
            received from the master and executed.
          </p><p>
            However, you can see what data was changed using
            <a class="link" href="programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a> with the options
            <a class="link" href="programs.html#option_mysqlbinlog_base64-output"><code class="option">--base64-output=DECODE-ROWS</code></a>
            and <a class="link" href="programs.html#option_mysqlbinlog_verbose"><code class="option">--verbose</code></a>.
          </p></li><li class="listitem"><p>
            For tables using the <a class="link" href="storage-engines.html#myisam-storage-engine" title="15.3 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>
            storage engine, a stronger lock is required on the slave for
            <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statements when
            applying them as row-based events to the binary log than
            when applying them as statements. This means that concurrent
            inserts on <a class="link" href="storage-engines.html#myisam-storage-engine" title="15.3 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables are
            not supported when using row-based replication.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-rbr-usage"></a>17.1.2.2 Usage of Row-Based Logging and Replication</h4>

</div>

</div>

</div>
<p>
        Major changes in the replication environment and in the behavior
        of applications can result from using row-based logging (RBL) or
        row-based replication (RBR) rather than statement-based logging
        or replication. This section describes a number of issues known
        to exist when using row-based logging or replication, and
        discusses some best practices for taking advantage of row-based
        logging and replication.
      </p><p>
        For additional information, see
        <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>, and
        <a class="xref" href="replication.html#replication-sbr-rbr" title="17.1.2.1 Advantages and Disadvantages of Statement-Based and Row-Based Replication">Section 17.1.2.1, “Advantages and Disadvantages of Statement-Based and Row-Based
        Replication”</a>.
      </p><p>
        For information about issues specific to MySQL Cluster
        Replication (which depends on row-based replication), see
        <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-issues" title="18.6.3 Known Issues in MySQL Cluster Replication">Section 18.6.3, “Known Issues in MySQL Cluster Replication”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="replication-rbr-usage-temptables"></a><b>RBL, RBR, and temporary tables. </b>
              As noted in
              <a class="xref" href="replication.html#replication-features-temptables" title="17.4.1.22 Replication and Temporary Tables">Section 17.4.1.22, “Replication and Temporary Tables”</a>,
              temporary tables are not replicated when using row-based
              format. When mixed format is in effect,
              <span class="quote">“<span class="quote">safe</span>”</span> statements involving temporary tables
              are logged using statement-based format. For more
              information, see <a class="xref" href="replication.html#replication-sbr-rbr" title="17.1.2.1 Advantages and Disadvantages of Statement-Based and Row-Based Replication">Section 17.1.2.1, “Advantages and Disadvantages of Statement-Based and Row-Based
        Replication”</a>.
            </p><p>
            Temporary tables are not replicated when using row-based
            format because there is no need. In addition, because
            temporary tables can be read only from the thread which
            created them, there is seldom if ever any benefit obtained
            from replicating them, even when using statement-based
            format.
          </p><p>
            Beginning with MySQL 5.5.5, you can switch from
            statement-based to row-based binary logging mode even when
            temporary tables have been created. However, while using the
            row-based format, the MySQL server cannot determine the
            logging mode that was in effect when a given temporary table
            was created. For this reason, the server in such cases logs
            a <a class="link" href="sql-syntax.html#drop-table" title="13.1.28 DROP TABLE Syntax"><code class="literal">DROP TEMPORARY
            TABLE IF EXISTS</code></a> statement for each temporary table
            that still exists for a given client session when that
            session ends. (Bug #11760229, Bug #11762267) While this
            means that it is possible that an unnecessary <code class="literal">DROP
            TEMPORARY TABLE</code> statement might be logged in some
            cases, the statement is harmless, and does not cause an
            error even if the table does not exist, due to the presence
            of the <code class="literal">IF NOT EXISTS</code> option.
          </p></li><li class="listitem"><p><b>RBL and synchronization of nontransactional tables. </b>
              When many rows are affected, the set of changes is split
              into several events; when the statement commits, all of
              these events are written to the binary log. When executing
              on the slave, a table lock is taken on all tables
              involved, and then the rows are applied in batch mode.
              (This may or may not be effective, depending on the engine
              used for the slave's copy of the table.)
            </p></li><li class="listitem"><p><b>Latency and binary log size. </b>
              Because RBL writes changes for each row to the binary log,
              its size can increase quite rapidly. In a replication
              environment, this can significantly increase the time
              required to make changes on the slave that match those on
              the master. You should be aware of the potential for this
              delay in your applications.
            </p></li><li class="listitem"><p><b>Reading the binary log. </b>
              <a class="link" href="programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a> displays row-based events
              in the binary log using the <code class="literal">BINLOG</code>
              statement (see <a class="xref" href="sql-syntax.html#binlog" title="13.7.6.1 BINLOG Syntax">Section 13.7.6.1, “BINLOG Syntax”</a>). This statement
              displays an event in printable form, but as a base
              64-encoded string the meaning of which is not evident.
              When invoked with the
              <a class="link" href="programs.html#option_mysqlbinlog_base64-output"><code class="option">--base64-output=DECODE-ROWS</code></a>
              and <a class="link" href="programs.html#option_mysqlbinlog_verbose"><code class="option">--verbose</code></a> options,
              <a class="link" href="programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a> formats the contents of the
              binary log in a manner that is easily human readable. This
              is helpful when binary log events were written in
              row-based format if you want to read or recover from a
              replication or database failure using the contents of the
              binary log. For more information, see
              <a class="xref" href="programs.html#mysqlbinlog-row-events" title="4.6.7.2 mysqlbinlog Row Event Display">Section 4.6.7.2, “mysqlbinlog Row Event Display”</a>.
            </p></li><li class="listitem"><p><b>Binary log execution errors and slave_exec_mode. </b>
              If <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode</code></a> is
              <code class="literal">IDEMPOTENT</code>, a failure to apply changes
              from RBL because the original row cannot be found does not
              trigger an error or cause replication to fail. This means
              that it is possible that updates are not applied on the
              slave, so that the master and slave are no longer
              synchronized. Latency issues and use of nontransactional
              tables with RBR when
              <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode</code></a> is
              <code class="literal">IDEMPOTENT</code> can cause the master and
              slave to diverge even further. For more information about
              <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode</code></a>, see
              <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4 Server System Variables">Section 5.1.4, “Server System Variables”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode=IDEMPOTENT</code></a>
              is generally useful only for circular replication or
              multi-master replication with MySQL Cluster, for which
              <code class="literal">IDEMPOTENT</code> is the default value (see
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="18.6 MySQL Cluster Replication">Section 18.6, “MySQL Cluster Replication”</a>).
            </p><p>
              For other scenarios, setting
              <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode</code></a> to
              <code class="literal">STRICT</code> is normally sufficient; this is
              the default value for storage engines other than
              <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDB</code></a>.
</p>
</div>
</li><li class="listitem"><p><b>Lack of binary log checksums. </b>
              RBL uses no checksums. This means that network, disk, and
              other errors may not be identified when processing the
              binary log. To ensure that data is transmitted without
              network corruption, you may want to consider using SSL,
              which adds another layer of checksumming, for replication
              connections. The <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
              TO</code></a> statement has options to enable replication
              over SSL. See also <a class="xref" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax">Section 13.4.2.1, “CHANGE MASTER TO Syntax”</a>, for
              general information about setting up MySQL with SSL.
            </p></li><li class="listitem"><p><b>Filtering based on server ID not supported. </b>
              A common practice is to filter out changes on some slaves
              by using a <code class="literal">WHERE</code> clause that includes
              the relation <code class="literal">@@server_id &lt;&gt;
              <em class="replaceable"><code>id_value</code></em></code> clause with
              <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> and
              <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statements, a simple
              example of such a clause being <code class="literal">WHERE @@server_id
              &lt;&gt; 1</code>. However, this does not work
              correctly with row-based logging. If you must use the
              <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> system variable
              for statement filtering, you must also use
              <a class="link" href="replication.html#sysvar_binlog_format"><code class="option">--binlog_format=STATEMENT</code></a>.
            </p><p>
            In MySQL 5.5, you can do filtering based on
            server ID by using the <code class="literal">IGNORE_SERVER_IDS</code>
            option for the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
            TO</code></a> statement. This option works with the
            statement-based and row-based logging formats.
          </p></li><li class="listitem"><p><b>Database-level replication options. </b>
              The effects of the
              <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>,
              <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a>, and
              <a class="link" href="replication.html#option_mysqld_replicate-rewrite-db"><code class="option">--replicate-rewrite-db</code></a>
              options differ considerably depending on whether row-based
              or statement-based logging is used. Because of this, it is
              recommended to avoid database-level options and instead
              use table-level options such as
              <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a> and
              <a class="link" href="replication.html#option_mysqld_replicate-ignore-table"><code class="option">--replicate-ignore-table</code></a>.
              For more information about these options and the impact
              that your choice of replication format has on how they
              operate, see <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>.
            </p></li><li class="listitem"><p><b>RBL, nontransactional tables, and stopped slaves. </b>
              When using row-based logging, if the slave server is
              stopped while a slave thread is updating a
              nontransactional table, the slave database may reaches an
              inconsistent state. For this reason, it is recommended
              that you use a transactional storage engine such as
              <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> for all tables
              replicated using the row-based format.
            </p><p>
            Use of <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> (or
            <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE
            SQL_THREAD</code></a> in MySQL 5.5.9 and later) prior to
            shutting down the slave MySQL server helps prevent such
            issues from occurring, and is always recommended regardless
            of the logging format or storage engines employed.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-rbr-safe-unsafe"></a>17.1.2.3 Determination of Safe and Unsafe Statements in Binary Logging</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301485049632"></a><a class="indexterm" name="idm140301485048176"></a><a class="indexterm" name="idm140301485046672"></a><p>
        When speaking of the <span class="quote">“<span class="quote">safeness</span>”</span> of a statement in
        MySQL Replication, we are referring to whether a statement and
        its effects can be replicated correctly using statement-based
        format. If this is true of the statement, we refer to the
        statement as <em class="firstterm">safe</em>; otherwise, we refer to
        it as <em class="firstterm">unsafe</em>.
      </p><p>
        In general, a statement is safe if it deterministic, and unsafe
        if it is not. However, certain nondeterministic functions are
        <span class="emphasis"><em>not</em></span> considered unsafe (see
        <a class="xref" href="replication.html#replication-rbr-safe-unsafe-not" title="Nondeterministic functions not considered unsafe">Nondeterministic functions not considered unsafe</a>, later in this
        section). In addition, statements using results from
        floating-point math functions—which are
        hardware-dependent—are always considered unsafe (see
        <a class="xref" href="replication.html#replication-features-floatvalues" title="17.4.1.12 Replication and Floating-Point Values">Section 17.4.1.12, “Replication and Floating-Point Values”</a>).
      </p><p><b>Handling of safe and unsafe statements. </b>
          A statement is treated differently depending on whether the
          statement is considered safe, and with respect to the binary
          logging format (that is, the current value of
          <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>).
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            No distinction is made in the treatment of safe and unsafe
            statements when the binary logging mode is
            <code class="literal">ROW</code>.
          </p></li><li class="listitem"><p>
            If the binary logging format is <code class="literal">MIXED</code>,
            statements flagged as unsafe are logged using the row-based
            format; statements regarded as safe are logged using the
            statement-based format.
          </p></li><li class="listitem"><p>
            If the binary logging format is
            <code class="literal">STATEMENT</code>, statements flagged as being
            unsafe generate a warning to this effect. (Safe statements
            are logged normally.)
</p></li></ul>
</div>
<p>
        Each statement flagged as unsafe generates a warning. Formerly,
        in cases where a great many such statements were executed on the
        master, this could lead to very large error log files, sometimes
        even filling up an entire disk unexpectedly. To guard against
        this, MySQL 5.5.27 introduced a warning suppression mechanism,
        which behaves as follows: Whenever the 50 most recent
        <a class="link" href="error-handling.html#error_er_binlog_unsafe_statement"><code class="literal">ER_BINLOG_UNSAFE_STATEMENT</code></a>
        warnings have been generated more than 50 times in any 50-second
        period, warning suppression is enabled. When activated, this
        causes such warnings not to be written to the error log;
        instead, for each 50 warnings of this type, a note <code class="literal">The
        last warning was repeated <em class="replaceable"><code>N</code></em> times in
        last <em class="replaceable"><code>S</code></em> seconds</code> is written
        to the error log. This continues as long as the 50 most recent
        such warnings were issued in 50 seconds or less; once the rate
        has decreased below this threshold, the warnings are once again
        logged normally. Warning suppression has no effect on how the
        safety of statements for statement-based logging is determined,
        nor on how warnings are sent to the client (MySQL clients still
        receive one warning for each such statement).
      </p><p>
        For more information, see <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.
      </p><p><b>Statements considered unsafe. </b><a class="indexterm" name="idm140301485025632"></a>
          Statements having the following characteristics are considered
          unsafe:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Statements containing system functions that may return a different value
              on slave. </b>
              These functions include
              <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a>,
              <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>,
              <a class="link" href="functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK()</code></a>,
              <a class="link" href="functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a>,
              <a class="link" href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a>,
              <a class="link" href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a>,
              <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a>,
              <a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>,
              <a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a>,
              <a class="link" href="functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a>,
              <a class="link" href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a>,
              <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a>,
              <a class="link" href="functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a>,
              <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>,
              <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a>, and
              <a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a>.
            </p><p><a name="replication-rbr-safe-unsafe-not"></a><b>Nondeterministic functions not considered unsafe. </b>
              Although these functions are not deterministic, they are
              treated as safe for purposes of logging and replication:
              <a class="link" href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a>,
              <a class="link" href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a>,
              <a class="link" href="functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code></a>,
              <a class="link" href="functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code></a>,
              <a class="link" href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code></a>,
              <a class="link" href="functions.html#function_curtime"><code class="literal">CURTIME()</code></a>,
              <a class="link" href="functions.html#function_localtime"><code class="literal">LOCALTIME()</code></a>,
              <a class="link" href="functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP()</code></a>,
              <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>,
              <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a>,
              <a class="link" href="functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a>,
              <a class="link" href="functions.html#function_utc-time"><code class="literal">UTC_TIME()</code></a>,
              <a class="link" href="functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP()</code></a>, and
              <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>
            </p><p>
            For more information, see
            <a class="xref" href="replication.html#replication-features-functions" title="17.4.1.14 Replication and System Functions">Section 17.4.1.14, “Replication and System Functions”</a>.
          </p></li><li class="listitem"><p><b>References to system variables. </b>
              Most system variables are not replicated correctly using
              the statement-based format. For exceptions, see
              <a class="xref" href="server-administration.html#binary-log-mixed" title="5.2.4.3 Mixed Binary Logging Format">Section 5.2.4.3, “Mixed Binary Logging Format”</a>.
            </p><p>
            See <a class="xref" href="replication.html#replication-features-variables" title="17.4.1.36 Replication and Variables">Section 17.4.1.36, “Replication and Variables”</a>.
          </p></li><li class="listitem"><p><b>UDFs. </b>
              Since we have no control over what a UDF does, we must
              assume that it is executing unsafe statements.
            </p></li><li class="listitem"><p><b>Updates a table having an AUTO_INCREMENT column. </b>
              Prior to MySQL 5.5.3, all such statements were always
              considered unsafe because the order in which the rows are
              updated could differ on the master and the slave. In MySQL
              5.3.3 and later, these statements are unsafe only when
              they are executed by a trigger or stored program (Bug
              #50192, Bug #11758052).
            </p><p>
            An <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> into a table that
            has a composite primary key containing an
            <code class="literal">AUTO_INCREMENT</code> column that is not the
            first column of this composite key is unsafe.
          </p><p>
            For more information, see
            <a class="xref" href="replication.html#replication-features-auto-increment" title="17.4.1.1 Replication and AUTO_INCREMENT">Section 17.4.1.1, “Replication and AUTO_INCREMENT”</a>.
          </p></li><li class="listitem"><p><b>INSERT DELAYED statement. </b>
              This statement is considered unsafe because the insertion
              of the rows may interleave with concurrently executing
              statements.
            </p></li><li class="listitem"><p><b>INSERT ... ON DUPLICATE KEY UPDATE statements on tables with multiple
              primary or unique keys. </b>
              When executed against a table that contains more than one
              primary or unique key, this statement is considered
              unsafe, being sensitive to the order in which the storage
              engine checks the keys, which is not deterministic, and on
              which the choice of rows updated by the MySQL Server
              depends.
            </p><p>
            An
            <a class="link" href="sql-syntax.html#insert-on-duplicate" title="13.2.5.3 INSERT ... ON DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT
            ... ON DUPLICATE KEY UPDATE</code></a> statement against a
            table having more than one unique or primary key is marked
            as unsafe for statement-based replication beginning with
            MySQL 5.5.24. (Bug #11765650, Bug #58637)
          </p></li><li class="listitem"><p><b>Updates using LIMIT. </b>
              The order in which rows are retrieved is not specified.
            </p><p>
            See <a class="xref" href="replication.html#replication-features-limit" title="17.4.1.15 Replication and LIMIT">Section 17.4.1.15, “Replication and LIMIT”</a>.
          </p></li><li class="listitem"><p><b>Accesses or references log tables. </b>
              The contents of the system log table may differ between
              master and slave.
            </p></li><li class="listitem"><p><b>Nontransactional operations after transactional operations. </b>
              Within a transaction, allowing any nontransactional reads
              or writes to execute after any transactional reads or
              writes is considered unsafe.
            </p><p>
            For more information, see
            <a class="xref" href="replication.html#replication-features-transactions" title="17.4.1.33 Replication and Transactions">Section 17.4.1.33, “Replication and Transactions”</a>.
          </p></li><li class="listitem"><p><b>Accesses or references self-logging tables. </b>
              All reads and writes to self-logging tables are considered
              unsafe. Within a transaction, any statement following a
              read or write to self-logging tables is also considered
              unsafe.
            </p></li><li class="listitem"><p><b>LOAD DATA INFILE statements. </b>
              Beginning with MySQL 5.5.6,
              <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
              INFILE</code></a> is considered unsafe, it causes a warning
              in statement-based mode, and a switch to row-based format
              when using mixed-format logging. See
              <a class="xref" href="replication.html#replication-features-load-data" title="17.4.1.16 Replication and LOAD DATA INFILE">Section 17.4.1.16, “Replication and LOAD DATA INFILE”</a>.
</p></li></ul>
</div>
<p>
        For additional information, see
        <a class="xref" href="replication.html#replication-features" title="17.4.1 Replication Features and Issues">Section 17.4.1, “Replication Features and Issues”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-options"></a>17.1.3 Replication and Binary Logging Options and Variables</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-options-table">17.1.3.1 Replication and Binary Logging Option and Variable Reference</a></span></dt><dt><span class="section"><a href="replication.html#replication-options-master">17.1.3.2 Replication Master Options and Variables</a></span></dt><dt><span class="section"><a href="replication.html#replication-options-slave">17.1.3.3 Replication Slave Options and Variables</a></span></dt><dt><span class="section"><a href="replication.html#replication-options-binary-log">17.1.3.4 Binary Log Options and Variables</a></span></dt></dl>
</div>
<p>
    The next few sections contain information about
    <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> options and server variables that are used
    in replication and for controlling the binary log. Options and
    variables for use on replication masters and replication slaves are
    covered separately, as are options and variables relating to binary
    logging. A set of quick-reference tables providing basic information
    about these options and variables is also included (in the next
    section following this one).
  </p><p><a name="option_mysqld_server-id"></a>
    <a class="indexterm" name="idm140301484944160"></a>

    <a class="indexterm" name="idm140301484942704"></a>

    Of particular importance is the
    <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">--server-id</code></a> option.
</p>
<div class="informaltable">
<table summary="Options for server-id" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--server-id=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_server_id">server_id</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr></tbody></table>
</div>
<p>
    This option is common to both master and slave replication servers,
    and is used in replication to enable master and slave servers to
    identify themselves uniquely. For additional information, see
    <a class="xref" href="replication.html#replication-options-master" title="17.1.3.2 Replication Master Options and Variables">Section 17.1.3.2, “Replication Master Options and Variables”</a>, and
    <a class="xref" href="replication.html#replication-options-slave" title="17.1.3.3 Replication Slave Options and Variables">Section 17.1.3.3, “Replication Slave Options and Variables”</a>.
  </p><p>
    On the master and each slave, you <span class="emphasis"><em>must</em></span> use the
    <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">--server-id</code></a> option to establish a
    unique replication ID in the range from 1 to
    2<sup>32</sup> − 1. <span class="quote">“<span class="quote">Unique</span>”</span>,
    means that each ID must be different from every other ID in use by
    any other replication master or slave. Example:
    <code class="literal">server-id=3</code>.
  </p><p>
    If you omit <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">--server-id</code></a>, the default
    ID is 0, in which case the master refuses connections from all
    slaves, and slaves refuse to connect to the master. In MySQL
    5.5, whether the server ID is set to 0 explicitly or
    the default is allowed to be used, the server sets the
    <code class="literal">server_id</code> system variable to 1; this is a known
    issue that is fixed in MySQL 5.7.
  </p><p>
    For more information, see
    <a class="xref" href="replication.html#replication-howto-slavebaseconfig" title="17.1.1.2 Setting the Replication Slave Configuration">Section 17.1.1.2, “Setting the Replication Slave Configuration”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-options-table"></a>17.1.3.1 Replication and Binary Logging Option and Variable Reference</h4>
</div>
</div>
</div>
<p>
      The following tables list basic information about the MySQL
      command-line options and system variables applicable to
      replication and the binary log.
</p>
<div class="table">
<a name="replication-optvar-summary-table"></a><p class="title"><b>Table 17.1 Summary of Replication options and variables in MySQL 5.5</b></p>
<div class="table-contents">
<table id="replication-optvar-summary-table" summary="Replication Options and Variables: MySQL 5.5"><col width="33%"><col width="33%"><col width="33%"><thead><tr>
      <th id="replicationoptvar" colspan="3" abbr="Name" align="center">Option or Variable Name</th>
    </tr><tr>
      <th id="replicationcli" abbr="CLI">Command Line</th>
      <th id="replicationsysvar" abbr="System">System Variable</th>
      <th id="replicationstatvar" abbr="Status">Status Variable</th>
    </tr><tr>
      <th id="replicationoptfile" abbr="File">Option File</th>
      <th id="replicationscope">Scope</th>
      <th id="replicationdynamic">Dynamic</th>
    </tr><tr>
      <th id="replicationnotes" colspan="3">Notes</th>
    </tr></thead><tbody><tr>
      <td colspan="3" align="center" id="rowabort-slave-event-count" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_abort-slave-event-count">abort-slave-event-count</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowabort-slave-event-count replicationcli">Yes</td>
      <td headers="rowabort-slave-event-count replicationsysvar">No</td>
      <td headers="rowabort-slave-event-count replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowabort-slave-event-count replicationoptfile">Yes</td>
      <td headers="rowabort-slave-event-count replicationscope"></td>
      <td headers="rowabort-slave-event-count replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowabort-slave-event-count replicationnotes">
        <p>
          DESCRIPTION: Option used by mysql-test for debugging and
          testing of replication
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_change_master" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_change_master</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_change_master replicationcli">No</td>
      <td headers="rowCom_change_master replicationsysvar">No</td>
      <td headers="rowCom_change_master replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_change_master replicationoptfile">No</td>
      <td headers="rowCom_change_master replicationscope">Both</td>
      <td headers="rowCom_change_master replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_change_master replicationnotes">
        <p>
          DESCRIPTION: Count of CHANGE MASTER statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_show_master_status" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_show_master_status</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_show_master_status replicationcli">No</td>
      <td headers="rowCom_show_master_status replicationsysvar">No</td>
      <td headers="rowCom_show_master_status replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_show_master_status replicationoptfile">No</td>
      <td headers="rowCom_show_master_status replicationscope">Both</td>
      <td headers="rowCom_show_master_status replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_show_master_status replicationnotes">
        <p>
          DESCRIPTION: Count of SHOW MASTER STATUS statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_show_new_master" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_show_new_master</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_show_new_master replicationcli">No</td>
      <td headers="rowCom_show_new_master replicationsysvar">No</td>
      <td headers="rowCom_show_new_master replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_show_new_master replicationoptfile">No</td>
      <td headers="rowCom_show_new_master replicationscope">Both</td>
      <td headers="rowCom_show_new_master replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_show_new_master replicationnotes">
        <p>
          DESCRIPTION: Count of SHOW NEW MASTER statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_show_slave_hosts" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_show_slave_hosts</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_show_slave_hosts replicationcli">No</td>
      <td headers="rowCom_show_slave_hosts replicationsysvar">No</td>
      <td headers="rowCom_show_slave_hosts replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_show_slave_hosts replicationoptfile">No</td>
      <td headers="rowCom_show_slave_hosts replicationscope">Both</td>
      <td headers="rowCom_show_slave_hosts replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_show_slave_hosts replicationnotes">
        <p>
          DESCRIPTION: Count of SHOW SLAVE HOSTS statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_show_slave_status" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_show_slave_status</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_show_slave_status replicationcli">No</td>
      <td headers="rowCom_show_slave_status replicationsysvar">No</td>
      <td headers="rowCom_show_slave_status replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_show_slave_status replicationoptfile">No</td>
      <td headers="rowCom_show_slave_status replicationscope">Both</td>
      <td headers="rowCom_show_slave_status replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_show_slave_status replicationnotes">
        <p>
          DESCRIPTION: Count of SHOW SLAVE STATUS statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_slave_start" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_slave_start</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_slave_start replicationcli">No</td>
      <td headers="rowCom_slave_start replicationsysvar">No</td>
      <td headers="rowCom_slave_start replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_slave_start replicationoptfile">No</td>
      <td headers="rowCom_slave_start replicationscope">Both</td>
      <td headers="rowCom_slave_start replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_slave_start replicationnotes">
        <p>
          DESCRIPTION: Count of START SLAVE statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_slave_stop" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_slave_stop</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_slave_stop replicationcli">No</td>
      <td headers="rowCom_slave_stop replicationsysvar">No</td>
      <td headers="rowCom_slave_stop replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_slave_stop replicationoptfile">No</td>
      <td headers="rowCom_slave_stop replicationscope">Both</td>
      <td headers="rowCom_slave_stop replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_slave_stop replicationnotes">
        <p>
          DESCRIPTION: Count of STOP SLAVE statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowdisconnect-slave-event-count" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_disconnect-slave-event-count">disconnect-slave-event-count</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowdisconnect-slave-event-count replicationcli">Yes</td>
      <td headers="rowdisconnect-slave-event-count replicationsysvar">No</td>
      <td headers="rowdisconnect-slave-event-count replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowdisconnect-slave-event-count replicationoptfile">Yes</td>
      <td headers="rowdisconnect-slave-event-count replicationscope"></td>
      <td headers="rowdisconnect-slave-event-count replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowdisconnect-slave-event-count replicationnotes">
        <p>
          DESCRIPTION: Option used by mysql-test for debugging and
          testing of replication
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowinit_slave" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_init_slave">init_slave</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowinit_slave replicationcli">Yes</td>
      <td headers="rowinit_slave replicationsysvar">Yes</td>
      <td headers="rowinit_slave replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowinit_slave replicationoptfile">Yes</td>
      <td headers="rowinit_slave replicationscope">Global</td>
      <td headers="rowinit_slave replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowinit_slave replicationnotes">
        <p>
          DESCRIPTION: Statements that are executed when a slave
          connects to a master
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowlog-slave-updates" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_log-slave-updates">log-slave-updates</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowlog-slave-updates replicationcli">Yes</td>
      <td headers="rowlog-slave-updates replicationsysvar">Yes</td>
      <td headers="rowlog-slave-updates replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowlog-slave-updates replicationoptfile">Yes</td>
      <td headers="rowlog-slave-updates replicationscope">Global</td>
      <td headers="rowlog-slave-updates replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowlog-slave-updates replicationnotes">
        <p>
          DESCRIPTION: This option tells the slave to log the updates
          performed by its SQL thread to its own binary log
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowlog_slave_updates" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_log_slave_updates">log_slave_updates</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowlog_slave_updates replicationcli">Yes</td>
      <td headers="rowlog_slave_updates replicationsysvar">Yes</td>
      <td headers="rowlog_slave_updates replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowlog_slave_updates replicationoptfile">Yes</td>
      <td headers="rowlog_slave_updates replicationscope">Global</td>
      <td headers="rowlog_slave_updates replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowlog_slave_updates replicationnotes">
        <p>
          DESCRIPTION: Tells whether the slave should log the updates
          performed by its SQL thread to its own binary log. Read-only;
          set using the --log-slave-updates server option.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-connect-retry" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-connect-retry">master-connect-retry</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-connect-retry replicationcli">Yes</td>
      <td headers="rowmaster-connect-retry replicationsysvar">No</td>
      <td headers="rowmaster-connect-retry replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-connect-retry replicationoptfile">Yes</td>
      <td headers="rowmaster-connect-retry replicationscope"></td>
      <td headers="rowmaster-connect-retry replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-connect-retry replicationnotes">
        <p>
          DESCRIPTION: Number of seconds the slave thread will sleep
          before retrying to connect to the master in case the master
          goes down or the connection is lost
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-host" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-host">master-host</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-host replicationcli">Yes</td>
      <td headers="rowmaster-host replicationsysvar">No</td>
      <td headers="rowmaster-host replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-host replicationoptfile">Yes</td>
      <td headers="rowmaster-host replicationscope"></td>
      <td headers="rowmaster-host replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-host replicationnotes">
        <p>
          DESCRIPTION: Master host name or IP address for replication
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-info-file" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-info-file">master-info-file</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-info-file replicationcli">Yes</td>
      <td headers="rowmaster-info-file replicationsysvar">No</td>
      <td headers="rowmaster-info-file replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-info-file replicationoptfile">Yes</td>
      <td headers="rowmaster-info-file replicationscope"></td>
      <td headers="rowmaster-info-file replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-info-file replicationnotes">
        <p>
          DESCRIPTION: The location and name of the file that remembers
          the master and where the I/O replication thread is in the
          master's binary logs
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-password" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-password">master-password</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-password replicationcli">Yes</td>
      <td headers="rowmaster-password replicationsysvar">No</td>
      <td headers="rowmaster-password replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-password replicationoptfile">Yes</td>
      <td headers="rowmaster-password replicationscope"></td>
      <td headers="rowmaster-password replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-password replicationnotes">
        <p>
          DESCRIPTION: The password the slave thread will authenticate
          with when connecting to master
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-port" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-port">master-port</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-port replicationcli">Yes</td>
      <td headers="rowmaster-port replicationsysvar">No</td>
      <td headers="rowmaster-port replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-port replicationoptfile">Yes</td>
      <td headers="rowmaster-port replicationscope"></td>
      <td headers="rowmaster-port replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-port replicationnotes">
        <p>
          DESCRIPTION: The port the master is listening on
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-retry-count" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-retry-count">master-retry-count</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-retry-count replicationcli">Yes</td>
      <td headers="rowmaster-retry-count replicationsysvar">No</td>
      <td headers="rowmaster-retry-count replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-retry-count replicationoptfile">Yes</td>
      <td headers="rowmaster-retry-count replicationscope"></td>
      <td headers="rowmaster-retry-count replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-retry-count replicationnotes">
        <p>
          DESCRIPTION: Number of tries the slave will make to connect to
          the master before giving up
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-ssl" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-ssl">master-ssl</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-ssl replicationcli">Yes</td>
      <td headers="rowmaster-ssl replicationsysvar">No</td>
      <td headers="rowmaster-ssl replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-ssl replicationoptfile">Yes</td>
      <td headers="rowmaster-ssl replicationscope"></td>
      <td headers="rowmaster-ssl replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-ssl replicationnotes">
        <p>
          DESCRIPTION: Enable the slave to connect to the master using
          SSL
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-ssl-ca" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-ssl">master-ssl-ca</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-ssl-ca replicationcli">Yes</td>
      <td headers="rowmaster-ssl-ca replicationsysvar">No</td>
      <td headers="rowmaster-ssl-ca replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-ssl-ca replicationoptfile">Yes</td>
      <td headers="rowmaster-ssl-ca replicationscope"></td>
      <td headers="rowmaster-ssl-ca replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-ssl-ca replicationnotes">
        <p>
          DESCRIPTION: Master SSL CA file; applies only if master-ssl is
          enabled
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-ssl-capath" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-ssl">master-ssl-capath</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-ssl-capath replicationcli">Yes</td>
      <td headers="rowmaster-ssl-capath replicationsysvar">No</td>
      <td headers="rowmaster-ssl-capath replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-ssl-capath replicationoptfile">Yes</td>
      <td headers="rowmaster-ssl-capath replicationscope"></td>
      <td headers="rowmaster-ssl-capath replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-ssl-capath replicationnotes">
        <p>
          DESCRIPTION: Master SSL CA path; applies only if master-ssl is
          enabled
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-ssl-cert" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-ssl">master-ssl-cert</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-ssl-cert replicationcli">Yes</td>
      <td headers="rowmaster-ssl-cert replicationsysvar">No</td>
      <td headers="rowmaster-ssl-cert replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-ssl-cert replicationoptfile">Yes</td>
      <td headers="rowmaster-ssl-cert replicationscope"></td>
      <td headers="rowmaster-ssl-cert replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-ssl-cert replicationnotes">
        <p>
          DESCRIPTION: Master SSL certificate file name; applies only if
          master-ssl is enabled
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-ssl-cipher" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-ssl">master-ssl-cipher</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-ssl-cipher replicationcli">Yes</td>
      <td headers="rowmaster-ssl-cipher replicationsysvar">No</td>
      <td headers="rowmaster-ssl-cipher replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-ssl-cipher replicationoptfile">Yes</td>
      <td headers="rowmaster-ssl-cipher replicationscope"></td>
      <td headers="rowmaster-ssl-cipher replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-ssl-cipher replicationnotes">
        <p>
          DESCRIPTION: Master SSL cipher; applies only if master-ssl is
          enabled
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-ssl-key" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-ssl">master-ssl-key</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-ssl-key replicationcli">Yes</td>
      <td headers="rowmaster-ssl-key replicationsysvar">No</td>
      <td headers="rowmaster-ssl-key replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-ssl-key replicationoptfile">Yes</td>
      <td headers="rowmaster-ssl-key replicationscope"></td>
      <td headers="rowmaster-ssl-key replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-ssl-key replicationnotes">
        <p>
          DESCRIPTION: Master SSL key file name; applies only if
          master-ssl is enabled
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmaster-user" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_master-user">master-user</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmaster-user replicationcli">Yes</td>
      <td headers="rowmaster-user replicationsysvar">No</td>
      <td headers="rowmaster-user replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowmaster-user replicationoptfile">Yes</td>
      <td headers="rowmaster-user replicationscope"></td>
      <td headers="rowmaster-user replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmaster-user replicationnotes">
        <p>
          DESCRIPTION: The user name the slave thread will use for
          authentication when connecting to master. The user must have
          FILE privilege. If the master user is not set, user test is
          assumed. The value in master.info will take precedence if it
          can be read
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay-log" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_relay-log">relay-log</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay-log replicationcli">Yes</td>
      <td headers="rowrelay-log replicationsysvar">Yes</td>
      <td headers="rowrelay-log replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay-log replicationoptfile">Yes</td>
      <td headers="rowrelay-log replicationscope">Global</td>
      <td headers="rowrelay-log replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay-log replicationnotes">
        <p>
          DESCRIPTION: The location and base name to use for relay logs
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay-log-index" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_relay-log-index">relay-log-index</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay-log-index replicationcli">Yes</td>
      <td headers="rowrelay-log-index replicationsysvar">Yes</td>
      <td headers="rowrelay-log-index replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay-log-index replicationoptfile">Yes</td>
      <td headers="rowrelay-log-index replicationscope">Global</td>
      <td headers="rowrelay-log-index replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay-log-index replicationnotes">
        <p>
          DESCRIPTION: The location and name to use for the file that
          keeps a list of the last relay logs
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay-log-info-file" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_relay-log-info-file">relay-log-info-file</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay-log-info-file replicationcli">Yes</td>
      <td headers="rowrelay-log-info-file replicationsysvar">No</td>
      <td headers="rowrelay-log-info-file replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay-log-info-file replicationoptfile">Yes</td>
      <td headers="rowrelay-log-info-file replicationscope"></td>
      <td headers="rowrelay-log-info-file replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay-log-info-file replicationnotes">
        <p>
          DESCRIPTION: The location and name of the file that remembers
          where the SQL replication thread is in the relay logs
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay-log-recovery" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_relay-log-recovery">relay-log-recovery</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay-log-recovery replicationcli">Yes</td>
      <td headers="rowrelay-log-recovery replicationsysvar">No</td>
      <td headers="rowrelay-log-recovery replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay-log-recovery replicationoptfile">Yes</td>
      <td headers="rowrelay-log-recovery replicationscope"></td>
      <td headers="rowrelay-log-recovery replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay-log-recovery replicationnotes">
        <p>
          DESCRIPTION: Enables automatic recovery of relay log files
          from master at startup
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay_log_index" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_relay_log_index">relay_log_index</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay_log_index replicationcli">Yes</td>
      <td headers="rowrelay_log_index replicationsysvar">Yes</td>
      <td headers="rowrelay_log_index replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay_log_index replicationoptfile">Yes</td>
      <td headers="rowrelay_log_index replicationscope">Global</td>
      <td headers="rowrelay_log_index replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay_log_index replicationnotes">
        <p>
          DESCRIPTION: The name of the relay log index file.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay_log_info_file" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_relay_log_info_file">relay_log_info_file</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay_log_info_file replicationcli">Yes</td>
      <td headers="rowrelay_log_info_file replicationsysvar">Yes</td>
      <td headers="rowrelay_log_info_file replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay_log_info_file replicationoptfile">Yes</td>
      <td headers="rowrelay_log_info_file replicationscope">Global</td>
      <td headers="rowrelay_log_info_file replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay_log_info_file replicationnotes">
        <p>
          DESCRIPTION: The name of the file in which the slave records
          information about the relay logs.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay_log_purge" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#sysvar_relay_log_purge">relay_log_purge</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay_log_purge replicationcli">Yes</td>
      <td headers="rowrelay_log_purge replicationsysvar">Yes</td>
      <td headers="rowrelay_log_purge replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay_log_purge replicationoptfile">Yes</td>
      <td headers="rowrelay_log_purge replicationscope">Global</td>
      <td headers="rowrelay_log_purge replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay_log_purge replicationnotes">
        <p>
          DESCRIPTION: Determines whether relay logs are purged
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay_log_recovery" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_relay_log_recovery">relay_log_recovery</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay_log_recovery replicationcli">Yes</td>
      <td headers="rowrelay_log_recovery replicationsysvar">Yes</td>
      <td headers="rowrelay_log_recovery replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay_log_recovery replicationoptfile">Yes</td>
      <td headers="rowrelay_log_recovery replicationscope">Global</td>
      <td headers="rowrelay_log_recovery replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay_log_recovery replicationnotes">
        <p>
          DESCRIPTION: Whether automatic recovery of relay log files
          from master at startup is enabled; must be enabled for a
          crash-proof slave.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrelay_log_space_limit" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#sysvar_relay_log_space_limit">relay_log_space_limit</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrelay_log_space_limit replicationcli">Yes</td>
      <td headers="rowrelay_log_space_limit replicationsysvar">Yes</td>
      <td headers="rowrelay_log_space_limit replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrelay_log_space_limit replicationoptfile">Yes</td>
      <td headers="rowrelay_log_space_limit replicationscope">Global</td>
      <td headers="rowrelay_log_space_limit replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowrelay_log_space_limit replicationnotes">
        <p>
          DESCRIPTION: Maximum space to use for all relay logs
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreplicate-do-db" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_replicate-do-db">replicate-do-db</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreplicate-do-db replicationcli">Yes</td>
      <td headers="rowreplicate-do-db replicationsysvar">No</td>
      <td headers="rowreplicate-do-db replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreplicate-do-db replicationoptfile">Yes</td>
      <td headers="rowreplicate-do-db replicationscope"></td>
      <td headers="rowreplicate-do-db replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreplicate-do-db replicationnotes">
        <p>
          DESCRIPTION: Tells the slave SQL thread to restrict
          replication to the specified database
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreplicate-do-table" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_replicate-do-table">replicate-do-table</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreplicate-do-table replicationcli">Yes</td>
      <td headers="rowreplicate-do-table replicationsysvar">No</td>
      <td headers="rowreplicate-do-table replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreplicate-do-table replicationoptfile">Yes</td>
      <td headers="rowreplicate-do-table replicationscope"></td>
      <td headers="rowreplicate-do-table replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreplicate-do-table replicationnotes">
        <p>
          DESCRIPTION: Tells the slave SQL thread to restrict
          replication to the specified table
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreplicate-ignore-db" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_replicate-ignore-db">replicate-ignore-db</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreplicate-ignore-db replicationcli">Yes</td>
      <td headers="rowreplicate-ignore-db replicationsysvar">No</td>
      <td headers="rowreplicate-ignore-db replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreplicate-ignore-db replicationoptfile">Yes</td>
      <td headers="rowreplicate-ignore-db replicationscope"></td>
      <td headers="rowreplicate-ignore-db replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreplicate-ignore-db replicationnotes">
        <p>
          DESCRIPTION: Tells the slave SQL thread not to replicate to
          the specified database
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreplicate-ignore-table" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_replicate-ignore-table">replicate-ignore-table</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreplicate-ignore-table replicationcli">Yes</td>
      <td headers="rowreplicate-ignore-table replicationsysvar">No</td>
      <td headers="rowreplicate-ignore-table replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreplicate-ignore-table replicationoptfile">Yes</td>
      <td headers="rowreplicate-ignore-table replicationscope"></td>
      <td headers="rowreplicate-ignore-table replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreplicate-ignore-table replicationnotes">
        <p>
          DESCRIPTION: Tells the slave SQL thread not to replicate to
          the specified table
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreplicate-rewrite-db" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_replicate-rewrite-db">replicate-rewrite-db</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreplicate-rewrite-db replicationcli">Yes</td>
      <td headers="rowreplicate-rewrite-db replicationsysvar">No</td>
      <td headers="rowreplicate-rewrite-db replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreplicate-rewrite-db replicationoptfile">Yes</td>
      <td headers="rowreplicate-rewrite-db replicationscope"></td>
      <td headers="rowreplicate-rewrite-db replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreplicate-rewrite-db replicationnotes">
        <p>
          DESCRIPTION: Updates to a database with a different name than
          the original
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreplicate-same-server-id" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_replicate-same-server-id">replicate-same-server-id</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreplicate-same-server-id replicationcli">Yes</td>
      <td headers="rowreplicate-same-server-id replicationsysvar">No</td>
      <td headers="rowreplicate-same-server-id replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreplicate-same-server-id replicationoptfile">Yes</td>
      <td headers="rowreplicate-same-server-id replicationscope"></td>
      <td headers="rowreplicate-same-server-id replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreplicate-same-server-id replicationnotes">
        <p>
          DESCRIPTION: In replication, if set to 1, do not skip events
          having our server id
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreplicate-wild-do-table" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_replicate-wild-do-table">replicate-wild-do-table</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreplicate-wild-do-table replicationcli">Yes</td>
      <td headers="rowreplicate-wild-do-table replicationsysvar">No</td>
      <td headers="rowreplicate-wild-do-table replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreplicate-wild-do-table replicationoptfile">Yes</td>
      <td headers="rowreplicate-wild-do-table replicationscope"></td>
      <td headers="rowreplicate-wild-do-table replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreplicate-wild-do-table replicationnotes">
        <p>
          DESCRIPTION: Tells the slave thread to restrict replication to
          the tables that match the specified wildcard pattern
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreplicate-wild-ignore-table" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table">replicate-wild-ignore-table</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreplicate-wild-ignore-table replicationcli">Yes</td>
      <td headers="rowreplicate-wild-ignore-table replicationsysvar">No</td>
      <td headers="rowreplicate-wild-ignore-table replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreplicate-wild-ignore-table replicationoptfile">Yes</td>
      <td headers="rowreplicate-wild-ignore-table replicationscope"></td>
      <td headers="rowreplicate-wild-ignore-table replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreplicate-wild-ignore-table replicationnotes">
        <p>
          DESCRIPTION: Tells the slave thread not to replicate to the
          tables that match the given wildcard pattern
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreport-host" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_report-host">report-host</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreport-host replicationcli">Yes</td>
      <td headers="rowreport-host replicationsysvar">Yes</td>
      <td headers="rowreport-host replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreport-host replicationoptfile">Yes</td>
      <td headers="rowreport-host replicationscope">Global</td>
      <td headers="rowreport-host replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreport-host replicationnotes">
        <p>
          DESCRIPTION: Host name or IP of the slave to be reported to
          the master during slave registration
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreport-password" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_report-password">report-password</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreport-password replicationcli">Yes</td>
      <td headers="rowreport-password replicationsysvar">Yes</td>
      <td headers="rowreport-password replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreport-password replicationoptfile">Yes</td>
      <td headers="rowreport-password replicationscope">Global</td>
      <td headers="rowreport-password replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreport-password replicationnotes">
        <p>
          DESCRIPTION: An arbitrary password that the slave server
          should report to the master. Not the same as the password for
          the MySQL replication user account
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreport-port" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_report-port">report-port</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreport-port replicationcli">Yes</td>
      <td headers="rowreport-port replicationsysvar">Yes</td>
      <td headers="rowreport-port replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreport-port replicationoptfile">Yes</td>
      <td headers="rowreport-port replicationscope">Global</td>
      <td headers="rowreport-port replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreport-port replicationnotes">
        <p>
          DESCRIPTION: Port for connecting to slave reported to the
          master during slave registration
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowreport-user" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_report-user">report-user</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowreport-user replicationcli">Yes</td>
      <td headers="rowreport-user replicationsysvar">Yes</td>
      <td headers="rowreport-user replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowreport-user replicationoptfile">Yes</td>
      <td headers="rowreport-user replicationscope">Global</td>
      <td headers="rowreport-user replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowreport-user replicationnotes">
        <p>
          DESCRIPTION: An arbitrary user name that a slave server should
          report to the master. Not the same as the name used with the
          MySQL replication user account.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrpl_recovery_rank" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_rpl_recovery_rank">rpl_recovery_rank</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrpl_recovery_rank replicationcli">No</td>
      <td headers="rowrpl_recovery_rank replicationsysvar">Yes</td>
      <td headers="rowrpl_recovery_rank replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrpl_recovery_rank replicationoptfile">No</td>
      <td headers="rowrpl_recovery_rank replicationscope">Global</td>
      <td headers="rowrpl_recovery_rank replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrpl_recovery_rank replicationnotes">
        <p>
          DESCRIPTION: Not used; removed in later versions
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_clients" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_clients">Rpl_semi_sync_master_clients</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_clients replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_clients replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_clients replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_clients replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_clients replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_clients replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_clients replicationnotes">
        <p>
          DESCRIPTION: Number of semisynchronous slaves
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrpl_semi_sync_master_enabled" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_enabled">rpl_semi_sync_master_enabled</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_master_enabled replicationcli">No</td>
      <td headers="rowrpl_semi_sync_master_enabled replicationsysvar">Yes</td>
      <td headers="rowrpl_semi_sync_master_enabled replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_master_enabled replicationoptfile">No</td>
      <td headers="rowrpl_semi_sync_master_enabled replicationscope">Global</td>
      <td headers="rowrpl_semi_sync_master_enabled replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrpl_semi_sync_master_enabled replicationnotes">
        <p>
          DESCRIPTION: Whether semisynchronous replication is enabled on
          master
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_net_avg_wait_time" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_net_avg_wait_time">Rpl_semi_sync_master_net_avg_wait_time</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_net_avg_wait_time replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_net_avg_wait_time replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_net_avg_wait_time replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_net_avg_wait_time replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_net_avg_wait_time replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_net_avg_wait_time replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_net_avg_wait_time replicationnotes">
        <p>
          DESCRIPTION: The average time the master waited for a slave
          reply
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_net_wait_time" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_net_wait_time">Rpl_semi_sync_master_net_wait_time</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_net_wait_time replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_net_wait_time replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_net_wait_time replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_net_wait_time replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_net_wait_time replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_net_wait_time replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_net_wait_time replicationnotes">
        <p>
          DESCRIPTION: The total time the master waited for slave
          replies
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_net_waits" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_net_waits">Rpl_semi_sync_master_net_waits</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_net_waits replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_net_waits replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_net_waits replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_net_waits replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_net_waits replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_net_waits replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_net_waits replicationnotes">
        <p>
          DESCRIPTION: The total number of times the master waited for
          slave replies
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_no_times" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_no_times">Rpl_semi_sync_master_no_times</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_no_times replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_no_times replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_no_times replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_no_times replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_no_times replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_no_times replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_no_times replicationnotes">
        <p>
          DESCRIPTION: Number of times the master turned off
          semisynchronous replication
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_no_tx" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_no_tx">Rpl_semi_sync_master_no_tx</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_no_tx replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_no_tx replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_no_tx replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_no_tx replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_no_tx replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_no_tx replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_no_tx replicationnotes">
        <p>
          DESCRIPTION: Number of commits not acknowledged successfully
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_status" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_status">Rpl_semi_sync_master_status</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_status replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_status replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_status replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_status replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_status replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_status replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_status replicationnotes">
        <p>
          DESCRIPTION: Whether semisynchronous replication is
          operational on master
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_timefunc_failures" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_timefunc_failures">Rpl_semi_sync_master_timefunc_failures</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_timefunc_failures replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_timefunc_failures replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_timefunc_failures replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_timefunc_failures replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_timefunc_failures replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_timefunc_failures replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_timefunc_failures replicationnotes">
        <p>
          DESCRIPTION: Number of times the master failed when calling
          time functions
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrpl_semi_sync_master_timeout" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_timeout">rpl_semi_sync_master_timeout</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_master_timeout replicationcli">No</td>
      <td headers="rowrpl_semi_sync_master_timeout replicationsysvar">Yes</td>
      <td headers="rowrpl_semi_sync_master_timeout replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_master_timeout replicationoptfile">No</td>
      <td headers="rowrpl_semi_sync_master_timeout replicationscope">Global</td>
      <td headers="rowrpl_semi_sync_master_timeout replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrpl_semi_sync_master_timeout replicationnotes">
        <p>
          DESCRIPTION: Number of milliseconds to wait for slave
          acknowledgment
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrpl_semi_sync_master_trace_level" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_trace_level">rpl_semi_sync_master_trace_level</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_master_trace_level replicationcli">No</td>
      <td headers="rowrpl_semi_sync_master_trace_level replicationsysvar">Yes</td>
      <td headers="rowrpl_semi_sync_master_trace_level replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_master_trace_level replicationoptfile">No</td>
      <td headers="rowrpl_semi_sync_master_trace_level replicationscope">Global</td>
      <td headers="rowrpl_semi_sync_master_trace_level replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrpl_semi_sync_master_trace_level replicationnotes">
        <p>
          DESCRIPTION: The semisynchronous replication debug trace level
          on the master
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_tx_avg_wait_time" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_tx_avg_wait_time">Rpl_semi_sync_master_tx_avg_wait_time</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_tx_avg_wait_time replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_tx_avg_wait_time replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_tx_avg_wait_time replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_tx_avg_wait_time replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_tx_avg_wait_time replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_tx_avg_wait_time replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_tx_avg_wait_time replicationnotes">
        <p>
          DESCRIPTION: The average time the master waited for each
          transaction
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_tx_wait_time" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_tx_wait_time">Rpl_semi_sync_master_tx_wait_time</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_tx_wait_time replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_tx_wait_time replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_tx_wait_time replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_tx_wait_time replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_tx_wait_time replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_tx_wait_time replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_tx_wait_time replicationnotes">
        <p>
          DESCRIPTION: The total time the master waited for transactions
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_tx_waits" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_tx_waits">Rpl_semi_sync_master_tx_waits</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_tx_waits replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_tx_waits replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_tx_waits replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_tx_waits replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_tx_waits replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_tx_waits replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_tx_waits replicationnotes">
        <p>
          DESCRIPTION: The total number of times the master waited for
          transactions
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrpl_semi_sync_master_wait_no_slave" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_wait_no_slave">rpl_semi_sync_master_wait_no_slave</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_master_wait_no_slave replicationcli">No</td>
      <td headers="rowrpl_semi_sync_master_wait_no_slave replicationsysvar">Yes</td>
      <td headers="rowrpl_semi_sync_master_wait_no_slave replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_master_wait_no_slave replicationoptfile">No</td>
      <td headers="rowrpl_semi_sync_master_wait_no_slave replicationscope">Global</td>
      <td headers="rowrpl_semi_sync_master_wait_no_slave replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrpl_semi_sync_master_wait_no_slave replicationnotes">
        <p>
          DESCRIPTION: Whether master waits for timeout even with no
          slaves
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_wait_pos_backtraverse" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_wait_pos_backtraverse">Rpl_semi_sync_master_wait_pos_backtraverse</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_wait_pos_backtraverse replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_wait_pos_backtraverse replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_wait_pos_backtraverse replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_wait_pos_backtraverse replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_wait_pos_backtraverse replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_wait_pos_backtraverse replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_wait_pos_backtraverse replicationnotes">
        <p>
          DESCRIPTION: The total number of times the master waited for
          an event with binary coordinates lower than events waited for
          previously
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_wait_sessions" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_wait_sessions">Rpl_semi_sync_master_wait_sessions</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_wait_sessions replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_wait_sessions replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_wait_sessions replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_wait_sessions replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_wait_sessions replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_wait_sessions replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_wait_sessions replicationnotes">
        <p>
          DESCRIPTION: Number of sessions currently waiting for slave
          replies
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_master_yes_tx" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_yes_tx">Rpl_semi_sync_master_yes_tx</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_yes_tx replicationcli">No</td>
      <td headers="rowRpl_semi_sync_master_yes_tx replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_master_yes_tx replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_master_yes_tx replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_master_yes_tx replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_master_yes_tx replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_master_yes_tx replicationnotes">
        <p>
          DESCRIPTION: Number of commits acknowledged successfully
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrpl_semi_sync_slave_enabled" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#sysvar_rpl_semi_sync_slave_enabled">rpl_semi_sync_slave_enabled</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_slave_enabled replicationcli">No</td>
      <td headers="rowrpl_semi_sync_slave_enabled replicationsysvar">Yes</td>
      <td headers="rowrpl_semi_sync_slave_enabled replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_slave_enabled replicationoptfile">No</td>
      <td headers="rowrpl_semi_sync_slave_enabled replicationscope">Global</td>
      <td headers="rowrpl_semi_sync_slave_enabled replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrpl_semi_sync_slave_enabled replicationnotes">
        <p>
          DESCRIPTION: Whether semisynchronous replication is enabled on
          slave
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_semi_sync_slave_status" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_semi_sync_slave_status">Rpl_semi_sync_slave_status</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_slave_status replicationcli">No</td>
      <td headers="rowRpl_semi_sync_slave_status replicationsysvar">No</td>
      <td headers="rowRpl_semi_sync_slave_status replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_semi_sync_slave_status replicationoptfile">No</td>
      <td headers="rowRpl_semi_sync_slave_status replicationscope">Global</td>
      <td headers="rowRpl_semi_sync_slave_status replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_semi_sync_slave_status replicationnotes">
        <p>
          DESCRIPTION: Whether semisynchronous replication is
          operational on slave
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowrpl_semi_sync_slave_trace_level" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#sysvar_rpl_semi_sync_slave_trace_level">rpl_semi_sync_slave_trace_level</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_slave_trace_level replicationcli">No</td>
      <td headers="rowrpl_semi_sync_slave_trace_level replicationsysvar">Yes</td>
      <td headers="rowrpl_semi_sync_slave_trace_level replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowrpl_semi_sync_slave_trace_level replicationoptfile">No</td>
      <td headers="rowrpl_semi_sync_slave_trace_level replicationscope">Global</td>
      <td headers="rowrpl_semi_sync_slave_trace_level replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowrpl_semi_sync_slave_trace_level replicationnotes">
        <p>
          DESCRIPTION: The semisynchronous replication debug trace level
          on the slave
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowRpl_status" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Rpl_status">Rpl_status</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowRpl_status replicationcli">No</td>
      <td headers="rowRpl_status replicationsysvar">No</td>
      <td headers="rowRpl_status replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowRpl_status replicationoptfile">No</td>
      <td headers="rowRpl_status replicationscope">Global</td>
      <td headers="rowRpl_status replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowRpl_status replicationnotes">
        <p>
          DESCRIPTION: The status of fail-safe replication (not
          implemented)
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowshow-slave-auth-info" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_show-slave-auth-info">show-slave-auth-info</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowshow-slave-auth-info replicationcli">Yes</td>
      <td headers="rowshow-slave-auth-info replicationsysvar">No</td>
      <td headers="rowshow-slave-auth-info replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowshow-slave-auth-info replicationoptfile">Yes</td>
      <td headers="rowshow-slave-auth-info replicationscope"></td>
      <td headers="rowshow-slave-auth-info replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowshow-slave-auth-info replicationnotes">
        <p>
          DESCRIPTION: Show user name and password in SHOW SLAVE HOSTS
          on this master
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowskip-slave-start" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_skip-slave-start">skip-slave-start</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowskip-slave-start replicationcli">Yes</td>
      <td headers="rowskip-slave-start replicationsysvar">No</td>
      <td headers="rowskip-slave-start replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowskip-slave-start replicationoptfile">Yes</td>
      <td headers="rowskip-slave-start replicationscope"></td>
      <td headers="rowskip-slave-start replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowskip-slave-start replicationnotes">
        <p>
          DESCRIPTION: If set, slave is not autostarted
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave-load-tmpdir" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_slave-load-tmpdir">slave-load-tmpdir</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave-load-tmpdir replicationcli">Yes</td>
      <td headers="rowslave-load-tmpdir replicationsysvar">Yes</td>
      <td headers="rowslave-load-tmpdir replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave-load-tmpdir replicationoptfile">Yes</td>
      <td headers="rowslave-load-tmpdir replicationscope">Global</td>
      <td headers="rowslave-load-tmpdir replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowslave-load-tmpdir replicationnotes">
        <p>
          DESCRIPTION: The location where the slave should put its
          temporary files when replicating a LOAD DATA INFILE statement
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave-max-allowed-packet" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_slave-max-allowed-packet">slave-max-allowed-packet</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave-max-allowed-packet replicationcli">Yes</td>
      <td headers="rowslave-max-allowed-packet replicationsysvar">No</td>
      <td headers="rowslave-max-allowed-packet replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave-max-allowed-packet replicationoptfile">Yes</td>
      <td headers="rowslave-max-allowed-packet replicationscope"></td>
      <td headers="rowslave-max-allowed-packet replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowslave-max-allowed-packet replicationnotes">
        <p>
          DESCRIPTION: Maximum size, in bytes, of a packet that can be
          sent from a replication master to a slave; overrides
          max_allowed_packet.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave_net_timeout" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_slave-net-timeout">slave_net_timeout</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave_net_timeout replicationcli">Yes</td>
      <td headers="rowslave_net_timeout replicationsysvar">Yes</td>
      <td headers="rowslave_net_timeout replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave_net_timeout replicationoptfile">Yes</td>
      <td headers="rowslave_net_timeout replicationscope">Global</td>
      <td headers="rowslave_net_timeout replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowslave_net_timeout replicationnotes">
        <p>
          DESCRIPTION: Number of seconds to wait for more data from a
          master/slave connection before aborting the read
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave-skip-errors" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_slave-skip-errors">slave-skip-errors</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave-skip-errors replicationcli">Yes</td>
      <td headers="rowslave-skip-errors replicationsysvar">Yes</td>
      <td headers="rowslave-skip-errors replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave-skip-errors replicationoptfile">Yes</td>
      <td headers="rowslave-skip-errors replicationscope">Global</td>
      <td headers="rowslave-skip-errors replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowslave-skip-errors replicationnotes">
        <p>
          DESCRIPTION: Tells the slave thread to continue replication
          when a query returns an error from the provided list
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave_compressed_protocol" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_slave_compressed_protocol">slave_compressed_protocol</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave_compressed_protocol replicationcli">Yes</td>
      <td headers="rowslave_compressed_protocol replicationsysvar">Yes</td>
      <td headers="rowslave_compressed_protocol replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave_compressed_protocol replicationoptfile">Yes</td>
      <td headers="rowslave_compressed_protocol replicationscope">Global</td>
      <td headers="rowslave_compressed_protocol replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowslave_compressed_protocol replicationnotes">
        <p>
          DESCRIPTION: Use compression on master/slave protocol
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave_exec_mode" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_slave_exec_mode">slave_exec_mode</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave_exec_mode replicationcli">Yes</td>
      <td headers="rowslave_exec_mode replicationsysvar">Yes</td>
      <td headers="rowslave_exec_mode replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave_exec_mode replicationoptfile">Yes</td>
      <td headers="rowslave_exec_mode replicationscope">Global</td>
      <td headers="rowslave_exec_mode replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowslave_exec_mode replicationnotes">
        <p>
          DESCRIPTION: Allows for switching the slave thread between
          IDEMPOTENT mode (key and some other errors suppressed) and
          STRICT mode; STRICT mode is the default, except for MySQL
          Cluster, where IDEMPOTENT is always used
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowSlave_heartbeat_period" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Slave_heartbeat_period">Slave_heartbeat_period</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowSlave_heartbeat_period replicationcli">No</td>
      <td headers="rowSlave_heartbeat_period replicationsysvar">No</td>
      <td headers="rowSlave_heartbeat_period replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowSlave_heartbeat_period replicationoptfile">No</td>
      <td headers="rowSlave_heartbeat_period replicationscope">Global</td>
      <td headers="rowSlave_heartbeat_period replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowSlave_heartbeat_period replicationnotes">
        <p>
          DESCRIPTION: The slave's replication heartbeat interval, in
          seconds
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave_max_allowed_packet" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_slave_max_allowed_packet">slave_max_allowed_packet</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave_max_allowed_packet replicationcli">No</td>
      <td headers="rowslave_max_allowed_packet replicationsysvar">Yes</td>
      <td headers="rowslave_max_allowed_packet replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave_max_allowed_packet replicationoptfile">No</td>
      <td headers="rowslave_max_allowed_packet replicationscope">Global</td>
      <td headers="rowslave_max_allowed_packet replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowslave_max_allowed_packet replicationnotes">
        <p>
          DESCRIPTION: Maximum size, in bytes, of a packet that can be
          sent from a replication master to a slave; overrides
          max_allowed_packet.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowSlave_open_temp_tables" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Slave_open_temp_tables">Slave_open_temp_tables</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowSlave_open_temp_tables replicationcli">No</td>
      <td headers="rowSlave_open_temp_tables replicationsysvar">No</td>
      <td headers="rowSlave_open_temp_tables replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowSlave_open_temp_tables replicationoptfile">No</td>
      <td headers="rowSlave_open_temp_tables replicationscope">Global</td>
      <td headers="rowSlave_open_temp_tables replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowSlave_open_temp_tables replicationnotes">
        <p>
          DESCRIPTION: Number of temporary tables that the slave SQL
          thread currently has open
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowSlave_retried_transactions" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Slave_retried_transactions">Slave_retried_transactions</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowSlave_retried_transactions replicationcli">No</td>
      <td headers="rowSlave_retried_transactions replicationsysvar">No</td>
      <td headers="rowSlave_retried_transactions replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowSlave_retried_transactions replicationoptfile">No</td>
      <td headers="rowSlave_retried_transactions replicationscope">Global</td>
      <td headers="rowSlave_retried_transactions replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowSlave_retried_transactions replicationnotes">
        <p>
          DESCRIPTION: The total number of times since startup that the
          replication slave SQL thread has retried transactions
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowSlave_running" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Slave_running">Slave_running</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowSlave_running replicationcli">No</td>
      <td headers="rowSlave_running replicationsysvar">No</td>
      <td headers="rowSlave_running replicationstatvar">Yes</td>
    </tr><tr>
      <td headers="rowSlave_running replicationoptfile">No</td>
      <td headers="rowSlave_running replicationscope">Global</td>
      <td headers="rowSlave_running replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowSlave_running replicationnotes">
        <p>
          DESCRIPTION: The state of this server as a replication slave
          (slave I/O thread status)
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave_transaction_retries" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_slave_transaction_retries">slave_transaction_retries</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave_transaction_retries replicationcli">Yes</td>
      <td headers="rowslave_transaction_retries replicationsysvar">Yes</td>
      <td headers="rowslave_transaction_retries replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave_transaction_retries replicationoptfile">Yes</td>
      <td headers="rowslave_transaction_retries replicationscope">Global</td>
      <td headers="rowslave_transaction_retries replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowslave_transaction_retries replicationnotes">
        <p>
          DESCRIPTION: Number of times the slave SQL thread will retry a
          transaction in case it failed with a deadlock or elapsed lock
          wait timeout, before giving up and stopping
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowslave_type_conversions" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_slave_type_conversions">slave_type_conversions</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowslave_type_conversions replicationcli">Yes</td>
      <td headers="rowslave_type_conversions replicationsysvar">Yes</td>
      <td headers="rowslave_type_conversions replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowslave_type_conversions replicationoptfile">Yes</td>
      <td headers="rowslave_type_conversions replicationscope">Global</td>
      <td headers="rowslave_type_conversions replicationdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowslave_type_conversions replicationnotes">
        <p>
          DESCRIPTION: Controls type conversion mode on replication
          slave. Value is a list of zero or more elements from the list:
          ALL_LOSSY, ALL_NON_LOSSY. Set to an empty string to disallow
          type conversions between master and slave.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowsql_slave_skip_counter" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_sql_slave_skip_counter">sql_slave_skip_counter</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowsql_slave_skip_counter replicationcli">No</td>
      <td headers="rowsql_slave_skip_counter replicationsysvar">Yes</td>
      <td headers="rowsql_slave_skip_counter replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowsql_slave_skip_counter replicationoptfile">No</td>
      <td headers="rowsql_slave_skip_counter replicationscope">Global</td>
      <td headers="rowsql_slave_skip_counter replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowsql_slave_skip_counter replicationnotes">
        <p>
          DESCRIPTION: Number of events from the master that a slave
          server should skip. Not compatible with GTID replication.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowsync_binlog" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_sync_binlog">sync_binlog</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowsync_binlog replicationcli">Yes</td>
      <td headers="rowsync_binlog replicationsysvar">Yes</td>
      <td headers="rowsync_binlog replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowsync_binlog replicationoptfile">Yes</td>
      <td headers="rowsync_binlog replicationscope">Global</td>
      <td headers="rowsync_binlog replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowsync_binlog replicationnotes">
        <p>
          DESCRIPTION: Synchronously flush binary log to disk after
          every #th event
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowsync_master_info" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_sync_master_info">sync_master_info</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowsync_master_info replicationcli">Yes</td>
      <td headers="rowsync_master_info replicationsysvar">Yes</td>
      <td headers="rowsync_master_info replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowsync_master_info replicationoptfile">Yes</td>
      <td headers="rowsync_master_info replicationscope">Global</td>
      <td headers="rowsync_master_info replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowsync_master_info replicationnotes">
        <p>
          DESCRIPTION: Synchronize master.info to disk after every #th
          event.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowsync_relay_log" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_sync_relay_log">sync_relay_log</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowsync_relay_log replicationcli">Yes</td>
      <td headers="rowsync_relay_log replicationsysvar">Yes</td>
      <td headers="rowsync_relay_log replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowsync_relay_log replicationoptfile">Yes</td>
      <td headers="rowsync_relay_log replicationscope">Global</td>
      <td headers="rowsync_relay_log replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowsync_relay_log replicationnotes">
        <p>
          DESCRIPTION: Synchronize relay log to disk after every #th
          event.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowsync_relay_log_info" headers="replicationoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_sync_relay_log_info">sync_relay_log_info</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowsync_relay_log_info replicationcli">Yes</td>
      <td headers="rowsync_relay_log_info replicationsysvar">Yes</td>
      <td headers="rowsync_relay_log_info replicationstatvar">No</td>
    </tr><tr>
      <td headers="rowsync_relay_log_info replicationoptfile">Yes</td>
      <td headers="rowsync_relay_log_info replicationscope">Global</td>
      <td headers="rowsync_relay_log_info replicationdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowsync_relay_log_info replicationnotes">
        <p>
          DESCRIPTION: Synchronize relay.info file to disk after every
          #th event.
        </p>
      </td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      <a class="xref" href="replication.html#replication-options-master" title="17.1.3.2 Replication Master Options and Variables">Section 17.1.3.2, “Replication Master Options and Variables”</a>, provides more
      detailed information about options and variables relating to
      replication master servers. For more information about options and
      variables relating to replication slaves, see
      <a class="xref" href="replication.html#replication-options-slave" title="17.1.3.3 Replication Slave Options and Variables">Section 17.1.3.3, “Replication Slave Options and Variables”</a>.
</p>
<div class="table">
<a name="binlog-optvar-summary-table"></a><p class="title"><b>Table 17.2 Summary of Binary Logging options and variables in MySQL 5.5</b></p>
<div class="table-contents">
<table id="binlog-optvar-summary-table" summary="Binary Logging Options and Variables: MySQL 5.5"><col width="33%"><col width="33%"><col width="33%"><thead><tr>
      <th id="binlogoptvar" colspan="3" abbr="Name" align="center">Option or Variable Name</th>
    </tr><tr>
      <th id="binlogcli" abbr="CLI">Command Line</th>
      <th id="binlogsysvar" abbr="System">System Variable</th>
      <th id="binlogstatvar" abbr="Status">Status Variable</th>
    </tr><tr>
      <th id="binlogoptfile" abbr="File">Option File</th>
      <th id="binlogscope">Scope</th>
      <th id="binlogdynamic">Dynamic</th>
    </tr><tr>
      <th id="binlognotes" colspan="3">Notes</th>
    </tr></thead><tbody><tr>
      <td colspan="3" align="center" id="rowbinlog-do-db" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_binlog-do-db">binlog-do-db</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowbinlog-do-db binlogcli">Yes</td>
      <td headers="rowbinlog-do-db binlogsysvar">No</td>
      <td headers="rowbinlog-do-db binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowbinlog-do-db binlogoptfile">Yes</td>
      <td headers="rowbinlog-do-db binlogscope"></td>
      <td headers="rowbinlog-do-db binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowbinlog-do-db binlognotes">
        <p>
          DESCRIPTION: Limits binary logging to specific databases
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowbinlog_format" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#option_mysqld_binlog-format">binlog_format</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowbinlog_format binlogcli">Yes</td>
      <td headers="rowbinlog_format binlogsysvar">Yes</td>
      <td headers="rowbinlog_format binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowbinlog_format binlogoptfile">Yes</td>
      <td headers="rowbinlog_format binlogscope">Both</td>
      <td headers="rowbinlog_format binlogdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowbinlog_format binlognotes">
        <p>
          DESCRIPTION: Specifies the format of the binary log
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowbinlog-ignore-db" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_binlog-ignore-db">binlog-ignore-db</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowbinlog-ignore-db binlogcli">Yes</td>
      <td headers="rowbinlog-ignore-db binlogsysvar">No</td>
      <td headers="rowbinlog-ignore-db binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowbinlog-ignore-db binlogoptfile">Yes</td>
      <td headers="rowbinlog-ignore-db binlogscope"></td>
      <td headers="rowbinlog-ignore-db binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowbinlog-ignore-db binlognotes">
        <p>
          DESCRIPTION: Tells the master that updates to the given
          database should not be logged to the binary log
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowbinlog-row-event-max-size" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_binlog-row-event-max-size">binlog-row-event-max-size</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowbinlog-row-event-max-size binlogcli">Yes</td>
      <td headers="rowbinlog-row-event-max-size binlogsysvar">No</td>
      <td headers="rowbinlog-row-event-max-size binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowbinlog-row-event-max-size binlogoptfile">Yes</td>
      <td headers="rowbinlog-row-event-max-size binlogscope"></td>
      <td headers="rowbinlog-row-event-max-size binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowbinlog-row-event-max-size binlognotes">
        <p>
          DESCRIPTION: Binary log max event size
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowBinlog_cache_disk_use" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Binlog_cache_disk_use">Binlog_cache_disk_use</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowBinlog_cache_disk_use binlogcli">No</td>
      <td headers="rowBinlog_cache_disk_use binlogsysvar">No</td>
      <td headers="rowBinlog_cache_disk_use binlogstatvar">Yes</td>
    </tr><tr>
      <td headers="rowBinlog_cache_disk_use binlogoptfile">No</td>
      <td headers="rowBinlog_cache_disk_use binlogscope">Global</td>
      <td headers="rowBinlog_cache_disk_use binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowBinlog_cache_disk_use binlognotes">
        <p>
          DESCRIPTION: Number of transactions that used a temporary file
          instead of the binary log cache
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowbinlog_cache_size" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_binlog_cache_size">binlog_cache_size</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowbinlog_cache_size binlogcli">Yes</td>
      <td headers="rowbinlog_cache_size binlogsysvar">Yes</td>
      <td headers="rowbinlog_cache_size binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowbinlog_cache_size binlogoptfile">Yes</td>
      <td headers="rowbinlog_cache_size binlogscope">Global</td>
      <td headers="rowbinlog_cache_size binlogdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowbinlog_cache_size binlognotes">
        <p>
          DESCRIPTION: Size of the cache to hold the SQL statements for
          the binary log during a transaction
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowBinlog_cache_use" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Binlog_cache_use">Binlog_cache_use</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowBinlog_cache_use binlogcli">No</td>
      <td headers="rowBinlog_cache_use binlogsysvar">No</td>
      <td headers="rowBinlog_cache_use binlogstatvar">Yes</td>
    </tr><tr>
      <td headers="rowBinlog_cache_use binlogoptfile">No</td>
      <td headers="rowBinlog_cache_use binlogscope">Global</td>
      <td headers="rowBinlog_cache_use binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowBinlog_cache_use binlognotes">
        <p>
          DESCRIPTION: Number of transactions that used the temporary
          binary log cache
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowbinlog_direct_non_transactional_updates" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates">binlog_direct_non_transactional_updates</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowbinlog_direct_non_transactional_updates binlogcli">Yes</td>
      <td headers="rowbinlog_direct_non_transactional_updates binlogsysvar">Yes</td>
      <td headers="rowbinlog_direct_non_transactional_updates binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowbinlog_direct_non_transactional_updates binlogoptfile">Yes</td>
      <td headers="rowbinlog_direct_non_transactional_updates binlogscope">Both</td>
      <td headers="rowbinlog_direct_non_transactional_updates binlogdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowbinlog_direct_non_transactional_updates binlognotes">
        <p>
          DESCRIPTION: Causes updates using statement format to
          nontransactional engines to be written directly to binary log.
          See documentation before using.
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowBinlog_stmt_cache_disk_use" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Binlog_stmt_cache_disk_use">Binlog_stmt_cache_disk_use</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowBinlog_stmt_cache_disk_use binlogcli">No</td>
      <td headers="rowBinlog_stmt_cache_disk_use binlogsysvar">No</td>
      <td headers="rowBinlog_stmt_cache_disk_use binlogstatvar">Yes</td>
    </tr><tr>
      <td headers="rowBinlog_stmt_cache_disk_use binlogoptfile">No</td>
      <td headers="rowBinlog_stmt_cache_disk_use binlogscope">Global</td>
      <td headers="rowBinlog_stmt_cache_disk_use binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowBinlog_stmt_cache_disk_use binlognotes">
        <p>
          DESCRIPTION: Number of nontransactional statements that used a
          temporary file instead of the binary log statement cache
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowbinlog_stmt_cache_size" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_binlog_stmt_cache_size">binlog_stmt_cache_size</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowbinlog_stmt_cache_size binlogcli">Yes</td>
      <td headers="rowbinlog_stmt_cache_size binlogsysvar">Yes</td>
      <td headers="rowbinlog_stmt_cache_size binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowbinlog_stmt_cache_size binlogoptfile">Yes</td>
      <td headers="rowbinlog_stmt_cache_size binlogscope">Global</td>
      <td headers="rowbinlog_stmt_cache_size binlogdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowbinlog_stmt_cache_size binlognotes">
        <p>
          DESCRIPTION: Size of the cache to hold nontransactional
          statements for the binary log during a transaction
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowBinlog_stmt_cache_use" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Binlog_stmt_cache_use">Binlog_stmt_cache_use</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowBinlog_stmt_cache_use binlogcli">No</td>
      <td headers="rowBinlog_stmt_cache_use binlogsysvar">No</td>
      <td headers="rowBinlog_stmt_cache_use binlogstatvar">Yes</td>
    </tr><tr>
      <td headers="rowBinlog_stmt_cache_use binlogoptfile">No</td>
      <td headers="rowBinlog_stmt_cache_use binlogscope">Global</td>
      <td headers="rowBinlog_stmt_cache_use binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowBinlog_stmt_cache_use binlognotes">
        <p>
          DESCRIPTION: Number of statements that used the temporary
          binary log statement cache
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_show_binlog_events" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_show_binlog_events</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_show_binlog_events binlogcli">No</td>
      <td headers="rowCom_show_binlog_events binlogsysvar">No</td>
      <td headers="rowCom_show_binlog_events binlogstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_show_binlog_events binlogoptfile">No</td>
      <td headers="rowCom_show_binlog_events binlogscope">Both</td>
      <td headers="rowCom_show_binlog_events binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_show_binlog_events binlognotes">
        <p>
          DESCRIPTION: Count of SHOW BINLOG EVENTS statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowCom_show_binlogs" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_show_binlogs</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowCom_show_binlogs binlogcli">No</td>
      <td headers="rowCom_show_binlogs binlogsysvar">No</td>
      <td headers="rowCom_show_binlogs binlogstatvar">Yes</td>
    </tr><tr>
      <td headers="rowCom_show_binlogs binlogoptfile">No</td>
      <td headers="rowCom_show_binlogs binlogscope">Both</td>
      <td headers="rowCom_show_binlogs binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowCom_show_binlogs binlognotes">
        <p>
          DESCRIPTION: Count of SHOW BINLOGS statements
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowlog-bin-use-v1-row-events" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_log-bin-use-v1-row-events">log-bin-use-v1-row-events</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowlog-bin-use-v1-row-events binlogcli">Yes</td>
      <td headers="rowlog-bin-use-v1-row-events binlogsysvar">Yes</td>
      <td headers="rowlog-bin-use-v1-row-events binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowlog-bin-use-v1-row-events binlogoptfile">Yes</td>
      <td headers="rowlog-bin-use-v1-row-events binlogscope">Global</td>
      <td headers="rowlog-bin-use-v1-row-events binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowlog-bin-use-v1-row-events binlognotes">
        <p>
          DESCRIPTION: Use version 1 binary log row events
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowlog_bin_use_v1_row_events" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_log_bin_use_v1_row_events">log_bin_use_v1_row_events</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowlog_bin_use_v1_row_events binlogcli">Yes</td>
      <td headers="rowlog_bin_use_v1_row_events binlogsysvar">Yes</td>
      <td headers="rowlog_bin_use_v1_row_events binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowlog_bin_use_v1_row_events binlogoptfile">Yes</td>
      <td headers="rowlog_bin_use_v1_row_events binlogscope">Global</td>
      <td headers="rowlog_bin_use_v1_row_events binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowlog_bin_use_v1_row_events binlognotes">
        <p>
          DESCRIPTION: Shows whether server is using version 1 binary
          log row events
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmax-binlog-dump-events" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_max-binlog-dump-events">max-binlog-dump-events</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmax-binlog-dump-events binlogcli">Yes</td>
      <td headers="rowmax-binlog-dump-events binlogsysvar">No</td>
      <td headers="rowmax-binlog-dump-events binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowmax-binlog-dump-events binlogoptfile">Yes</td>
      <td headers="rowmax-binlog-dump-events binlogscope"></td>
      <td headers="rowmax-binlog-dump-events binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowmax-binlog-dump-events binlognotes">
        <p>
          DESCRIPTION: Option used by mysql-test for debugging and
          testing of replication
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmax_binlog_cache_size" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_max_binlog_cache_size">max_binlog_cache_size</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmax_binlog_cache_size binlogcli">Yes</td>
      <td headers="rowmax_binlog_cache_size binlogsysvar">Yes</td>
      <td headers="rowmax_binlog_cache_size binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowmax_binlog_cache_size binlogoptfile">Yes</td>
      <td headers="rowmax_binlog_cache_size binlogscope">Global</td>
      <td headers="rowmax_binlog_cache_size binlogdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowmax_binlog_cache_size binlognotes">
        <p>
          DESCRIPTION: Can be used to restrict the total size used to
          cache a multi-statement transaction
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmax_binlog_size" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_max_binlog_size">max_binlog_size</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmax_binlog_size binlogcli">Yes</td>
      <td headers="rowmax_binlog_size binlogsysvar">Yes</td>
      <td headers="rowmax_binlog_size binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowmax_binlog_size binlogoptfile">Yes</td>
      <td headers="rowmax_binlog_size binlogscope">Global</td>
      <td headers="rowmax_binlog_size binlogdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowmax_binlog_size binlognotes">
        <p>
          DESCRIPTION: Binary log will be rotated automatically when
          size exceeds this value
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowmax_binlog_stmt_cache_size" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#sysvar_max_binlog_stmt_cache_size">max_binlog_stmt_cache_size</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowmax_binlog_stmt_cache_size binlogcli">Yes</td>
      <td headers="rowmax_binlog_stmt_cache_size binlogsysvar">Yes</td>
      <td headers="rowmax_binlog_stmt_cache_size binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowmax_binlog_stmt_cache_size binlogoptfile">Yes</td>
      <td headers="rowmax_binlog_stmt_cache_size binlogscope">Global</td>
      <td headers="rowmax_binlog_stmt_cache_size binlogdynamic">Yes</td>
    </tr><tr>
      <td colspan="3" headers="rowmax_binlog_stmt_cache_size binlognotes">
        <p>
          DESCRIPTION: Can be used to restrict the total size used to
          cache all nontransactional statements during a transaction
        </p>
      </td>
    </tr></tbody><tbody><tr>
      <td colspan="3" align="center" id="rowsporadic-binlog-dump-fail" headers="binlogoptvar">
        <p>
          <code class="literal"><a class="link" href="replication.html#option_mysqld_sporadic-binlog-dump-fail">sporadic-binlog-dump-fail</a></code>
        </p>
      </td>
    </tr><tr>
      <td headers="rowsporadic-binlog-dump-fail binlogcli">Yes</td>
      <td headers="rowsporadic-binlog-dump-fail binlogsysvar">No</td>
      <td headers="rowsporadic-binlog-dump-fail binlogstatvar">No</td>
    </tr><tr>
      <td headers="rowsporadic-binlog-dump-fail binlogoptfile">Yes</td>
      <td headers="rowsporadic-binlog-dump-fail binlogscope"></td>
      <td headers="rowsporadic-binlog-dump-fail binlogdynamic">No</td>
    </tr><tr>
      <td colspan="3" headers="rowsporadic-binlog-dump-fail binlognotes">
        <p>
          DESCRIPTION: Option used by mysql-test for debugging and
          testing of replication
        </p>
      </td>
</tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      <a class="xref" href="replication.html#replication-options-binary-log" title="17.1.3.4 Binary Log Options and Variables">Section 17.1.3.4, “Binary Log Options and Variables”</a>, provides more
      detailed information about options and variables relating to
      binary logging. For additional general information about the
      binary log, see <a class="xref" href="server-administration.html#binary-log" title="5.2.4 The Binary Log">Section 5.2.4, “The Binary Log”</a>.
    </p><p>
      For information about the
      <a class="link" href="server-administration.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a> and
      <a class="link" href="server-administration.html#sysvar_sql_log_off"><code class="literal">sql_log_off</code></a> variables, see
      <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4 Server System Variables">Section 5.1.4, “Server System Variables”</a>.
    </p><p>
      For a table showing <span class="emphasis"><em>all</em></span> command-line options,
      system and status variables used with <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>,
      see <a class="xref" href="server-administration.html#mysqld-option-tables" title="5.1.1 Server Option and Variable Reference">Section 5.1.1, “Server Option and Variable Reference”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-options-master"></a>17.1.3.2 Replication Master Options and Variables</h4>

</div>

</div>

</div>
<p>
      This section describes the server options and system variables
      that you can use on replication master servers. You can specify
      the options either on the
      <a class="link" href="programs.html#command-line-options" title="4.2.4 Using Options on the Command Line">command line</a> or in an
      <a class="link" href="programs.html#option-files" title="4.2.6 Using Option Files">option file</a>. You can specify
      system variable values using
      <a class="link" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax"><code class="literal">SET</code></a>.
    </p><p>
      On the master and each slave, you must use the
      <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> option to establish a
      unique replication ID. For each server, you should pick a unique
      positive integer in the range from 1 to
      2<sup>32</sup> − 1, and each ID must be
      different from every other ID in use by any other replication
      master or slave. Example: <code class="literal">server-id=3</code>.
    </p><p>
      For options used on the master for controlling binary logging, see
      <a class="xref" href="replication.html#replication-options-binary-log" title="17.1.3.4 Binary Log Options and Variables">Section 17.1.3.4, “Binary Log Options and Variables”</a>.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="replication-sysvars-masters"></a>System Variables Used on Replication Masters</h5>
</div>
</div>
</div>
<p>
        The following system variables are used in controlling
        replication masters:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_auto_increment_increment"></a>
            <a class="indexterm" name="idm140301483075040"></a>

            <a class="indexterm" name="idm140301483073936"></a>

            <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
</p>
<div class="informaltable">
<table summary="Options for auto_increment_increment" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_auto_increment_increment">auto_increment_increment</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global, Session</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">65535</code></td></tr></tbody></table>
</div>
<p>
            <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
            and <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
            are intended for use with master-to-master replication, and
            can be used to control the operation of
            <code class="literal">AUTO_INCREMENT</code> columns. Both variables
            have global and session values, and each can assume an
            integer value between 1 and 65,535 inclusive. Setting the
            value of either of these two variables to 0 causes its value
            to be set to 1 instead. Attempting to set the value of
            either of these two variables to an integer greater than
            65,535 or less than 0 causes its value to be set to 65,535
            instead. Attempting to set the value of
            <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a> or
            <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a> to a
            noninteger value gives rise to an error, and the actual
            value of the variable remains unchanged.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
              is also supported for use with
              <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDB</code></a> tables.
</p>
</div>
<p>
            These two variables affect <code class="literal">AUTO_INCREMENT</code>
            column behavior as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
                controls the interval between successive column values.
                For example:
              </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'auto_inc%';</code></strong>
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| auto_increment_increment | 1     |
| auto_increment_offset    | 1     |
+--------------------------+-------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE autoinc1</code></strong>
    -&gt; <strong class="userinput"><code>(col INT NOT NULL AUTO_INCREMENT PRIMARY KEY);</code></strong>
  Query OK, 0 rows affected (0.04 sec)

mysql&gt; <strong class="userinput"><code>SET @@auto_increment_increment=10;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'auto_inc%';</code></strong>
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| auto_increment_increment | 10    |
| auto_increment_offset    | 1     |
+--------------------------+-------+
2 rows in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO autoinc1 VALUES (NULL), (NULL), (NULL), (NULL);</code></strong>
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT col FROM autoinc1;</code></strong>
+-----+
| col |
+-----+
|   1 |
|  11 |
|  21 |
|  31 |
+-----+
4 rows in set (0.00 sec)
</pre></li><li class="listitem"><p>
                <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
                determines the starting point for the
                <code class="literal">AUTO_INCREMENT</code> column value. Consider
                the following, assuming that these statements are
                executed during the same session as the example given in
                the description for
                <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>:
              </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SET @@auto_increment_offset=5;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'auto_inc%';</code></strong>
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| auto_increment_increment | 10    |
| auto_increment_offset    | 5     |
+--------------------------+-------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE autoinc2</code></strong>
    -&gt; <strong class="userinput"><code>(col INT NOT NULL AUTO_INCREMENT PRIMARY KEY);</code></strong>
Query OK, 0 rows affected (0.06 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO autoinc2 VALUES (NULL), (NULL), (NULL), (NULL);</code></strong>
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT col FROM autoinc2;</code></strong>
+-----+
| col |
+-----+
|   5 |
|  15 |
|  25 |
|  35 |
+-----+
4 rows in set (0.02 sec)
</pre><p>
                If the value of
                <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
                is greater than that of
                <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>,
                the value of
                <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
                is ignored.
</p></li></ul>
</div>
<p>
            Should one or both of these variables be changed and then
            new rows inserted into a table containing an
            <code class="literal">AUTO_INCREMENT</code> column, the results may
            seem counterintuitive because the series of
            <code class="literal">AUTO_INCREMENT</code> values is calculated
            without regard to any values already present in the column,
            and the next value inserted is the least value in the series
            that is greater than the maximum existing value in the
            <code class="literal">AUTO_INCREMENT</code> column. In other words,
            the series is calculated like so:
          </p><p>
            <code class="literal">auto_increment_offset</code> +
            <em class="replaceable"><code>N</code></em> ×
            <code class="literal">auto_increment_increment</code>
          </p><p>
            where <em class="replaceable"><code>N</code></em> is a positive integer
            value in the series [1, 2, 3, ...]. For example:
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'auto_inc%';</code></strong>
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| auto_increment_increment | 10    |
| auto_increment_offset    | 5     |
+--------------------------+-------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT col FROM autoinc1;</code></strong>
+-----+
| col |
+-----+
|   1 |
|  11 |
|  21 |
|  31 |
+-----+
4 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO autoinc1 VALUES (NULL), (NULL), (NULL), (NULL);</code></strong>
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT col FROM autoinc1;</code></strong>
+-----+
| col |
+-----+
|   1 |
|  11 |
|  21 |
|  31 |
|  35 |
|  45 |
|  55 |
|  65 |
+-----+
8 rows in set (0.00 sec)
</pre><p>
            The values shown for
            <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
            and <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
            generate the series 5 + <em class="replaceable"><code>N</code></em> ×
            10, that is, [5, 15, 25, 35, 45, ...]. The greatest value
            present in the <code class="literal">col</code> column prior to the
            <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> is 31, and the next
            available value in the <code class="literal">AUTO_INCREMENT</code>
            series is 35, so the inserted values for
            <code class="literal">col</code> begin at that point and the results
            are as shown for the <a class="link" href="sql-syntax.html#select" title="13.2.9 SELECT Syntax"><code class="literal">SELECT</code></a>
            query.
          </p><p>
            It is not possible to confine the effects of these two
            variables to a single table, and thus they do not take the
            place of the sequences offered by some other database
            management systems; these variables control the behavior of
            all <code class="literal">AUTO_INCREMENT</code> columns in
            <span class="emphasis"><em>all</em></span> tables on the MySQL server. If the
            global value of either variable is set, its effects persist
            until the global value is changed or overridden by setting
            the session value, or until <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> is
            restarted. If the local value is set, the new value affects
            <code class="literal">AUTO_INCREMENT</code> columns for all tables
            into which new rows are inserted by the current user for the
            duration of the session, unless the values are changed
            during that session.
          </p><p>
            The default value of
            <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a> is
            1. See
            <a class="xref" href="replication.html#replication-features-auto-increment" title="17.4.1.1 Replication and AUTO_INCREMENT">Section 17.4.1.1, “Replication and AUTO_INCREMENT”</a>.
          </p></li><li class="listitem"><p><a name="sysvar_auto_increment_offset"></a>
            <a class="indexterm" name="idm140301482986912"></a>

            <a class="indexterm" name="idm140301482985872"></a>

            <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
</p>
<div class="informaltable">
<table summary="Options for auto_increment_offset" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_auto_increment_offset">auto_increment_offset</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global, Session</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">65535</code></td></tr></tbody></table>
</div>
<p>
            This variable has a default value of 1. For particulars, see
            the description for
            <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              <code class="literal">auto_increment_offset</code> is also supported
              for use with <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDB</code></a> tables.
</p>
</div>
</li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-options-slave"></a>17.1.3.3 Replication Slave Options and Variables</h4>

</div>

</div>

</div>
<p>
      <a class="xref" href="replication.html#replication-optvars-slaves" title="Startup Options for Replication Slaves">Startup Options for Replication Slaves</a>
    </p><p>
      <a class="xref" href="replication.html#replication-optvars-slaves-obsolete" title="Obsolete Replication Slave Options">Obsolete Replication Slave Options</a>
    </p><p>
      <a class="xref" href="replication.html#replication-sysvars-slaves" title="System Variables Used on Replication Slaves">System Variables Used on Replication Slaves</a>
    </p><p>
      This section describes the server options and system variables
      that apply to slave replication servers. You can specify the
      options either on the <a class="link" href="programs.html#command-line-options" title="4.2.4 Using Options on the Command Line">command
      line</a> or in an <a class="link" href="programs.html#option-files" title="4.2.6 Using Option Files">option
      file</a>. Many of the options can be set while the server is
      running by using the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
      TO</code></a> statement. You can specify system variable values
      using
      <a class="link" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax"><code class="literal">SET</code></a>.
    </p><p><b>Server ID. </b>
        On the master and each slave, you must use the
        <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">server-id</code></a> option to establish a
        unique replication ID in the range from 1 to
        2<sup>32</sup> − 1. <span class="quote">“<span class="quote">Unique</span>”</span>
        means that each ID must be different from every other ID in use
        by any other replication master or slave. Example
        <code class="filename">my.cnf</code> file:
      </p><pre class="programlisting">
[mysqld]
server-id=3
</pre>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="replication-optvars-slaves"></a>Startup Options for Replication Slaves</h5>
</div>
</div>
</div>
<p>
        The following list describes startup options for controlling
        replication slave servers. Many of these options can be set
        while the server is running by using the
        <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement.
        Others, such as the <code class="option">--replicate-*</code> options, can
        be set only when the slave server starts. Replication-related
        system variables are discussed later in this section.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_abort-slave-event-count"></a>
            

            <a class="indexterm" name="idm140301482936800"></a>

            <a class="indexterm" name="idm140301482935344"></a>

            <a class="link" href="replication.html#option_mysqld_abort-slave-event-count"><code class="option">--abort-slave-event-count</code></a>
</p>
<div class="informaltable">
<table summary="Options for abort-slave-event-count" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--abort-slave-event-count=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr></tbody></table>
</div>
<p>
            When this option is set to some positive integer
            <em class="replaceable"><code>value</code></em> other than 0 (the default)
            it affects replication behavior as follows: After the slave
            SQL thread has started, <em class="replaceable"><code>value</code></em> log
            events are permitted to be executed; after that, the slave
            SQL thread does not receive any more events, just as if the
            network connection from the master were cut. The slave
            thread continues to run, and the output from
            <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> displays
            <code class="literal">Yes</code> in both the
            <code class="literal">Slave_IO_Running</code> and the
            <code class="literal">Slave_SQL_Running</code> columns, but no further
            events are read from the relay log.
          </p><p>
            This option is used internally by the MySQL test suite for
            replication testing and debugging. It is not intended for
            use in a production setting.
          </p></li><li class="listitem"><p><a name="option_mysqld_disconnect-slave-event-count"></a>
            <a class="indexterm" name="idm140301482911984"></a>

            <a class="indexterm" name="idm140301482910480"></a>

            <a class="link" href="replication.html#option_mysqld_disconnect-slave-event-count"><code class="option">--disconnect-slave-event-count</code></a>
</p>
<div class="informaltable">
<table summary="Options for disconnect-slave-event-count" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--disconnect-slave-event-count=#</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr></tbody></table>
</div>
<p>
            This option is used internally by the MySQL test suite for
            replication testing and debugging.
          </p></li><li class="listitem"><p><a name="option_mysqld_log-slave-updates"></a>
            <a class="indexterm" name="idm140301482894736"></a>

            <a class="indexterm" name="idm140301482893280"></a>

            <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a>
</p>
<div class="informaltable">
<table summary="Options for log-slave-updates" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-slave-updates</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_log_slave_updates">log_slave_updates</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr></tbody></table>
</div>
<p>
            Normally, a slave does not log to its own binary log any
            updates that are received from a master server. This option
            tells the slave to log the updates performed by its SQL
            thread to its own binary log. For this option to have any
            effect, the slave must also be started with the
            <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> option to enable
            binary logging. Prior to MySQL 5.5, the server would not
            start when using the
            <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> option
            without also starting the server with the
            <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> option, and would
            fail with an error; in MySQL 5.5, only a
            warning is generated. (Bug #44663)
            <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> is used
            when you want to chain replication servers. For example, you
            might want to set up replication servers using this
            arrangement:
          </p><pre class="programlisting">
A -&gt; B -&gt; C
</pre><p>
            Here, <code class="literal">A</code> serves as the master for the
            slave <code class="literal">B</code>, and <code class="literal">B</code> serves
            as the master for the slave <code class="literal">C</code>. For this
            to work, <code class="literal">B</code> must be both a master
            <span class="emphasis"><em>and</em></span> a slave. You must start both
            <code class="literal">A</code> and <code class="literal">B</code> with
            <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> to enable binary
            logging, and <code class="literal">B</code> with the
            <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> option so
            that updates received from <code class="literal">A</code> are logged
            by <code class="literal">B</code> to its binary log.
          </p></li><li class="listitem"><p><a name="option_mysqld_log-slow-slave-statements"></a>
            <a class="indexterm" name="idm140301482854832"></a>

            <a class="indexterm" name="idm140301482853376"></a>

            <a class="link" href="replication.html#option_mysqld_log-slow-slave-statements"><code class="option">--log-slow-slave-statements</code></a>
</p>
<div class="informaltable">
<table summary="Options for log-slow-slave-statements" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-slow-slave-statements</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr></tbody></table>
</div>
<p>
            When the slow query log is enabled, this option enables
            logging for queries that have taken more than
            <a class="link" href="server-administration.html#sysvar_long_query_time"><code class="literal">long_query_time</code></a> seconds to
            execute on the slave.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm140301482836768"></a>

            <a class="indexterm" name="idm140301482835280"></a>

            <a class="link" href="server-administration.html#option_mysqld_log-warnings"><code class="option">--log-warnings[=<em class="replaceable"><code>level</code></em>]</code></a>
</p>
<div class="informaltable">
<table summary="Options for log-warnings" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-warnings[=#]</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_log_warnings">log_warnings</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global, Session</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            This option causes a server to print more messages to the
            error log about what it is doing. With respect to
            replication, the server generates warnings that it succeeded
            in reconnecting after a network/connection failure, and
            informs you as to how each slave thread started. This option
            is enabled (1) by default; to disable it, use
            <a class="link" href="server-administration.html#option_mysqld_log-warnings"><code class="option">--log-warnings=0</code></a>. If the
            value is greater than 1, aborted connections are written to
            the error log, and access-denied errors for new connection
            attempts are written. See
            <a class="xref" href="error-handling.html#communication-errors" title="B.5.2.11 Communication Errors and Aborted Connections">Section B.5.2.11, “Communication Errors and Aborted Connections”</a>.
          </p><p>
            Note that the effects of this option are not limited to
            replication. It produces warnings across a spectrum of
            server activities.
          </p></li><li class="listitem"><p><a name="option_mysqld_master-info-file"></a>
            <a class="indexterm" name="idm140301482784016"></a>

            <a class="indexterm" name="idm140301482782528"></a>

            <a class="link" href="replication.html#option_mysqld_master-info-file"><code class="option">--master-info-file=<em class="replaceable"><code>file_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for master-info-file" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--master-info-file=file_name</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">master.info</code></td></tr></tbody></table>
</div>
<p>
            The name to use for the file in which the slave records
            information about the master. The default name is
            <code class="filename">master.info</code> in the data directory. For
            information about the format of this file, see
            <a class="xref" href="replication.html#slave-logs-status" title="17.2.2.2 Slave Status Logs">Section 17.2.2.2, “Slave Status Logs”</a>.
          </p></li><li class="listitem"><p><a name="option_mysqld_master-retry-count"></a>
            <a class="indexterm" name="idm140301482765040"></a>

            <a class="indexterm" name="idm140301482763584"></a>

            <a class="link" href="replication.html#option_mysqld_master-retry-count"><code class="option">--master-retry-count=<em class="replaceable"><code>count</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for master-retry-count" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--master-retry-count=#</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">86400</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">86400</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            The number of times that the slave tries to connect to the
            master before giving up. Reconnects are attempted at
            intervals set by the <code class="literal">MASTER_CONNECT_RETRY</code>
            option of the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
            TO</code></a> statement (default 60). Reconnects are
            triggered when data reads by the slave time out according to
            the <a class="link" href="replication.html#option_mysqld_slave-net-timeout"><code class="option">--slave-net-timeout</code></a>
            option. The default value is 86400. A value of 0 means
            <span class="quote">“<span class="quote">infinite</span>”</span>; the slave attempts to connect
            forever.
          </p></li><li class="listitem"><p><a name="option_mysqld_slave-max-allowed-packet"></a>
            <a class="indexterm" name="idm140301482729024"></a>

            <a class="indexterm" name="idm140301482727984"></a>

            <a class="link" href="replication.html#option_mysqld_slave-max-allowed-packet"><code class="option">slave-max-allowed-packet=<em class="replaceable"><code>bytes</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for slave-max-allowed-packet" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td><td colspan="3">5.5.26</td></tr><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave-max-allowed-packet=#</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1073741824</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1024</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">1073741824</code></td></tr></tbody></table>
</div>
<p>
            In MySQL 5.5.26 and later, this option sets the maximum
            packet size in bytes for the slave SQL and I/O threads, so
            that large updates using row-based replication do not cause
            replication to fail because an update exceeded
            <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>. (Bug
            #12400221, Bug #60926)
          </p><p>
            The corresponding server variable
            <a class="link" href="replication.html#sysvar_slave_max_allowed_packet"><code class="literal">slave_max_allowed_packet</code></a>
            always has a value that is a positive integer multiple of
            1024; if you set it to some value that is not such a
            multiple, the value is automatically rounded down to the
            next highest multiple of 1024. (For example, if you start
            the server with
            <code class="option">--slave-max-allowed-packet=10000</code>, the value
            used is 9216; setting 0 as the value causes 1024 to be
            used.) A truncation warning is issued in such cases.
          </p><p>
            The maximum (and default) value is 1073741824 (1 GB); the
            minimum is 1024.
          </p></li><li class="listitem"><p><a name="option_mysqld_max-relay-log-size"></a>
            <a class="indexterm" name="idm140301482700848"></a>

            <a class="indexterm" name="idm140301482699392"></a>

            <a class="link" href="replication.html#option_mysqld_max-relay-log-size"><code class="option">--max-relay-log-size=<em class="replaceable"><code>size</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for max_relay_log_size" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--max_relay_log_size=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_max_relay_log_size">max_relay_log_size</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">1073741824</code></td></tr></tbody></table>
</div>
<p>
            The size at which the server rotates relay log files
            automatically. If this value is nonzero, the relay log is
            rotated automatically when its size exceeds this value. If
            this value is zero (the default), the size at which relay
            log rotation occurs is determined by the value of
            <a class="link" href="replication.html#sysvar_max_binlog_size"><code class="literal">max_binlog_size</code></a>. For more
            information, see <a class="xref" href="replication.html#slave-logs-relaylog" title="17.2.2.1 The Slave Relay Log">Section 17.2.2.1, “The Slave Relay Log”</a>.
          </p></li><li class="listitem"><p><a name="option_mysqld_read-only"></a>
            <a class="indexterm" name="idm140301482669152"></a>

            <a class="indexterm" name="idm140301482667696"></a>

            <a class="link" href="replication.html#option_mysqld_read-only"><code class="option">--read-only</code></a>
</p>
<div class="informaltable">
<table summary="Options for read_only" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--read-only</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_read_only">read_only</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">false</code></td></tr></tbody></table>
</div>
<p>
            Cause the slave to permit no updates except from slave
            threads or from users having the
            <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege. On a slave
            server, this can be useful to ensure that the slave accepts
            updates only from its master server and not from clients.
            This variable does not apply to <code class="literal">TEMPORARY</code>
            tables.
          </p></li><li class="listitem"><p><a name="option_mysqld_relay-log"></a>
            <a class="indexterm" name="idm140301482642304"></a>

            <a class="indexterm" name="idm140301482640848"></a>

            <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log=<em class="replaceable"><code>file_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for relay-log" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay-log=file_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_relay_log">relay_log</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr></tbody></table>
</div>
<p>
            The basename for the relay log. The default basename is
            <code class="filename"><em class="replaceable"><code>host_name</code></em>-relay-bin</code>.
            The server writes the file in the data directory unless the
            basename is given with a leading absolute path name to
            specify a different directory. The server creates relay log
            files in sequence by adding a numeric suffix to the
            basename.
          </p><p>
            Due to the manner in which MySQL parses server options, if
            you specify this option, you must supply a value;
            <span class="emphasis"><em>the default basename is used only if the option is
            not actually specified</em></span>. If you use the
            <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> option without
            specifying a value, unexpected behavior is likely to result;
            this behavior depends on the other options used, the order
            in which they are specified, and whether they are specified
            on the command line or in an option file. For more
            information about how MySQL handles server options, see
            <a class="xref" href="programs.html#program-options" title="4.2.3 Specifying Program Options">Section 4.2.3, “Specifying Program Options”</a>.
          </p><p>
            If you specify this option, the value specified is also used
            as the basename for the relay log index file. You can
            override this behavior by specifying a different relay log
            index file basename using the
            <a class="link" href="replication.html#option_mysqld_relay-log-index"><code class="option">--relay-log-index</code></a> option.
          </p><p>
            Starting with MySQL 5.5.20, when the server reads an entry
            from the index file, it checks whether the entry contains a
            relative path. If it does, the relative part of the path in
            replaced with the absolute path set using the
            <code class="option">--relay-log</code> option. An absolute path
            remains unchanged; in such a case, the index must be edited
            manually to enable the new path or paths to be used. Prior
            to MySQL 5.5.20, manual intervention was required whenever
            relocating the binary log or relay log files. (Bug
            #11745230, Bug #12133)
          </p><p>
            You may find the <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a>
            option useful in performing the following tasks:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Creating relay logs whose names are independent of host
                names.
              </p></li><li class="listitem"><p>
                If you need to put the relay logs in some area other
                than the data directory because your relay logs tend to
                be very large and you do not want to decrease
                <a class="link" href="server-administration.html#sysvar_max_relay_log_size"><code class="literal">max_relay_log_size</code></a>.
              </p></li><li class="listitem"><p>
                To increase speed by using load-balancing between disks.
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="option_mysqld_relay-log-index"></a>
            <a class="indexterm" name="idm140301482606320"></a>

            <a class="indexterm" name="idm140301482604832"></a>

            <a class="link" href="replication.html#option_mysqld_relay-log-index"><code class="option">--relay-log-index=<em class="replaceable"><code>file_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for relay-log-index" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay-log-index=file_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_relay_log_index">relay_log_index</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr></tbody></table>
</div>
<p>
            The name to use for the relay log index file. The default
            name is
            <code class="filename"><em class="replaceable"><code>host_name</code></em>-relay-bin.index</code>
            in the data directory, where
            <em class="replaceable"><code>host_name</code></em> is the name of the
            slave server.
          </p><p>
            Due to the manner in which MySQL parses server options, if
            you specify this option, you must supply a value;
            <span class="emphasis"><em>the default basename is used only if the option is
            not actually specified</em></span>. If you use the
            <a class="link" href="replication.html#option_mysqld_relay-log-index"><code class="option">--relay-log-index</code></a> option
            without specifying a value, unexpected behavior is likely to
            result; this behavior depends on the other options used, the
            order in which they are specified, and whether they are
            specified on the command line or in an option file. For more
            information about how MySQL handles server options, see
            <a class="xref" href="programs.html#program-options" title="4.2.3 Specifying Program Options">Section 4.2.3, “Specifying Program Options”</a>.
          </p><p>
            If you specify this option, the value specified is also used
            as the basename for the relay logs. You can override this
            behavior by specifying a different relay log file basename
            using the <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> option.
          </p></li><li class="listitem"><p><a name="option_mysqld_relay-log-info-file"></a>
            <a class="indexterm" name="idm140301482577360"></a>

            <a class="indexterm" name="idm140301482575904"></a>

            <a class="link" href="replication.html#option_mysqld_relay-log-info-file"><code class="option">--relay-log-info-file=<em class="replaceable"><code>file_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for relay-log-info-file" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay-log-info-file=file_name</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">relay-log.info</code></td></tr></tbody></table>
</div>
<p>
            The name to use for the file in which the slave records
            information about the relay logs. The default name is
            <code class="filename">relay-log.info</code> in the data directory.
            For information about the format of this file, see
            <a class="xref" href="replication.html#slave-logs-status" title="17.2.2.2 Slave Status Logs">Section 17.2.2.2, “Slave Status Logs”</a>.
          </p></li><li class="listitem"><p><a name="option_mysqld_relay-log-purge"></a>
            <a class="indexterm" name="idm140301482558240"></a>

            <a class="indexterm" name="idm140301482556752"></a>

            <a class="link" href="replication.html#option_mysqld_relay-log-purge"><code class="option">--relay-log-purge={0|1}</code></a>
</p>
<div class="informaltable">
<table summary="Options for relay_log_purge" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay_log_purge</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_relay_log_purge">relay_log_purge</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">TRUE</code></td></tr></tbody></table>
</div>
<p>
            Disable or enable automatic purging of relay logs as soon as
            they are no longer needed. The default value is 1 (enabled).
            This is a global variable that can be changed dynamically
            with <code class="literal">SET GLOBAL relay_log_purge =
            <em class="replaceable"><code>N</code></em></code>.
          </p></li><li class="listitem"><p><a name="option_mysqld_relay-log-recovery"></a>
            <a class="indexterm" name="idm140301482532288"></a>

            <a class="indexterm" name="idm140301482530832"></a>

            <a class="link" href="replication.html#option_mysqld_relay-log-recovery"><code class="option">--relay-log-recovery={0|1}</code></a>
</p>
<div class="informaltable">
<table summary="Options for relay-log-recovery" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay-log-recovery</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            Enables automatic relay log recovery immediately following
            server startup, which means that the replication slave
            discards all unprocessed relay logs and retrieves them from
            the replication master. This should be used following a
            crash on the replication slave to ensure that no possibly
            corrupted relay logs are processed. The default value is 0
            (disabled).
          </p></li><li class="listitem"><p><a name="option_mysqld_relay-log-space-limit"></a>
            <a class="indexterm" name="idm140301482514624"></a>

            <a class="indexterm" name="idm140301482513168"></a>

            <a class="link" href="replication.html#option_mysqld_relay-log-space-limit"><code class="option">--relay-log-space-limit=<em class="replaceable"><code>size</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for relay_log_space_limit" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay_log_space_limit=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_relay_log_space_limit">relay_log_space_limit</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            This option places an upper limit on the total size in bytes
            of all relay logs on the slave. A value of 0 means <span class="quote">“<span class="quote">no
            limit.</span>”</span> This is useful for a slave server host that
            has limited disk space. When the limit is reached, the I/O
            thread stops reading binary log events from the master
            server until the SQL thread has caught up and deleted some
            unused relay logs. Note that this limit is not absolute:
            There are cases where the SQL thread needs more events
            before it can delete relay logs. In that case, the I/O
            thread exceeds the limit until it becomes possible for the
            SQL thread to delete some relay logs because not doing so
            would cause a deadlock. You should not set
            <a class="link" href="replication.html#option_mysqld_relay-log-space-limit"><code class="option">--relay-log-space-limit</code></a> to
            less than twice the value of
            <a class="link" href="replication.html#option_mysqld_max-relay-log-size"><code class="option">--max-relay-log-size</code></a> (or
            <a class="link" href="replication.html#sysvar_max_binlog_size"><code class="option">--max-binlog-size</code></a> if
            <a class="link" href="replication.html#option_mysqld_max-relay-log-size"><code class="option">--max-relay-log-size</code></a> is 0).
            In that case, there is a chance that the I/O thread waits
            for free space because
            <a class="link" href="replication.html#option_mysqld_relay-log-space-limit"><code class="option">--relay-log-space-limit</code></a> is
            exceeded, but the SQL thread has no relay log to purge and
            is unable to satisfy the I/O thread. This forces the I/O
            thread to ignore
            <a class="link" href="replication.html#option_mysqld_relay-log-space-limit"><code class="option">--relay-log-space-limit</code></a>
            temporarily.
          </p></li><li class="listitem"><p><a name="option_mysqld_replicate-do-db"></a>
            <a class="indexterm" name="idm140301482457152"></a>

            <a class="indexterm" name="idm140301482455664"></a>

            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=<em class="replaceable"><code>db_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for replicate-do-db" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--replicate-do-db=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            The effects of this option depend on whether statement-based
            or row-based replication is in use.
          </p><p><b>Statement-based replication. </b>
              Tell the slave SQL thread to restrict replication to
              statements where the default database (that is, the one
              selected by <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a>) is
              <em class="replaceable"><code>db_name</code></em>. To specify more than
              one database, use this option multiple times, once for
              each database; however, doing so does
              <span class="emphasis"><em>not</em></span> replicate cross-database
              statements such as <code class="literal">UPDATE
              <em class="replaceable"><code>some_db.some_table</code></em> SET
              foo='bar'</code> while a different database (or no
              database) is selected.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
              To specify multiple databases you
              <span class="emphasis"><em>must</em></span> use multiple instances of this
              option. Because database names can contain commas, if you
              supply a comma separated list then the list will be
              treated as the name of a single database.
</p>
</div>
<p>
            An example of what does not work as you might expect when
            using statement-based replication: If the slave is started
            with <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=sales</code></a>
            and you issue the following statements on the master, the
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement is
            <span class="emphasis"><em>not</em></span> replicated:
          </p><pre class="programlisting">
USE prices;
UPDATE sales.january SET amount=amount+1000;
</pre><p>
            The main reason for this <span class="quote">“<span class="quote">check just the default
            database</span>”</span> behavior is that it is difficult from the
            statement alone to know whether it should be replicated (for
            example, if you are using multiple-table
            <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statements or
            multiple-table <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>
            statements that act across multiple databases). It is also
            faster to check only the default database rather than all
            databases if there is no need.
          </p><p><b>Row-based replication. </b>
              Tells the slave SQL thread to restrict replication to
              database <em class="replaceable"><code>db_name</code></em>. Only tables
              belonging to <em class="replaceable"><code>db_name</code></em> are
              changed; the current database has no effect on this.
              Suppose that the slave is started with
              <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=sales</code></a> and
              row-based replication is in effect, and then the following
              statements are run on the master:
            </p><pre class="programlisting">
USE prices;
UPDATE sales.february SET amount=amount+100;
</pre><p>
            The <code class="literal">february</code> table in the
            <code class="literal">sales</code> database on the slave is changed in
            accordance with the <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>
            statement; this occurs whether or not the
            <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a> statement was issued.
            However, issuing the following statements on the master has
            no effect on the slave when using row-based replication and
            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=sales</code></a>:
          </p><pre class="programlisting">
USE prices;
UPDATE prices.march SET amount=amount-25;
</pre><p>
            Even if the statement <code class="literal">USE prices</code> were
            changed to <code class="literal">USE sales</code>, the
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement's
            effects would still not be replicated.
          </p><p>
            Another important difference in how
            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> is handled
            in statement-based replication as opposed to row-based
            replication occurs with regard to statements that refer to
            multiple databases. Suppose that the slave is started with
            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=db1</code></a>, and
            the following statements are executed on the master:
          </p><pre class="programlisting">
USE db1;
UPDATE db1.table1 SET col1 = 10, db2.table2 SET col2 = 20;
</pre><p>
            If you are using statement-based replication, then both
            tables are updated on the slave. However, when using
            row-based replication, only <code class="literal">table1</code> is
            affected on the slave; since <code class="literal">table2</code> is in
            a different database, <code class="literal">table2</code> on the slave
            is not changed by the <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>.
            Now suppose that, instead of the <code class="literal">USE db1</code>
            statement, a <code class="literal">USE db4</code> statement had been
            used:
          </p><pre class="programlisting">
USE db4;
UPDATE db1.table1 SET col1 = 10, db2.table2 SET col2 = 20;
</pre><p>
            In this case, the <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>
            statement would have no effect on the slave when using
            statement-based replication. However, if you are using
            row-based replication, the
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> would change
            <code class="literal">table1</code> on the slave, but not
            <code class="literal">table2</code>—in other words, only tables
            in the database named by
            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> are
            changed, and the choice of default database has no effect on
            this behavior.
          </p><p>
            If you need cross-database updates to work, use
            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table=<em class="replaceable"><code>db_name</code></em>.%</code></a>
            instead. See <a class="xref" href="replication.html#replication-rules" title="17.2.3 How Servers Evaluate Replication Filtering Rules">Section 17.2.3, “How Servers Evaluate Replication Filtering Rules”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              This option affects replication in the same manner that
              <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> affects
              binary logging, and the effects of the replication format
              on how <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>
              affects replication behavior are the same as those of the
              logging format on the behavior of
              <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a>.
            </p><p>
              This option has no effect on
              <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">BEGIN</code></a>,
              <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">COMMIT</code></a>, or
              <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
              statements.
</p>
</div>
</li><li class="listitem"><p><a name="option_mysqld_replicate-ignore-db"></a>
            <a class="indexterm" name="idm140301482387808"></a>

            <a class="indexterm" name="idm140301482386352"></a>

            <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db=<em class="replaceable"><code>db_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for replicate-ignore-db" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--replicate-ignore-db=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            As with <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>,
            the effects of this option depend on whether statement-based
            or row-based replication is in use.
          </p><p><b>Statement-based replication. </b>
              Tells the slave SQL thread not to replicate any statement
              where the default database (that is, the one selected by
              <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a>) is
              <em class="replaceable"><code>db_name</code></em>.
            </p><p><b>Row-based replication. </b>
              Tells the slave SQL thread not to update any tables in the
              database <em class="replaceable"><code>db_name</code></em>. The default
              database has no effect.
            </p><p>
            When using statement-based replication, the following
            example does not work as you might expect. Suppose that the
            slave is started with
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db=sales</code></a>
            and you issue the following statements on the master:
          </p><pre class="programlisting">
USE prices;
UPDATE sales.january SET amount=amount+1000;
</pre><p>
            The <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement
            <span class="emphasis"><em>is</em></span> replicated in such a case because
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a> applies
            only to the default database (determined by the
            <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a> statement). Because the
            <code class="literal">sales</code> database was specified explicitly
            in the statement, the statement has not been filtered.
            However, when using row-based replication, the
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement's
            effects are <span class="emphasis"><em>not</em></span> propagated to the
            slave, and the slave's copy of the
            <code class="literal">sales.january</code> table is unchanged; in this
            instance,
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db=sales</code></a>
            causes <span class="emphasis"><em>all</em></span> changes made to tables in
            the master's copy of the <code class="literal">sales</code>
            database to be ignored by the slave.
          </p><p>
            To specify more than one database to ignore, use this option
            multiple times, once for each database. Because database
            names can contain commas, if you supply a comma separated
            list then the list will be treated as the name of a single
            database.
          </p><p>
            You should not use this option if you are using
            cross-database updates and you do not want these updates to
            be replicated. See <a class="xref" href="replication.html#replication-rules" title="17.2.3 How Servers Evaluate Replication Filtering Rules">Section 17.2.3, “How Servers Evaluate Replication Filtering Rules”</a>.
          </p><p>
            If you need cross-database updates to work, use
            <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table=<em class="replaceable"><code>db_name</code></em>.%</code></a>
            instead. See <a class="xref" href="replication.html#replication-rules" title="17.2.3 How Servers Evaluate Replication Filtering Rules">Section 17.2.3, “How Servers Evaluate Replication Filtering Rules”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              This option affects replication in the same manner that
              <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a> affects
              binary logging, and the effects of the replication format
              on how
              <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a>
              affects replication behavior are the same as those of the
              logging format on the behavior of
              <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a>.
            </p><p>
              This option has no effect on
              <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">BEGIN</code></a>,
              <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">COMMIT</code></a>, or
              <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
              statements.
</p>
</div>
</li><li class="listitem"><p><a name="option_mysqld_replicate-do-table"></a>
            <a class="indexterm" name="idm140301482341536"></a>

            <a class="indexterm" name="idm140301482340080"></a>

            <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table=<em class="replaceable"><code>db_name.tbl_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for replicate-do-table" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--replicate-do-table=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            Tells the slave SQL thread to restrict replication to the
            specified table. To specify more than one table, use this
            option multiple times, once for each table. This works for
            both cross-database updates and default database updates, in
            contrast to
            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>. See
            <a class="xref" href="replication.html#replication-rules" title="17.2.3 How Servers Evaluate Replication Filtering Rules">Section 17.2.3, “How Servers Evaluate Replication Filtering Rules”</a>.
          </p><p>
            This option affects only statements that apply to tables. It
            does not affect statements that apply only to other database
            objects, such as stored routines. To filter statements
            operating on stored routines, use one or more of the
            <code class="option">--replicate-*-db</code> options.
          </p></li><li class="listitem"><p><a name="option_mysqld_replicate-ignore-table"></a>
            <a class="indexterm" name="idm140301482323200"></a>

            <a class="indexterm" name="idm140301482321744"></a>

            <a class="link" href="replication.html#option_mysqld_replicate-ignore-table"><code class="option">--replicate-ignore-table=<em class="replaceable"><code>db_name.tbl_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for replicate-ignore-table" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--replicate-ignore-table=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            Tells the slave SQL thread not to replicate any statement
            that updates the specified table, even if any other tables
            might be updated by the same statement. To specify more than
            one table to ignore, use this option multiple times, once
            for each table. This works for cross-database updates, in
            contrast to
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a>. See
            <a class="xref" href="replication.html#replication-rules" title="17.2.3 How Servers Evaluate Replication Filtering Rules">Section 17.2.3, “How Servers Evaluate Replication Filtering Rules”</a>.
          </p><p>
            This option affects only statements that apply to tables. It
            does not affect statements that apply only to other database
            objects, such as stored routines. To filter statements
            operating on stored routines, use one or more of the
            <code class="option">--replicate-*-db</code> options.
          </p></li><li class="listitem"><p><a name="option_mysqld_replicate-rewrite-db"></a>
            <a class="indexterm" name="idm140301482304848"></a>

            <a class="indexterm" name="idm140301482303392"></a>

            <a class="link" href="replication.html#option_mysqld_replicate-rewrite-db"><code class="option">--replicate-rewrite-db=<em class="replaceable"><code>from_name</code></em>-&gt;<em class="replaceable"><code>to_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for replicate-rewrite-db" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--replicate-rewrite-db=old_name-&gt;new_name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            Tells the slave to translate the default database (that is,
            the one selected by <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a>) to
            <em class="replaceable"><code>to_name</code></em> if it was
            <em class="replaceable"><code>from_name</code></em> on the master. Only
            statements involving tables are affected (not statements
            such as <a class="link" href="sql-syntax.html#create-database" title="13.1.10 CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a>,
            <a class="link" href="sql-syntax.html#drop-database" title="13.1.21 DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a>, and
            <a class="link" href="sql-syntax.html#alter-database" title="13.1.1 ALTER DATABASE Syntax"><code class="literal">ALTER DATABASE</code></a>), and only if
            <em class="replaceable"><code>from_name</code></em> is the default database
            on the master. To specify multiple rewrites, use this option
            multiple times. The server uses the first one with a
            <em class="replaceable"><code>from_name</code></em> value that matches. The
            database name translation is done
            <span class="emphasis"><em>before</em></span> the
            <code class="option">--replicate-*</code> rules are tested.
          </p><p>
            Statements in which table names are qualified with database
            names when using this option do not work with table-level
            replication filtering options such as
            <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a>. Suppose
            we have a database named <code class="literal">a</code> on the master,
            one named <code class="literal">b</code> on the slave, each containing
            a table <code class="literal">t</code>, and have started the master
            with <code class="option">--replicate-rewrite-db='a-&gt;b'</code>. At a
            later point in time, we execute
            <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE FROM
            a.t</code></a>. In this case, no relevant filtering rule
            works, for the reasons shown here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
                <code class="option">--replicate-do-table=a.t</code> does not work
                because the slave has table <code class="literal">t</code> in
                database <code class="literal">b</code>.
              </p></li><li class="listitem"><p>
                <code class="option">--replicate-do-table=b.t</code> does not match
                the original statement and so is ignored.
              </p></li><li class="listitem"><p>
                <code class="option">--replicate-do-table=*.t</code> is handled
                identically to
                <code class="option">--replicate-do-table=a.t</code>, and thus does
                not work, either.
</p></li></ol>
</div>
<p>
            Similarly, the <code class="option">--replication-rewrite-db</code>
            option does not work with cross-database updates.
          </p><p>
            If you use this option on the command line and the
            <span class="quote">“<span class="quote"><code class="literal">&gt;</code></span>”</span> character is special
            to your command interpreter, quote the option value. For
            example:
          </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqld --replicate-rewrite-db="<em class="replaceable"><code>olddb</code></em>-&gt;<em class="replaceable"><code>newdb</code></em>"</code></strong>
</pre></li><li class="listitem"><p><a name="option_mysqld_replicate-same-server-id"></a>
            <a class="indexterm" name="idm140301482264144"></a>

            <a class="indexterm" name="idm140301482262688"></a>

            <a class="link" href="replication.html#option_mysqld_replicate-same-server-id"><code class="option">--replicate-same-server-id</code></a>
</p>
<div class="informaltable">
<table summary="Options for replicate-same-server-id" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--replicate-same-server-id</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            To be used on slave servers. Usually you should use the
            default setting of 0, to prevent infinite loops caused by
            circular replication. If set to 1, the slave does not skip
            events having its own server ID. Normally, this is useful
            only in rare configurations. Cannot be set to 1 if
            <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> is used.
            By default, the slave I/O thread does not write binary log
            events to the relay log if they have the slave's server ID
            (this optimization helps save disk usage). If you want to
            use
            <a class="link" href="replication.html#option_mysqld_replicate-same-server-id"><code class="option">--replicate-same-server-id</code></a>,
            be sure to start the slave with this option before you make
            the slave read its own events that you want the slave SQL
            thread to execute.
          </p></li><li class="listitem"><p><a name="option_mysqld_replicate-wild-do-table"></a>
            <a class="indexterm" name="idm140301482244192"></a>

            <a class="indexterm" name="idm140301482242736"></a>

            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table=<em class="replaceable"><code>db_name.tbl_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for replicate-wild-do-table" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--replicate-wild-do-table=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            Tells the slave thread to restrict replication to statements
            where any of the updated tables match the specified database
            and table name patterns. Patterns can contain the
            <span class="quote">“<span class="quote"><code class="literal">%</code></span>”</span> and
            <span class="quote">“<span class="quote"><code class="literal">_</code></span>”</span> wildcard characters,
            which have the same meaning as for the
            <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> pattern-matching operator.
            To specify more than one table, use this option multiple
            times, once for each table. This works for cross-database
            updates. See <a class="xref" href="replication.html#replication-rules" title="17.2.3 How Servers Evaluate Replication Filtering Rules">Section 17.2.3, “How Servers Evaluate Replication Filtering Rules”</a>.
          </p><p>
            This option applies to tables, views, and triggers. It does
            not apply to stored procedures and functions, or events. To
            filter statements operating on the latter objects, use one
            or more of the <code class="option">--replicate-*-db</code> options.
          </p><p>
            Example:
            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table=foo%.bar%</code></a>
            replicates only updates that use a table where the database
            name starts with <code class="literal">foo</code> and the table name
            starts with <code class="literal">bar</code>.
          </p><p>
            If the table name pattern is <code class="literal">%</code>, it
            matches any table name and the option also applies to
            database-level statements (<a class="link" href="sql-syntax.html#create-database" title="13.1.10 CREATE DATABASE Syntax"><code class="literal">CREATE
            DATABASE</code></a>, <a class="link" href="sql-syntax.html#drop-database" title="13.1.21 DROP DATABASE Syntax"><code class="literal">DROP
            DATABASE</code></a>, and <a class="link" href="sql-syntax.html#alter-database" title="13.1.1 ALTER DATABASE Syntax"><code class="literal">ALTER
            DATABASE</code></a>). For example, if you use
            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table=foo%.%</code></a>,
            database-level statements are replicated if the database
            name matches the pattern <code class="literal">foo%</code>.
          </p><p>
            To include literal wildcard characters in the database or
            table name patterns, escape them with a backslash. For
            example, to replicate all tables of a database that is named
            <code class="literal">my_own%db</code>, but not replicate tables from
            the <code class="literal">my1ownAABCdb</code> database, you should
            escape the <span class="quote">“<span class="quote"><code class="literal">_</code></span>”</span> and
            <span class="quote">“<span class="quote"><code class="literal">%</code></span>”</span> characters like this:
            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table=my\_own\%db</code></a>.
            If you use the option on the command line, you might need to
            double the backslashes or quote the option value, depending
            on your command interpreter. For example, with the
            <span class="command"><strong>bash</strong></span> shell, you would need to type
            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table=my\\_own\\%db</code></a>.
          </p></li><li class="listitem"><p><a name="option_mysqld_replicate-wild-ignore-table"></a>
            <a class="indexterm" name="idm140301482207360"></a>

            <a class="indexterm" name="idm140301482205856"></a>

            <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table=<em class="replaceable"><code>db_name.tbl_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for replicate-wild-ignore-table" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--replicate-wild-ignore-table=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            Tells the slave thread not to replicate a statement where
            any table matches the given wildcard pattern. To specify
            more than one table to ignore, use this option multiple
            times, once for each table. This works for cross-database
            updates. See <a class="xref" href="replication.html#replication-rules" title="17.2.3 How Servers Evaluate Replication Filtering Rules">Section 17.2.3, “How Servers Evaluate Replication Filtering Rules”</a>.
          </p><p>
            Example:
            <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table=foo%.bar%</code></a>
            does not replicate updates that use a table where the
            database name starts with <code class="literal">foo</code> and the
            table name starts with <code class="literal">bar</code>.
          </p><p>
            For information about how matching works, see the
            description of the
            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a>
            option. The rules for including literal wildcard characters
            in the option value are the same as for
            <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table</code></a>
            as well.
          </p></li><li class="listitem"><p><a name="option_mysqld_report-host"></a>
            <a class="indexterm" name="idm140301482185456"></a>

            <a class="indexterm" name="idm140301482184000"></a>

            <a class="link" href="replication.html#option_mysqld_report-host"><code class="option">--report-host=<em class="replaceable"><code>host_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for report-host" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--report-host=host_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_report_host">report_host</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            The host name or IP address of the slave to be reported to
            the master during slave registration. This value appears in
            the output of <a class="link" href="sql-syntax.html#show-slave-hosts" title="13.7.5.34 SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE
            HOSTS</code></a> on the master server. Leave the value unset
            if you do not want the slave to register itself with the
            master. Note that it is not sufficient for the master to
            simply read the IP address of the slave from the TCP/IP
            socket after the slave connects. Due to NAT and other
            routing issues, that IP may not be valid for connecting to
            the slave from the master or other hosts.
          </p></li><li class="listitem"><p><a name="option_mysqld_report-password"></a>
            <a class="indexterm" name="idm140301482160976"></a>

            <a class="indexterm" name="idm140301482159488"></a>

            <a class="link" href="replication.html#option_mysqld_report-password"><code class="option">--report-password=<em class="replaceable"><code>password</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for report-password" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--report-password=name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_report_password">report_password</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            The account password of the slave to be reported to the
            master during slave registration. This value appears in the
            output of <a class="link" href="sql-syntax.html#show-slave-hosts" title="13.7.5.34 SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a> on
            the master server if the
            <a class="link" href="replication.html#option_mysqld_show-slave-auth-info"><code class="option">--show-slave-auth-info</code></a> option
            is given.
          </p><p>
            Although the name of this option might imply otherwise,
            <code class="option">--report-password</code> is not connected to the
            MySQL user privilege system and so is not necessarily (or
            even likely to be) the same as the password for the MySQL
            replication user account.
          </p></li><li class="listitem"><p><a name="option_mysqld_report-port"></a>
            <a class="indexterm" name="idm140301482134848"></a>

            <a class="indexterm" name="idm140301482133360"></a>

            <a class="link" href="replication.html#option_mysqld_report-port"><code class="option">--report-port=<em class="replaceable"><code>slave_port_num</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for report-port" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--report-port=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_report_port">report_port</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (&lt;= 5.5.22)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">3306</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">65535</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (&gt;= 5.5.23)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">65535</code></td></tr></tbody></table>
</div>
<p>
            The TCP/IP port number for connecting to the slave, to be
            reported to the master during slave registration. Set this
            only if the slave is listening on a nondefault port or if
            you have a special tunnel from the master or other clients
            to the slave. If you are not sure, do not use this option.
          </p><p>
            Prior to MySQL 5.5.23, the default value for this option was
            3306. In MySQL 5.5.23 and later, the value shown is the port
            number actually used by the slave (Bug #13333431). This
            change also affects the default value displayed by
            <a class="link" href="sql-syntax.html#show-slave-hosts" title="13.7.5.34 SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a>.
          </p></li><li class="listitem"><p><a name="option_mysqld_report-user"></a>
            <a class="indexterm" name="idm140301482093024"></a>

            <a class="indexterm" name="idm140301482091536"></a>

            <a class="link" href="replication.html#option_mysqld_report-user"><code class="option">--report-user=<em class="replaceable"><code>user_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for report-user" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--report-user=name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_report_user">report_user</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            The account user name of the slave to be reported to the
            master during slave registration. This value appears in the
            output of <a class="link" href="sql-syntax.html#show-slave-hosts" title="13.7.5.34 SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a> on
            the master server if the
            <a class="link" href="replication.html#option_mysqld_show-slave-auth-info"><code class="option">--show-slave-auth-info</code></a> option
            is given.
          </p><p>
            Although the name of this option might imply otherwise,
            <code class="option">--report-user</code> is not connected to the MySQL
            user privilege system and so is not necessarily (or even
            likely to be) the same as the name of the MySQL replication
            user account.
          </p></li><li class="listitem"><p><a name="option_mysqld_show-slave-auth-info"></a>
            <a class="indexterm" name="idm140301482066912"></a>

            <a class="indexterm" name="idm140301482065456"></a>

            <a class="link" href="replication.html#option_mysqld_show-slave-auth-info"><code class="option">--show-slave-auth-info</code></a>
</p>
<div class="informaltable">
<table summary="Options for show-slave-auth-info" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--show-slave-auth-info</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            Display slave user names and passwords in the output of
            <a class="link" href="sql-syntax.html#show-slave-hosts" title="13.7.5.34 SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a> on the
            master server for slaves started with the
            <a class="link" href="replication.html#option_mysqld_report-user"><code class="option">--report-user</code></a> and
            <a class="link" href="replication.html#option_mysqld_report-password"><code class="option">--report-password</code></a> options.
          </p></li><li class="listitem"><p><a name="option_mysqld_skip-slave-start"></a>
            <a class="indexterm" name="idm140301482046400"></a>

            <a class="indexterm" name="idm140301482044912"></a>

            <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a>
</p>
<div class="informaltable">
<table summary="Options for skip-slave-start" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--skip-slave-start</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            Tells the slave server not to start the slave threads when
            the server starts. To start the threads later, use a
            <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statement.
          </p></li><li class="listitem"><p><a name="option_mysqld_slave_compressed_protocol"></a>
            <a class="indexterm" name="idm140301482027856"></a>

            <a class="indexterm" name="idm140301482026400"></a>

            <a class="link" href="replication.html#sysvar_slave_compressed_protocol"><code class="option">--slave_compressed_protocol={0|1}</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave_compressed_protocol" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave_compressed_protocol</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_compressed_protocol">slave_compressed_protocol</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr></tbody></table>
</div>
<p>
            If this option is set to 1, use compression for the
            slave/master protocol if both the slave and the master
            support it. The default is 0 (no compression).
          </p></li><li class="listitem"><p><a name="option_mysqld_slave-load-tmpdir"></a>
            <a class="indexterm" name="idm140301482002992"></a>

            <a class="indexterm" name="idm140301482001536"></a>

            <a class="link" href="replication.html#option_mysqld_slave-load-tmpdir"><code class="option">--slave-load-tmpdir=<em class="replaceable"><code>file_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for slave-load-tmpdir" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave-load-tmpdir=path</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_load_tmpdir">slave_load_tmpdir</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">directory name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">/tmp</code></td></tr></tbody></table>
</div>
<p>
            The name of the directory where the slave creates temporary
            files. This option is by default equal to the value of the
            <a class="link" href="server-administration.html#sysvar_tmpdir"><code class="literal">tmpdir</code></a> system variable.
            When the slave SQL thread replicates a
            <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
            INFILE</code></a> statement, it extracts the file to be
            loaded from the relay log into temporary files, and then
            loads these into the table. If the file loaded on the master
            is huge, the temporary files on the slave are huge, too.
            Therefore, it might be advisable to use this option to tell
            the slave to put temporary files in a directory located in
            some file system that has a lot of available space. In that
            case, the relay logs are huge as well, so you might also
            want to use the <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a>
            option to place the relay logs in that file system.
          </p><p>
            The directory specified by this option should be located in
            a disk-based file system (not a memory-based file system)
            because the temporary files used to replicate
            <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
            INFILE</code></a> must survive machine restarts. The
            directory also should not be one that is cleared by the
            operating system during the system startup process.
          </p></li><li class="listitem"><p><a name="option_mysqld_slave-net-timeout"></a>
            <a class="indexterm" name="idm140301481971760"></a>

            <a class="indexterm" name="idm140301481970304"></a>

            <a class="link" href="replication.html#option_mysqld_slave-net-timeout"><code class="option">--slave-net-timeout=<em class="replaceable"><code>seconds</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for slave-net-timeout" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave-net-timeout=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_net_timeout">slave_net_timeout</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">3600</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr></tbody></table>
</div>
<p>
            The number of seconds to wait for more data from the master
            before the slave considers the connection broken, aborts the
            read, and tries to reconnect. The first retry occurs
            immediately after the timeout. The interval between retries
            is controlled by the <code class="literal">MASTER_CONNECT_RETRY</code>
            option for the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
            TO</code></a> statement, and the number of reconnection
            attempts is limited by the
            <a class="link" href="replication.html#option_mysqld_master-retry-count"><code class="option">--master-retry-count</code></a> option.
            The default is 3600 seconds (one hour).
          </p></li><li class="listitem"><p><a name="option_mysqld_slave-skip-errors"></a>
            <a class="indexterm" name="idm140301481941200"></a>

            <a class="indexterm" name="idm140301481939744"></a>

            <a class="link" href="replication.html#option_mysqld_slave-skip-errors"><code class="option">--slave-skip-errors=[<em class="replaceable"><code>err_code1</code></em>,<em class="replaceable"><code>err_code2</code></em>,...|all]</code></a>
          </p><p>
            (<span class="emphasis"><em>MySQL Cluster NDB 7.2.6 and later:)</em></span>
            <a class="link" href="replication.html#option_mysqld_slave-skip-errors"><code class="option">--slave-skip-errors=[<em class="replaceable"><code>err_code1</code></em>,<em class="replaceable"><code>err_code2</code></em>,...|all|ddl_exist_errors]</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave-skip-errors" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave-skip-errors=name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_skip_errors">slave_skip_errors</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="5"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" rowspan="3" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">[list of error codes]</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">all</code></td></tr><tr><td scope="row" rowspan="6"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" rowspan="4" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">[list of error codes]</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">all</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">ddl_exist_errors</code></td></tr><tr><td scope="row" rowspan="6"><span class="bold"><strong>Permitted Values</strong></span> (&gt;= 5.5.22-ndb-7.2.6)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" rowspan="4" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">[list of error codes]</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">all</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">ddl_exist_errors</code></td></tr></tbody></table>
</div>
<p>
            Normally, replication stops when an error occurs on the
            slave. This gives you the opportunity to resolve the
            inconsistency in the data manually. This option tells the
            slave SQL thread to continue replication when a statement
            returns any of the errors listed in the option value.
          </p><p>
            Do not use this option unless you fully understand why you
            are getting errors. If there are no bugs in your replication
            setup and client programs, and no bugs in MySQL itself, an
            error that stops replication should never occur.
            Indiscriminate use of this option results in slaves becoming
            hopelessly out of synchrony with the master, with you having
            no idea why this has occurred.
          </p><p>
            For error codes, you should use the numbers provided by the
            error message in your slave error log and in the output of
            <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>.
            <a class="xref" href="error-handling.html" title="Appendix B Errors, Error Codes, and Common Problems">Appendix B, <i>Errors, Error Codes, and Common Problems</i></a>, lists server error codes.
          </p><p>
            You can also (but should not) use the very nonrecommended
            value of <code class="literal">all</code> to cause the slave to ignore
            all error messages and keeps going regardless of what
            happens. Needless to say, if you use <code class="literal">all</code>,
            there are no guarantees regarding the integrity of your
            data. Please do not complain (or file bug reports) in this
            case if the slave's data is not anywhere close to what it is
            on the master. <span class="emphasis"><em>You have been warned</em></span>.
          </p><p>
            MySQL Cluster NDB 7.2.6 and later support an additional
            shorthand value <code class="literal">ddl_exist_errors</code> for use
            with the enhanced failover mechanism which is implemented
            beginning with that version of MySQL Cluster. This value is
            equivalent to the error code list
            <code class="literal">1007,1008,1050,1051,1054,1060,1061,1068,1094,1146</code>.
            <span class="emphasis"><em>This value is not supported by the
            <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> binary included with the MySQL
            Server 5.5 distribution</em></span>. (Bug #11762277, Bug
            #54854) For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="18.6.8 Implementing Failover with MySQL Cluster Replication">Section 18.6.8, “Implementing Failover with MySQL Cluster Replication”</a>.
          </p><p>
            Examples:
          </p><pre class="programlisting">
--slave-skip-errors=1062,1053
--slave-skip-errors=all
--slave-skip-errors=ddl_exist_errors
</pre></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="replication-optvars-slaves-obsolete"></a>Obsolete Replication Slave Options</h5>

</div>

</div>

</div>
<p>
        <span class="emphasis"><em>The following options are removed in MySQL
        5.5. If you attempt to start
        <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> with any of these options in MySQL
        5.5, the server aborts with an <span class="errortext">unknown
        variable</span> error</em></span>. To set the replication
        parameters formerly associated with these options, you must use
        the <code class="literal">CHANGE MASTER TO ...</code> statement (see
        <a class="xref" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax">Section 13.4.2.1, “CHANGE MASTER TO Syntax”</a>).
      </p><p>
        The options affected are shown in this list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_master-host"></a>
            <code class="option">--master-host</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-user"></a>
            <code class="option">--master-user</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-password"></a>
            <code class="option">--master-password</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-port"></a>
            <code class="option">--master-port</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-connect-retry"></a>
            <code class="option">--master-connect-retry</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-ssl"></a>
            <code class="option">--master-ssl</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-ssl-ca"></a>
            <code class="option">--master-ssl-ca</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-ssl-capath"></a>
            <code class="option">--master-ssl-capath</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-ssl-cert"></a>
            <code class="option">--master-ssl-cert</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-ssl-cipher"></a>
            <code class="option">--master-ssl-cipher</code>
          </p></li><li class="listitem"><p><a name="option_mysqld_master-ssl-key"></a>
            <code class="option">--master-ssl-key</code>
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="replication-sysvars-slaves"></a>System Variables Used on Replication Slaves</h5>

</div>

</div>

</div>
<p>
        The following list describes system variables for controlling
        replication slave servers. They can be set at server startup and
        some of them can be changed at runtime using
        <a class="link" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax"><code class="literal">SET</code></a>.
        Server options used with replication slaves are listed earlier
        in this section.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_init_slave"></a>
            <a class="indexterm" name="idm140301481841392"></a>

            <a class="indexterm" name="idm140301481840336"></a>

            <a class="link" href="replication.html#sysvar_init_slave"><code class="literal">init_slave</code></a>
</p>
<div class="informaltable">
<table summary="Options for init_slave" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--init-slave=name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_init_slave">init_slave</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            This variable is similar to
            <a class="link" href="server-administration.html#sysvar_init_connect"><code class="literal">init_connect</code></a>, but is a
            string to be executed by a slave server each time the SQL
            thread starts. The format of the string is the same as for
            the <a class="link" href="server-administration.html#sysvar_init_connect"><code class="literal">init_connect</code></a> variable.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              The SQL thread sends an acknowledgment to the client
              before it executes
              <a class="link" href="replication.html#sysvar_init_slave"><code class="literal">init_slave</code></a>. Therefore, it
              is not guaranteed that
              <a class="link" href="replication.html#sysvar_init_slave"><code class="literal">init_slave</code></a> has been
              executed when <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START SLAVE</code></a>
              returns. See <a class="xref" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax">Section 13.4.2.5, “START SLAVE Syntax”</a>, for more
              information.
</p>
</div>
</li><li class="listitem"><p><a name="sysvar_relay_log"></a>
            <a class="indexterm" name="idm140301481811280"></a>

            <a class="indexterm" name="idm140301481810224"></a>

            <a class="link" href="replication.html#sysvar_relay_log"><code class="literal">relay_log</code></a>
</p>
<div class="informaltable">
<table summary="Options for relay-log" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay-log=file_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_relay_log">relay_log</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr></tbody></table>
</div>
<p>
            The name of the relay log file.
          </p></li><li class="listitem"><p><a name="sysvar_relay_log_index"></a>
            <a class="indexterm" name="idm140301481789104"></a>

            <a class="indexterm" name="idm140301481788048"></a>

            <a class="link" href="replication.html#sysvar_relay_log_index"><code class="literal">relay_log_index</code></a>
</p>
<div class="informaltable">
<table summary="Options for relay_log_index" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay-log-index</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_relay_log_index">relay_log_index</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">*host_name*-relay-bin.index</code></td></tr></tbody></table>
</div>
<p>
            The name of the relay log index file. The default name is
            <code class="filename"><em class="replaceable"><code>host_name</code></em>-relay-bin.index</code>
            in the data directory, where
            <em class="replaceable"><code>host_name</code></em> is the name of the
            slave server.
          </p></li><li class="listitem"><p><a name="sysvar_relay_log_info_file"></a>
            <a class="indexterm" name="idm140301481763040"></a>

            <a class="indexterm" name="idm140301481762000"></a>

            <a class="link" href="replication.html#sysvar_relay_log_info_file"><code class="literal">relay_log_info_file</code></a>
</p>
<div class="informaltable">
<table summary="Options for relay_log_info_file" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay-log-info-file=file_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_relay_log_info_file">relay_log_info_file</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">relay-log.info</code></td></tr></tbody></table>
</div>
<p>
            The name of the file in which the slave records information
            about the relay logs. The default name is
            <code class="filename">relay-log.info</code> in the data directory.
          </p></li><li class="listitem"><p><a name="sysvar_relay_log_recovery"></a>
            <a class="indexterm" name="idm140301481737664"></a>

            <a class="indexterm" name="idm140301481736176"></a>

            <a class="link" href="replication.html#sysvar_relay_log_recovery"><code class="literal">relay_log_recovery</code></a>
</p>
<div class="informaltable">
<table summary="Options for relay_log_recovery" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--relay-log-recovery</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_relay_log_recovery">relay_log_recovery</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            Enables automatic relay log recovery immediately following
            server startup, which means that the replication slave
            discards all unprocessed relay logs and retrieves them from
            the replication master. This should be used following a
            crash on the replication slave to ensure that no possibly
            corrupted relay logs are processed. The default value is 0
            (disabled). This global variable can be changed dynamically,
            or by starting the slave with the
            <a class="link" href="replication.html#option_mysqld_relay-log-recovery"><code class="option">--relay-log-recovery</code></a> option.
          </p></li><li class="listitem"><p><a name="sysvar_rpl_recovery_rank"></a>
            <a class="link" href="replication.html#sysvar_rpl_recovery_rank"><code class="literal">rpl_recovery_rank</code></a>
          </p><p>
            This variable is unused, and is removed in MySQL 5.6.
          </p></li><li class="listitem"><p><a name="sysvar_slave_compressed_protocol"></a>
            <a class="indexterm" name="idm140301481708704"></a>

            <a class="indexterm" name="idm140301481707600"></a>

            <a class="link" href="replication.html#sysvar_slave_compressed_protocol"><code class="literal">slave_compressed_protocol</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave_compressed_protocol" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave_compressed_protocol</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_compressed_protocol">slave_compressed_protocol</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr></tbody></table>
</div>
<p>
            Whether to use compression of the slave/master protocol if
            both the slave and the master support it.
          </p></li><li class="listitem"><p><a name="sysvar_slave_exec_mode"></a>
            <a class="indexterm" name="idm140301481684144"></a>

            <a class="indexterm" name="idm140301481683088"></a>

            <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave_exec_mode" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave-exec-mode=mode</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_exec_mode">slave_exec_mode</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="5"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">enumeration</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">STRICT</code> (ALL)</td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">IDEMPOTENT</code> (NDB)</td></tr><tr><td scope="row" rowspan="2" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">IDEMPOTENT</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">STRICT</code></td></tr></tbody></table>
</div>
<p>
            Controls whether <code class="literal">IDEMPOTENT</code> or
            <code class="literal">STRICT</code> mode is used in replication
            conflict resolution and error checking.
            <code class="literal">IDEMPOTENT</code> mode causes suppression of
            duplicate-key and no-key-found errors.
          </p><p>
            This mode is needed for multi-master replication, circular
            replication, and some other special replication scenarios
            for MySQL Cluster Replication. (See
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-multi-master" title="18.6.10 MySQL Cluster Replication: Multi-Master and Circular Replication">Section 18.6.10, “MySQL Cluster Replication: Multi-Master and Circular Replication”</a>,
            and
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="18.6.11 MySQL Cluster Replication Conflict Resolution">Section 18.6.11, “MySQL Cluster Replication Conflict Resolution”</a>,
            for more information.) The <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
            supplied with MySQL Cluster ignores any value explicitly set
            for <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode</code></a>, and
            always treats it as <code class="literal">IDEMPOTENT</code>.
          </p><p>
            In MySQL Server 5.5, <code class="literal">STRICT</code>
            mode is the default value. This should not be changed;
            currently, <code class="literal">IDEMPOTENT</code> mode is supported
            only by <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDB</code></a>.
          </p></li><li class="listitem"><p><a name="sysvar_slave_load_tmpdir"></a>
            <a class="indexterm" name="idm140301481641824"></a>

            <a class="indexterm" name="idm140301481640784"></a>

            <a class="link" href="replication.html#sysvar_slave_load_tmpdir"><code class="literal">slave_load_tmpdir</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave-load-tmpdir" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave-load-tmpdir=path</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_load_tmpdir">slave_load_tmpdir</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">directory name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">/tmp</code></td></tr></tbody></table>
</div>
<p>
            The name of the directory where the slave creates temporary
            files for replicating
            <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
            INFILE</code></a> statements.
          </p></li><li class="listitem"><p><a name="sysvar_slave_max_allowed_packet"></a>
            <a class="indexterm" name="idm140301481615968"></a>

            <a class="indexterm" name="idm140301481614864"></a>

            <a class="link" href="replication.html#sysvar_slave_max_allowed_packet"><code class="literal">slave_max_allowed_packet</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave_max_allowed_packet" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td><td colspan="3">5.5.26</td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_max_allowed_packet">slave_max_allowed_packet</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1073741824</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1024</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">1073741824</code></td></tr></tbody></table>
</div>
<p>
            In MySQL 5.5.26 and later, this variable sets the maximum
            packet size for the slave SQL and I/O threads, so that large
            updates using row-based replication do not cause replication
            to fail because an update exceeded
            <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>.
          </p><p>
            This global variable always has a value that is a positive
            integer multiple of 1024; if you set it to some value that
            is not, the value is rounded down to the next highest
            multiple of 1024 for it is stored or used; setting
            <code class="literal">slave_max_allowed_packet</code> to 0 causes 1024
            to be used. (A truncation warning is issued in all such
            cases.) The default and maximum value is 1073741824 (1 GB);
            the minimum is 1024.
          </p><p>
            <code class="literal">slave_max_allowed_packet</code> can also be set
            at startup, using the
            <a class="link" href="replication.html#option_mysqld_slave-max-allowed-packet"><code class="option">--slave-max-allowed-packet</code></a>
            option.
          </p></li><li class="listitem"><p><a name="sysvar_slave_net_timeout"></a>
            <a class="indexterm" name="idm140301481582000"></a>

            <a class="indexterm" name="idm140301481580960"></a>

            <a class="link" href="replication.html#sysvar_slave_net_timeout"><code class="literal">slave_net_timeout</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave-net-timeout" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave-net-timeout=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_net_timeout">slave_net_timeout</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">3600</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr></tbody></table>
</div>
<p>
            The number of seconds to wait for more data from a
            master/slave connection before aborting the read.
          </p></li><li class="listitem"><p><a name="sysvar_slave_skip_errors"></a>
            <a class="indexterm" name="idm140301481555168"></a>

            <a class="indexterm" name="idm140301481554128"></a>

            <a class="link" href="replication.html#sysvar_slave_skip_errors"><code class="literal">slave_skip_errors</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave-skip-errors" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave-skip-errors=name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_skip_errors">slave_skip_errors</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="5"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" rowspan="3" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">[list of error codes]</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">all</code></td></tr><tr><td scope="row" rowspan="6"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" rowspan="4" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">[list of error codes]</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">all</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">ddl_exist_errors</code></td></tr><tr><td scope="row" rowspan="6"><span class="bold"><strong>Permitted Values</strong></span> (&gt;= 5.5.22-ndb-7.2.6)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" rowspan="4" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">[list of error codes]</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">all</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">ddl_exist_errors</code></td></tr></tbody></table>
</div>
<p>
            Normally, replication stops when an error occurs on the
            slave. This gives you the opportunity to resolve the
            inconsistency in the data manually. This variable tells the
            slave SQL thread to continue replication when a statement
            returns any of the errors listed in the variable value.
          </p></li><li class="listitem"><p><a name="sysvar_slave_transaction_retries"></a>
            <a class="indexterm" name="idm140301481499776"></a>

            <a class="indexterm" name="idm140301481498672"></a>

            <a class="link" href="replication.html#sysvar_slave_transaction_retries"><code class="literal">slave_transaction_retries</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave_transaction_retries" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave_transaction_retries=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_transaction_retries">slave_transaction_retries</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">10</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">10</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">10</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            If a replication slave SQL thread fails to execute a
            transaction because of an
            <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> deadlock or because the
            transaction's execution time exceeded
            <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>'s
            <a class="link" href="innodb-storage-engine.html#sysvar_innodb_lock_wait_timeout"><code class="literal">innodb_lock_wait_timeout</code></a> or
            <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDBCLUSTER</code></a>'s
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactiondeadlockdetectiontimeout"><code class="literal">TransactionDeadlockDetectionTimeout</code></a>
            or
            <a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactioninactivetimeout"><code class="literal">TransactionInactiveTimeout</code></a>,
            it automatically retries
            <a class="link" href="replication.html#sysvar_slave_transaction_retries"><code class="literal">slave_transaction_retries</code></a>
            times before stopping with an error. The default value is
            10.
          </p></li><li class="listitem"><p><a name="sysvar_slave_type_conversions"></a>
            <a class="indexterm" name="idm140301481440816"></a>

            <a class="indexterm" name="idm140301481439776"></a>

            <a class="link" href="replication.html#sysvar_slave_type_conversions"><code class="literal">slave_type_conversions</code></a>
</p>
<div class="informaltable">
<table summary="Options for slave_type_conversions" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td><td colspan="3">5.5.3</td></tr><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--slave_type_conversions=set</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_slave_type_conversions">slave_type_conversions</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">set</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal"></code></td></tr><tr><td scope="row" rowspan="2" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">ALL_LOSSY</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">ALL_NON_LOSSY</code></td></tr></tbody></table>
</div>
<p>
            Controls the type conversion mode in effect on the slave
            when using row-based replication, including MySQL Cluster
            Replication. Its value is a comma-delimited set of zero or
            more elements from the list: <code class="literal">ALL_LOSSY</code>,
            <code class="literal">ALL_NON_LOSSY</code>. Set this variable to an
            empty string to disallow type conversions between the master
            and the slave. Changes require a restart of the slave to
            take effect.
          </p><p>
            For additional information on type conversion modes
            applicable to attribute promotion and demotion in row-based
            replication, see
            <a class="xref" href="replication.html#replication-features-attribute-promotion" title="Row-based replication: attribute promotion and demotion">Row-based replication: attribute promotion and demotion</a>.
          </p><p>
            This variable was added in MySQL 5.5.3.
          </p></li><li class="listitem"><p><a name="sysvar_sql_slave_skip_counter"></a>
            <a class="indexterm" name="idm140301481406752"></a>

            <a class="indexterm" name="idm140301481405712"></a>

            <a class="link" href="replication.html#sysvar_sql_slave_skip_counter"><code class="literal">sql_slave_skip_counter</code></a>
</p>
<div class="informaltable">
<table summary="Options for sql_slave_skip_counter" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_sql_slave_skip_counter">sql_slave_skip_counter</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr></tbody></table>
</div>
<p>
            The number of events from the master that a slave server
            should skip.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              If skipping the number of events specified by setting this
              variable would cause the slave to begin in the middle of
              an event group, the slave continues to skip until it finds
              the beginning of the next event group and begins from that
              point. For more information, see
              <a class="xref" href="sql-syntax.html#set-global-sql-slave-skip-counter" title="13.4.2.4 SET GLOBAL sql_slave_skip_counter Syntax">Section 13.4.2.4, “SET GLOBAL sql_slave_skip_counter Syntax”</a>.
</p>
</div>
</li><li class="listitem"><p><a name="sysvar_sync_master_info"></a>
            <a class="indexterm" name="idm140301481384800"></a>

            <a class="indexterm" name="idm140301481383792"></a>

            <a class="link" href="replication.html#sysvar_sync_master_info"><code class="literal">sync_master_info</code></a>
</p>
<div class="informaltable">
<table summary="Options for sync_master_info" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--sync-master-info=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_sync_master_info">sync_master_info</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            If the value of this variable is greater than 0, a
            replication slave synchronizes its
            <code class="filename">master.info</code> file to disk (using
            <code class="literal">fdatasync()</code>) after every
            <a class="link" href="replication.html#sysvar_sync_master_info"><code class="literal">sync_master_info</code></a> events.
            The default value is 0 (recommended in most situations),
            which does not force any synchronization to disk by the
            MySQL server; in this case, the server relies on the
            operating system to flush the
            <code class="filename">master.info</code> file's contents from
            time to time as for any other file.
          </p></li><li class="listitem"><p><a name="sysvar_sync_relay_log"></a>
            <a class="indexterm" name="idm140301481331728"></a>

            <a class="indexterm" name="idm140301481330672"></a>

            <a class="link" href="replication.html#sysvar_sync_relay_log"><code class="literal">sync_relay_log</code></a>
</p>
<div class="informaltable">
<table summary="Options for sync_relay_log" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--sync-relay-log=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_sync_relay_log">sync_relay_log</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            If the value of this variable is greater than 0, the MySQL
            server synchronizes its relay log to disk (using
            <code class="literal">fdatasync()</code>) after every
            <code class="literal">sync_relay_log</code> events are written to the
            relay log.
          </p><p>
            The default value of <code class="literal">sync_relay_log</code> is 0,
            which does no synchronizing to disk; in this case, the
            server relies on the operating system to flush the relay
            log's contents from time to time as for any other file.
          </p><p>
            A value of 1 is the safest choice because in the event of a
            crash you lose at most one event from the relay log.
            However, it is also the slowest choice (unless the disk has
            a battery-backed cache, which makes synchronization very
            fast).
          </p></li><li class="listitem"><p><a name="sysvar_sync_relay_log_info"></a>
            <a class="indexterm" name="idm140301481278720"></a>

            <a class="indexterm" name="idm140301481277680"></a>

            <a class="link" href="replication.html#sysvar_sync_relay_log_info"><code class="literal">sync_relay_log_info</code></a>
</p>
<div class="informaltable">
<table summary="Options for sync_relay_log_info" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--sync-relay-log-info=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_sync_relay_log_info">sync_relay_log_info</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            If the value of this variable is greater than 0, a
            replication slave synchronizes its
            <code class="filename">relay-log.info</code> file to disk (using
            <code class="literal">fdatasync()</code>) after every
            <a class="link" href="replication.html#sysvar_sync_relay_log_info"><code class="literal">sync_relay_log_info</code></a>
            transactions. A value of 1 is the generally the best choice.
            The default value of
            <a class="link" href="replication.html#sysvar_sync_relay_log_info"><code class="literal">sync_relay_log_info</code></a> is 0,
            which does not force any synchronization to disk by the
            MySQL server—in this case, the server relies on the
            operating system to flush the
            <code class="filename">relay-log.info</code> file's contents
            from time to time as for any other file.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-options-binary-log"></a>17.1.3.4 Binary Log Options and Variables</h4>

</div>

</div>

</div>
<p>
      <a class="xref" href="replication.html#replication-optvars-binlog" title="Startup Options Used with Binary Logging">Startup Options Used with Binary Logging</a>
    </p><p>
      <a class="xref" href="replication.html#replication-sysvars-binlog" title="System Variables Used with Binary Logging">System Variables Used with Binary Logging</a>
    </p><p>
      You can use the <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> options and system
      variables that are described in this section to affect the
      operation of the binary log as well as to control which statements
      are written to the binary log. For additional information about
      the binary log, see <a class="xref" href="server-administration.html#binary-log" title="5.2.4 The Binary Log">Section 5.2.4, “The Binary Log”</a>. For additional
      information about using MySQL server options and system variables,
      see <a class="xref" href="server-administration.html#server-options" title="5.1.3 Server Command Options">Section 5.1.3, “Server Command Options”</a>, and
      <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4 Server System Variables">Section 5.1.4, “Server System Variables”</a>.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="replication-optvars-binlog"></a>Startup Options Used with Binary Logging</h5>
</div>
</div>
</div>
<p>
        The following list describes startup options for enabling and
        configuring the binary log. System variables used with binary
        logging are discussed later in this section.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_binlog-row-event-max-size"></a>
            <a class="indexterm" name="idm140301481214032"></a>

            <a class="indexterm" name="idm140301481212576"></a>

            <a class="link" href="replication.html#option_mysqld_binlog-row-event-max-size"><code class="option">--binlog-row-event-max-size=<em class="replaceable"><code>N</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for binlog-row-event-max-size" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--binlog-row-event-max-size=#</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1024</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">256</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1024</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">256</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1024</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">256</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            Specify the maximum size of a row-based binary log event, in
            bytes. Rows are grouped into events smaller than this size
            if possible. The value should be a multiple of 256. The
            default is 1024. See <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.
          </p></li><li class="listitem"><p><a name="option_mysqld_log-bin"></a>
            <a class="indexterm" name="idm140301481170768"></a>

            <a class="indexterm" name="idm140301481169312"></a>

            <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin[=<em class="replaceable"><code>base_name</code></em>]</code></a>
</p>
<div class="informaltable">
<table summary="Options for log-bin" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-bin</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_log_bin">log_bin</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr></tbody></table>
</div>
<p>
            Enable binary logging. The server logs all statements that
            change data to the binary log, which is used for backup and
            replication. See <a class="xref" href="server-administration.html#binary-log" title="5.2.4 The Binary Log">Section 5.2.4, “The Binary Log”</a>.
          </p><p>
            The option value, if given, is the basename for the log
            sequence. The server creates binary log files in sequence by
            adding a numeric suffix to the basename. It is recommended
            that you specify a basename (see <a class="xref" href="error-handling.html#bugs" title="B.5.8 Known Issues in MySQL">Section B.5.8, “Known Issues in MySQL”</a>, for
            the reason). Otherwise, MySQL uses
            <code class="filename"><em class="replaceable"><code>host_name</code></em>-bin</code>
            as the basename.
          </p><p>
            In MySQL 5.5.20 and later, when the server reads an entry
            from the index file, it checks whether the entry contains a
            relative path, and if it does, the relative part of the path
            in replaced with the absolute path set using the
            <code class="option">--log-bin</code> option. An absolute path remains
            unchanged; in such a case, the index must be edited manually
            to enable the new path or paths to be used. Previous to
            MySQL 5.5.20, manual intervention was required whenever
            relocating the binary log or relay log files. (Bug
            #11745230, Bug #12133)
          </p><p>
            Setting this option causes the
            <a class="link" href="replication.html#sysvar_log_bin"><code class="literal">log_bin</code></a> system variable to
            be set to <code class="literal">ON</code> (or <code class="literal">1</code>),
            and not to the basename. This is a known issue; see Bug
            #19614 for more information.
          </p></li><li class="listitem"><p><a name="option_mysqld_log-bin-index"></a>
            <a class="indexterm" name="idm140301481140096"></a>

            <a class="indexterm" name="idm140301481138608"></a>

            <a class="link" href="replication.html#option_mysqld_log-bin-index"><code class="option">--log-bin-index[=<em class="replaceable"><code>file_name</code></em>]</code></a>
</p>
<div class="informaltable">
<table summary="Options for log-bin-index" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-bin-index=file_name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">file name</code></td></tr></tbody></table>
</div>
<p>
            The index file for binary log file names. See
            <a class="xref" href="server-administration.html#binary-log" title="5.2.4 The Binary Log">Section 5.2.4, “The Binary Log”</a>. If you omit the file name, and
            if you did not specify one with
            <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a>, MySQL uses
            <code class="filename"><em class="replaceable"><code>host_name</code></em>-bin.index</code>
            as the file name.
          </p></li><li class="listitem"><p><a name="option_mysqld_log-bin-trust-function-creators"></a>
            <a class="indexterm" name="idm140301481121904"></a>

            <a class="indexterm" name="idm140301481120400"></a>

            <a class="link" href="replication.html#option_mysqld_log-bin-trust-function-creators"><code class="option">--log-bin-trust-function-creators[={0|1}]</code></a>
</p>
<div class="informaltable">
<table summary="Options for log-bin-trust-function-creators" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-bin-trust-function-creators</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="server-administration.html#sysvar_log_bin_trust_function_creators">log_bin_trust_function_creators</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            This option sets the corresponding
            <a class="link" href="server-administration.html#sysvar_log_bin_trust_function_creators"><code class="literal">log_bin_trust_function_creators</code></a>
            system variable. If no argument is given, the option sets
            the variable to 1.
            <a class="link" href="server-administration.html#sysvar_log_bin_trust_function_creators"><code class="literal">log_bin_trust_function_creators</code></a>
            affects how MySQL enforces restrictions on stored function
            and trigger creation. See
            <a class="xref" href="stored-programs-views.html#stored-programs-logging" title="20.7 Binary Logging of Stored Programs">Section 20.7, “Binary Logging of Stored Programs”</a>.
          </p></li><li class="listitem"><p><a name="option_mysqld_log-bin-use-v1-row-events"></a>
            <a class="indexterm" name="idm140301481093664"></a>

            <a class="indexterm" name="idm140301481092208"></a>

            <a class="link" href="replication.html#option_mysqld_log-bin-use-v1-row-events"><code class="option">--log-bin-use-v1-row-events[={0|1}]</code></a>
</p>
<div class="informaltable">
<table summary="Options for log-bin-use-v1-row-events" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td><td colspan="3">5.5.15-ndb-7.2.1</td></tr><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-bin-use-v1-row-events[={0|1}]</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_log_bin_use_v1_row_events">log_bin_use_v1_row_events</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span> (&gt;= 5.5.15-ndb-7.2.1)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr></tbody></table>
</div>
<p>
            Version 2 binary log row events are used by default
            beginning with MySQL Cluster NDB 7.2.1; however, Version 2
            events cannot be read by previous MySQL Cluster releases.
            Setting <code class="option">--log-bin-use-v1-row-events</code> to 1
            causes <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> to write the binary log
            using Version 1 logging events, which is the only version of
            binary log events used in previous releases, and thus
            produce binary logs that can be read by older slaves.
          </p><p>
            The value used for this option can be obtained from the
            read-only
            <a class="link" href="replication.html#sysvar_log_bin_use_v1_row_events"><code class="literal">log_bin_use_v1_row_events</code></a>
            system variable.
          </p><p>
            <code class="option">--log-bin-use-v1-row-events</code> is chiefly of
            interest when setting up replication conflict detection and
            resolution using <code class="literal">NDB$EPOCH_TRANS()</code> as the
            conflict detection function, which requires Version 2 binary
            log row events. Thus, this option and
            <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-transaction-id"><code class="option">--ndb-log-transaction-id</code></a> are
            not compatible.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Version 2 binary log row events are also available in
              MySQL Cluster NDB 7.0.27 and MySQL Cluster NDB 7.1.6 and
              later MySQL Cluster NDB 7.0 and 7.1 releases. However,
              prior to MySQL Cluster NDB 7.2.1, Version 1 events are the
              default (and so the default value for this option is 1 in
              those versions). You should keep this mind when planning
              upgrades for setups using MySQL Cluster Replication.
</p>
</div>
<p>
            <code class="option">--log-bin-use-v1-row-events</code> is not
            supported in mainline MySQL Server 5.5
            releases.
          </p><p>
            For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="18.6.11 MySQL Cluster Replication Conflict Resolution">Section 18.6.11, “MySQL Cluster Replication Conflict Resolution”</a>.
          </p></li><li class="listitem"><p>


            <a class="indexterm" name="idm140301481057216"></a>

            <a class="indexterm" name="idm140301481055728"></a>

            <a class="link" href="server-administration.html#option_mysqld_log-short-format"><code class="option">--log-short-format</code></a>
</p>
<div class="informaltable">
<table summary="Options for log-short-format" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-short-format</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            Log less information to the binary log and slow query log,
            if they have been activated.
</p></li></ul>
</div>
<p><b>Statement selection options. </b>
          The options in the following list affect which statements are
          written to the binary log, and thus sent by a replication
          master server to its slaves. There are also options for slave
          servers that control which statements received from the master
          should be executed or ignored. For details, see
          <a class="xref" href="replication.html#replication-options-slave" title="17.1.3.3 Replication Slave Options and Variables">Section 17.1.3.3, “Replication Slave Options and Variables”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_binlog-do-db"></a>
            <a class="indexterm" name="idm140301481037392"></a>

            <a class="indexterm" name="idm140301481035904"></a>

            <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=<em class="replaceable"><code>db_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for binlog-do-db" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--binlog-do-db=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            This option affects binary logging in a manner similar to
            the way that
            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> affects
            replication.
          </p><p>
            The effects of this option depend on whether the
            statement-based or row-based logging format is in use, in
            the same way that the effects of
            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> depend on
            whether statement-based or row-based replication is in use.
            You should keep in mind that the format used to log a given
            statement may not necessarily be the same as that indicated
            by the value of
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>. For example,
            DDL statements such as <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE
            TABLE</code></a> and <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> are always logged as statements, without
            regard to the logging format in effect, so the following
            statement-based rules for <code class="option">--binlog-do-db</code>
            always apply in determining whether or not the statement is
            logged.
          </p><p><b>Statement-based logging. </b>
              Only those statements are written to the binary log where
              the default database (that is, the one selected by
              <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a>) is
              <em class="replaceable"><code>db_name</code></em>. To specify more than
              one database, use this option multiple times, once for
              each database; however, doing so does
              <span class="emphasis"><em>not</em></span> cause cross-database statements
              such as <code class="literal">UPDATE
              <em class="replaceable"><code>some_db.some_table</code></em> SET
              foo='bar'</code> to be logged while a different
              database (or no database) is selected.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
              To specify multiple databases you
              <span class="emphasis"><em>must</em></span> use multiple instances of this
              option. Because database names can contain commas, the
              list will be treated as the name of a single database if
              you supply a comma-separated list.
</p>
</div>
<p>
            An example of what does not work as you might expect when
            using statement-based logging: If the server is started with
            <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=sales</code></a> and you
            issue the following statements, the
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement is
            <span class="emphasis"><em>not</em></span> logged:
          </p><pre class="programlisting">
USE prices;
UPDATE sales.january SET amount=amount+1000;
</pre><p>
            The main reason for this <span class="quote">“<span class="quote">just check the default
            database</span>”</span> behavior is that it is difficult from the
            statement alone to know whether it should be replicated (for
            example, if you are using multiple-table
            <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statements or
            multiple-table <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>
            statements that act across multiple databases). It is also
            faster to check only the default database rather than all
            databases if there is no need.
          </p><p>
            Another case which may not be self-evident occurs when a
            given database is replicated even though it was not
            specified when setting the option. If the server is started
            with <code class="option">--binlog-do-db=sales</code>, the following
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement is logged
            even though <code class="literal">prices</code> was not included when
            setting <code class="option">--binlog-do-db</code>:
          </p><pre class="programlisting">          
USE sales;
UPDATE prices.discounts SET percentage = percentage + 10;
</pre><p>
            Because <code class="literal">sales</code> is the default database
            when the <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement is
            issued, the <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> is logged.
          </p><p><b>Row-based logging. </b>
              Logging is restricted to database
              <em class="replaceable"><code>db_name</code></em>. Only changes to tables
              belonging to <em class="replaceable"><code>db_name</code></em> are
              logged; the default database has no effect on this.
              Suppose that the server is started with
              <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=sales</code></a> and
              row-based logging is in effect, and then the following
              statements are executed:
            </p><pre class="programlisting">
USE prices;
UPDATE sales.february SET amount=amount+100;
</pre><p>
            The changes to the <code class="literal">february</code> table in the
            <code class="literal">sales</code> database are logged in accordance
            with the <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement;
            this occurs whether or not the
            <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a> statement was issued.
            However, when using the row-based logging format and
            <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=sales</code></a>, changes
            made by the following <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>
            are not logged:
          </p><pre class="programlisting">
USE prices;
UPDATE prices.march SET amount=amount-25;
</pre><p>
            Even if the <code class="literal">USE prices</code> statement were
            changed to <code class="literal">USE sales</code>, the
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement's
            effects would still not be written to the binary log.
          </p><p>
            Another important difference in
            <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> handling for
            statement-based logging as opposed to the row-based logging
            occurs with regard to statements that refer to multiple
            databases. Suppose that the server is started with
            <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=db1</code></a>, and the
            following statements are executed:
          </p><pre class="programlisting">
USE db1;
UPDATE db1.table1 SET col1 = 10, db2.table2 SET col2 = 20;
</pre><p>
            If you are using statement-based logging, the updates to
            both tables are written to the binary log. However, when
            using the row-based format, only the changes to
            <code class="literal">table1</code> are logged;
            <code class="literal">table2</code> is in a different database, so it
            is not changed by the <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>.
            Now suppose that, instead of the <code class="literal">USE db1</code>
            statement, a <code class="literal">USE db4</code> statement had been
            used:
          </p><pre class="programlisting">
USE db4;
UPDATE db1.table1 SET col1 = 10, db2.table2 SET col2 = 20;
</pre><p>
            In this case, the <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>
            statement is not written to the binary log when using
            statement-based logging. However, when using row-based
            logging, the change to <code class="literal">table1</code> is logged,
            but not that to <code class="literal">table2</code>—in other
            words, only changes to tables in the database named by
            <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> are logged,
            and the choice of default database has no effect on this
            behavior.
          </p></li><li class="listitem"><p><a name="option_mysqld_binlog-ignore-db"></a>
            <a class="indexterm" name="idm140301480964480"></a>

            <a class="indexterm" name="idm140301480962992"></a>

            <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db=<em class="replaceable"><code>db_name</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for binlog-ignore-db" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--binlog-ignore-db=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">string</code></td></tr></tbody></table>
</div>
<p>
            This option affects binary logging in a manner similar to
            the way that
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a> affects
            replication.
          </p><p>
            The effects of this option depend on whether the
            statement-based or row-based logging format is in use, in
            the same way that the effects of
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a> depend
            on whether statement-based or row-based replication is in
            use. You should keep in mind that the format used to log a
            given statement may not necessarily be the same as that
            indicated by the value of
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>. For example,
            DDL statements such as <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE
            TABLE</code></a> and <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> are always logged as statements, without
            regard to the logging format in effect, so the following
            statement-based rules for
            <code class="option">--binlog-ignore-db</code> always apply in
            determining whether or not the statement is logged.
          </p><p><b>Statement-based logging. </b>
              Tells the server to not log any statement where the
              default database (that is, the one selected by
              <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a>) is
              <em class="replaceable"><code>db_name</code></em>.
            </p><p>
            Prior to MySQL 5.5.32, this option caused any statements
            containing fully qualified table names not to be logged if
            there was no default database specified (that is, when
            <a class="link" href="sql-syntax.html#select" title="13.2.9 SELECT Syntax"><code class="literal">SELECT</code></a>
            <a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a> returned
            <code class="literal">NULL</code>). In MySQL 5.5.32 and later, when
            there is no default database, no
            <code class="option">--binlog-ignore-db</code> options are applied, and
            such statements are always logged. (Bug #11829838, Bug
            #60188)
          </p><p><b>Row-based format. </b>
              Tells the server not to log updates to any tables in the
              database <em class="replaceable"><code>db_name</code></em>. The current
              database has no effect.
            </p><p>
            When using statement-based logging, the following example
            does not work as you might expect. Suppose that the server
            is started with
            <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db=sales</code></a> and
            you issue the following statements:
          </p><pre class="programlisting">
USE prices;
UPDATE sales.january SET amount=amount+1000;
</pre><p>
            The <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement
            <span class="emphasis"><em>is</em></span> logged in such a case because
            <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a> applies
            only to the default database (determined by the
            <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a> statement). Because the
            <code class="literal">sales</code> database was specified explicitly
            in the statement, the statement has not been filtered.
            However, when using row-based logging, the
            <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement's
            effects are <span class="emphasis"><em>not</em></span> written to the binary
            log, which means that no changes to the
            <code class="literal">sales.january</code> table are logged; in this
            instance,
            <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db=sales</code></a>
            causes <span class="emphasis"><em>all</em></span> changes made to tables in
            the master's copy of the <code class="literal">sales</code>
            database to be ignored for purposes of binary logging.
          </p><p>
            To specify more than one database to ignore, use this option
            multiple times, once for each database. Because database
            names can contain commas, the list will be treated as the
            name of a single database if you supply a comma-separated
            list.
          </p><p>
            You should not use this option if you are using
            cross-database updates and you do not want these updates to
            be logged.
</p></li></ul>
</div>
<p><b>Testing and debugging options. </b>
          The following binary log options are used in replication
          testing and debugging. They are not intended for use in normal
          operations.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_max-binlog-dump-events"></a>
            <a class="indexterm" name="idm140301480916704"></a>

            <a class="indexterm" name="idm140301480915248"></a>

            <a class="link" href="replication.html#option_mysqld_max-binlog-dump-events"><code class="option">--max-binlog-dump-events=<em class="replaceable"><code>N</code></em></code></a>
</p>
<div class="informaltable">
<table summary="Options for max-binlog-dump-events" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--max-binlog-dump-events=#</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr></tbody></table>
</div>
<p>
            This option is used internally by the MySQL test suite for
            replication testing and debugging.
          </p></li><li class="listitem"><p><a name="option_mysqld_sporadic-binlog-dump-fail"></a>
            <a class="indexterm" name="idm140301480899168"></a>

            <a class="indexterm" name="idm140301480897712"></a>

            <a class="link" href="replication.html#option_mysqld_sporadic-binlog-dump-fail"><code class="option">--sporadic-binlog-dump-fail</code></a>
</p>
<div class="informaltable">
<table summary="Options for sporadic-binlog-dump-fail" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--sporadic-binlog-dump-fail</code></td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            This option is used internally by the MySQL test suite for
            replication testing and debugging.
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="replication-sysvars-binlog"></a>System Variables Used with Binary Logging</h5>

</div>

</div>

</div>
<p>
        The following list describes system variables for controlling
        binary logging. They can be set at server startup and some of
        them can be changed at runtime using
        <a class="link" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax"><code class="literal">SET</code></a>.
        Server options used to control binary logging are listed earlier
        in this section. For information about the
        <a class="link" href="server-administration.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a> and
        <a class="link" href="server-administration.html#sysvar_sql_log_off"><code class="literal">sql_log_off</code></a> variables, see
        <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4 Server System Variables">Section 5.1.4, “Server System Variables”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_binlog_cache_size"></a>
            <a class="indexterm" name="idm140301480875120"></a>

            <a class="indexterm" name="idm140301480874080"></a>

            <a class="link" href="replication.html#sysvar_binlog_cache_size"><code class="literal">binlog_cache_size</code></a>
</p>
<div class="informaltable">
<table summary="Options for binlog_cache_size" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--binlog_cache_size=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_binlog_cache_size">binlog_cache_size</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">32768</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">32768</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">32768</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            The size of the cache to hold changes to the binary log
            during a transaction. A binary log cache is allocated for
            each client if the server supports any transactional storage
            engines and if the server has the binary log enabled
            (<a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> option). If you
            often use large transactions, you can increase this cache
            size to get better performance. The
            <a class="link" href="server-administration.html#statvar_Binlog_cache_use"><code class="literal">Binlog_cache_use</code></a> and
            <a class="link" href="server-administration.html#statvar_Binlog_cache_disk_use"><code class="literal">Binlog_cache_disk_use</code></a>
            status variables can be useful for tuning the size of this
            variable. See <a class="xref" href="server-administration.html#binary-log" title="5.2.4 The Binary Log">Section 5.2.4, “The Binary Log”</a>.
          </p><p>
            In MySQL 5.5.3, a separate binary log cache (the binary log
            statement cache) was introduced for nontransactional
            statements and in MySQL 5.5.3 through 5.5.8, this variable
            sets.the size for both caches. This means that, in these
            MySQL versions, the total memory used for these caches is
            double the value set for
            <code class="literal">binlog_cache_size</code>.
          </p><p>
            Beginning with MySQL 5.5.9,
            <code class="literal">binlog_cache_size</code> sets the size for the
            transaction cache only, and the size of the statement cache
            is governed by the
            <a class="link" href="replication.html#sysvar_binlog_stmt_cache_size"><code class="literal">binlog_stmt_cache_size</code></a>
            system variable.
          </p></li><li class="listitem"><p><a name="sysvar_binlog_direct_non_transactional_updates"></a>
            <a class="indexterm" name="idm140301480816704"></a>

            <a class="indexterm" name="idm140301480815664"></a>

            <a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
</p>
<div class="informaltable">
<table summary="Options for binlog_direct_non_transactional_updates" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td><td colspan="3">5.5.2</td></tr><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--binlog_direct_non_transactional_updates[=value]</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates">binlog_direct_non_transactional_updates</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global, Session</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">OFF</code></td></tr></tbody></table>
</div>
<p>
            Due to concurrency issues, a slave can become inconsistent
            when a transaction contains updates to both transactional
            and nontransactional tables. MySQL tries to preserve
            causality among these statements by writing nontransactional
            statements to the transaction cache, which is flushed upon
            commit. However, problems arise when modifications done to
            nontransactional tables on behalf of a transaction become
            immediately visible to other connections because these
            changes may not be written immediately into the binary log.
          </p><p>
            Beginning with MySQL 5.5.2, the
            <a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
            variable offers one possible workaround to this issue. By
            default, this variable is disabled. Enabling
            <a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
            causes updates to nontransactional tables to be written
            directly to the binary log, rather than to the transaction
            cache.
          </p><p>
            <span class="emphasis"><em><a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
            works only for statements that are replicated using the
            statement-based binary logging format</em></span>; that is,
            it works only when the value of
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is
            <code class="literal">STATEMENT</code>, or when
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is
            <code class="literal">MIXED</code> and a given statement is being
            replicated using the statement-based format. This variable
            has no effect when the binary log format is
            <code class="literal">ROW</code>, or when
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is set to
            <code class="literal">MIXED</code> and a given statement is replicated
            using the row-based format.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              Before enabling this variable, you must make certain that
              there are no dependencies between transactional and
              nontransactional tables; an example of such a dependency
              would be the statement <code class="literal">INSERT INTO
              <em class="replaceable"><code>myisam_table</code></em> SELECT * FROM
              <em class="replaceable"><code>innodb_table</code></em></code>.
              Otherwise, such statements are likely to cause the slave
              to diverge from the master.
</p>
</div>
<p>
            Beginning with MySQL 5.5.5, this variable has no effect when
            the binary log format is <code class="literal">ROW</code> or
            <code class="literal">MIXED</code>. (Bug #51291)
          </p></li><li class="listitem"><p><a name="sysvar_binlog_format"></a>
            <a class="indexterm" name="idm140301480772880"></a>

            <a class="indexterm" name="idm140301480771824"></a>

            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
</p>
<div class="informaltable">
<table summary="Options for binlog-format" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--binlog-format=format</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_binlog_format">binlog_format</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global, Session</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="5"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">enumeration</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">STATEMENT</code></td></tr><tr><td scope="row" rowspan="3" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">ROW</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">STATEMENT</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">MIXED</code></td></tr><tr><td scope="row" rowspan="5"><span class="bold"><strong>Permitted Values</strong></span> (&gt;= 5.5.15-ndb-7.2.1, &lt;= 5.5.30-ndb-7.2.12)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">enumeration</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">STATEMENT</code></td></tr><tr><td scope="row" rowspan="3" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">ROW</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">STATEMENT</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">MIXED</code></td></tr><tr><td scope="row" rowspan="5"><span class="bold"><strong>Permitted Values</strong></span> (&gt;= 5.5.31-ndb-7.2.13)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">enumeration</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">MIXED</code></td></tr><tr><td scope="row" rowspan="3" valign="top"><span class="bold"><strong>Valid Values</strong></span></td><td colspan="2"><code class="literal">ROW</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">STATEMENT</code></td></tr><tr><td scope="row" colspan="2"><code class="literal">MIXED</code></td></tr></tbody></table>
</div>
<p>
            This variable sets the binary logging format, and can be any
            one of <code class="literal">STATEMENT</code>, <code class="literal">ROW</code>,
            or <code class="literal">MIXED</code>. See
            <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is set by the
            <a class="link" href="server-administration.html#option_mysqld_binlog-format"><code class="option">--binlog-format</code></a> option at
            startup, or by the
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> system
            variable at runtime.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              While you can change the logging format at runtime, it is
              <span class="emphasis"><em>not</em></span> recommended that you change it
              while replication is ongoing. This is due in part to the
              fact that slaves do not honor the master's
              <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> setting; a
              given MySQL Server can change only its own logging format.
</p>
</div>
<p>
            In MySQL 5.5, the default format is
            <code class="literal">STATEMENT</code>.
          </p><p><b>Exception. </b>
              <a class="indexterm" name="idm140301480710272"></a>

              <a class="indexterm" name="idm140301480708768"></a>

              In MySQL Cluster NDB 7.2.1 through MySQL Cluster NDB
              7.2.12, the default for this variable is
              <code class="literal">STATEMENT</code>. In MySQL Cluster NDB 7.2.13
              and later, when the <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDB</code></a>
              storage engine is enabled, the default is
              <code class="literal">MIXED</code>. (Bug #16417224) See also
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="18.6.6 Starting MySQL Cluster Replication (Single Replication Channel)">Section 18.6.6, “Starting MySQL Cluster Replication (Single Replication Channel)”</a>, and
              <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-two-channels" title="18.6.7 Using Two Replication Channels for MySQL Cluster Replication">Section 18.6.7, “Using Two Replication Channels for MySQL Cluster Replication”</a>.
            </p><p>
            You must have the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a>
            privilege to set either the global or session
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> value.
          </p><p>
            The rules governing when changes to this variable take
            effect and how long the effect lasts are the same as for
            other MySQL server system variables. See
            <a class="xref" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax">Section 13.7.4, “SET Syntax”</a>, for more information.
          </p><p>
            When <code class="literal">MIXED</code> is specified, statement-based
            replication is used, except for cases where only row-based
            replication is guaranteed to lead to proper results. For
            example, this happens when statements contain user-defined
            functions (UDF) or the <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a>
            function. An exception to this rule is that
            <code class="literal">MIXED</code> always uses statement-based
            replication for stored functions and triggers.
          </p><p>
            There are exceptions when you cannot switch the replication
            format at runtime:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                From within a stored function or a trigger.
              </p></li><li class="listitem"><p>
                If the session is currently in row-based replication
                mode and has open temporary tables.
              </p></li><li class="listitem"><p>
                Beginning with MySQL 5.5.3, within a transaction. (Bug
                #47863)
</p></li></ul>
</div>
<p>
            Trying to switch the format in those cases results in an
            error.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              <a class="indexterm" name="idm140301480690016"></a>

              <a class="indexterm" name="idm140301480688512"></a>

              Prior to MySQL Cluster NDB 7.2.1, it was also not possible
              to change the binary logging format at runtime when the
              <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDBCLUSTER</code></a> storage engine was
              enabled. In MySQL Cluster NDB 7.2.1 and later, this
              restriction is removed.
</p>
</div>
<p>
            The binary log format affects the behavior of the following
            server options:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a>
</p></li></ul>
</div>
<p>
            These effects are discussed in detail in the descriptions of
            the individual options.
          </p></li><li class="listitem"><p><a name="sysvar_binlog_stmt_cache_size"></a>
            <a class="indexterm" name="idm140301480675728"></a>

            <a class="indexterm" name="idm140301480674688"></a>

            <a class="link" href="replication.html#sysvar_binlog_stmt_cache_size"><code class="literal">binlog_stmt_cache_size</code></a>
</p>
<div class="informaltable">
<table summary="Options for binlog_stmt_cache_size" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td><td colspan="3">5.5.9</td></tr><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--binlog_stmt_cache_size=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_binlog_stmt_cache_size">binlog_stmt_cache_size</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">32768</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">32768</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            Beginning with MySQL 5.5.9, this variable determines the
            size of the cache for the binary log to hold
            nontransactional statements issued during a transaction. In
            MySQL 5.5.3 and later, separate binary log transaction and
            statement caches are allocated for each client if the server
            supports any transactional storage engines and if the server
            has the binary log enabled
            (<a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> option). If you
            often use large nontransactional statements during
            transactions, you can increase this cache size to get more
            performance. The
            <a class="link" href="server-administration.html#statvar_Binlog_stmt_cache_use"><code class="literal">Binlog_stmt_cache_use</code></a> and
            <a class="link" href="server-administration.html#statvar_Binlog_stmt_cache_disk_use"><code class="literal">Binlog_stmt_cache_disk_use</code></a>
            status variables can be useful for tuning the size of this
            variable. See <a class="xref" href="server-administration.html#binary-log" title="5.2.4 The Binary Log">Section 5.2.4, “The Binary Log”</a>.
          </p><p>
            In MySQL 5.5.3 through 5.5.8, the size for both caches is
            set using
            <a class="link" href="replication.html#sysvar_binlog_cache_size"><code class="literal">binlog_cache_size</code></a>. This
            means that, in these MySQL versions, the total memory used
            for these caches is double the value set for
            <a class="link" href="replication.html#sysvar_binlog_cache_size"><code class="literal">binlog_cache_size</code></a>.
            Beginning with MySQL 5.5.9,
            <a class="link" href="replication.html#sysvar_binlog_cache_size"><code class="literal">binlog_cache_size</code></a> sets the
            size for the transaction cache only.
          </p></li><li class="listitem"><p><a name="sysvar_log_bin"></a>
            <a class="indexterm" name="idm140301480624688"></a>

            <a class="indexterm" name="idm140301480623648"></a>

            <a class="link" href="replication.html#sysvar_log_bin"><code class="literal">log_bin</code></a>
</p>
<div class="informaltable">
<table summary="Options for log_bin" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_log_bin">log_bin</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr></tbody></table>
</div>
<p>
            Whether the binary log is enabled. If the
            <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> option is used,
            then the value of this variable is <code class="literal">ON</code>;
            otherwise it is <code class="literal">OFF</code>. This variable
            reports only on the status of binary logging (enabled or
            disabled); it does not actually report the value to which
            <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> is set.
          </p><p>
            See <a class="xref" href="server-administration.html#binary-log" title="5.2.4 The Binary Log">Section 5.2.4, “The Binary Log”</a>.
          </p></li><li class="listitem"><p><a name="sysvar_log_bin_use_v1_row_events"></a>
            <a class="indexterm" name="idm140301480603456"></a>

            <a class="indexterm" name="idm140301480602352"></a>

            <a class="link" href="replication.html#sysvar_log_bin_use_v1_row_events"><code class="literal">log_bin_use_v1_row_events</code></a>
</p>
<div class="informaltable">
<table summary="Options for log_bin_use_v1_row_events" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td><td colspan="3">5.5.15-ndb-7.2.1</td></tr><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-bin-use-v1-row-events[={0|1}]</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_log_bin_use_v1_row_events">log_bin_use_v1_row_events</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span> (&gt;= 5.5.15-ndb-7.2.1)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr></tbody></table>
</div>
<p>
            Shows whether Version 2 binary logging, available beginning
            with MySQL Cluster NDB 7.2.1, is in use. A value of 1 shows
            that the server is writing the binary log using Version 1
            logging events (the only version of binary log events used
            in previous releases), and thus producing a binary log that
            can be read by older slaves. 0 indicates that Version 2
            binary log events are in use.
          </p><p>
            This variable is read-only. To switch between Version 1 and
            Version 2 binary event binary logging, it is necessary to
            restart <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> with the
            <a class="link" href="replication.html#option_mysqld_log-bin-use-v1-row-events"><code class="option">--log-bin-use-v1-row-events</code></a>
            option.
          </p><p>
            Other than when performing upgrades of MySQL Cluster
            Replication, <code class="option">--log-bin-use-v1-events</code> is
            chiefly of interest when setting up replication conflict
            detection and resolution using
            <code class="literal">NDB$EPOCH_TRANS()</code>, which requires Version
            2 binary row event logging. Thus, this option and
            <a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-transaction-id"><code class="option">--ndb-log-transaction-id</code></a> are
            not compatible.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              MySQL Cluster NDB 7.2.1 and later use Version 2 binary log
              row events by default (and so the default value for this
              variable changes to 0 in those versions). You should keep
              this mind when planning upgrades for setups using MySQL
              Cluster Replication.
</p>
</div>
<p>
            This variable is not supported in mainline MySQL Server
            5.5.
          </p><p>
            For more information, see
            <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="18.6.11 MySQL Cluster Replication Conflict Resolution">Section 18.6.11, “MySQL Cluster Replication Conflict Resolution”</a>.
          </p></li><li class="listitem"><p><a name="sysvar_log_slave_updates"></a>
            <a class="indexterm" name="idm140301480567968"></a>

            <a class="indexterm" name="idm140301480566928"></a>

            <a class="link" href="replication.html#sysvar_log_slave_updates"><code class="literal">log_slave_updates</code></a>
</p>
<div class="informaltable">
<table summary="Options for log_slave_updates" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--log-slave-updates</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_log_slave_updates">log_slave_updates</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="2"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">boolean</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">FALSE</code></td></tr></tbody></table>
</div>
<p>
            Whether updates received by a slave server from a master
            server should be logged to the slave's own binary log.
            Binary logging must be enabled on the slave for this
            variable to have any effect. See
            <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>.
          </p></li><li class="listitem"><p><a name="sysvar_max_binlog_cache_size"></a>
            <a class="indexterm" name="idm140301480542560"></a>

            <a class="indexterm" name="idm140301480541520"></a>

            <a class="link" href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a>
</p>
<div class="informaltable">
<table summary="Options for max_binlog_cache_size" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--max_binlog_cache_size=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_max_binlog_cache_size">max_binlog_cache_size</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (&lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (&gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            If a transaction requires more than this many bytes of
            memory, the server generates a <span class="errortext">Multi-statement
            transaction required more than 'max_binlog_cache_size' bytes
            of storage</span> error. The minimum value is 4096. The
            maximum possible value is 16EB (exabytes). The maximum
            recommended value is 4GB; this is due to the fact that MySQL
            currently cannot work with binary log positions greater than
            4GB.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Prior to MySQL 5.5.28, 64-bit Windows platforms truncated
              the stored value for this variable to 4G, even when it was
              set to a greater value (Bug #13961678).
</p>
</div>
<p>
            In MySQL 5.5.3, a separate binary log cache (the binary log
            statement cache) was introduced for nontransactional
            statements and in MySQL 5.5.3 through 5.5.8, this variable
            sets.the upper limit for both caches. This means that, in
            these MySQL versions, the effective maximum for these caches
            is double the value set for
            <code class="literal">max_binlog_cache_size</code>.
          </p><p>
            Beginning with MySQL 5.5.9,
            <code class="literal">max_binlog_cache_size</code> sets the size for
            the transaction cache only, and the upper limit for the
            statement cache is governed by the
            <a class="link" href="replication.html#sysvar_max_binlog_stmt_cache_size"><code class="literal">max_binlog_stmt_cache_size</code></a>
            system variable.
          </p><p>
            Also beginning with MySQL 5.5.9, the session visibility of
            the <a class="link" href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a>
            system variable matches that of the
            <a class="link" href="replication.html#sysvar_binlog_cache_size"><code class="literal">binlog_cache_size</code></a> system
            variable: In MySQL 5.5.8 and earlier releases, a change in
            <a class="link" href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a> took
            immediate effect; in MySQL 5.5.9 and later, a change in
            <a class="link" href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a> takes
            effect only for new sessions that started after the value is
            changed.
          </p></li><li class="listitem"><p><a name="sysvar_max_binlog_size"></a>
            <a class="indexterm" name="idm140301480491408"></a>

            <a class="indexterm" name="idm140301480490400"></a>

            <a class="link" href="replication.html#sysvar_max_binlog_size"><code class="literal">max_binlog_size</code></a>
</p>
<div class="informaltable">
<table summary="Options for max_binlog_size" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--max_binlog_size=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_max_binlog_size">max_binlog_size</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1073741824</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">1073741824</code></td></tr></tbody></table>
</div>
<p>
            If a write to the binary log causes the current log file
            size to exceed the value of this variable, the server
            rotates the binary logs (closes the current file and opens
            the next one). The minimum value is 4096 bytes. The maximum
            and default value is 1GB.
          </p><p>
            A transaction is written in one chunk to the binary log, so
            it is never split between several binary logs. Therefore, if
            you have big transactions, you might see binary log files
            larger than
            <a class="link" href="replication.html#sysvar_max_binlog_size"><code class="literal">max_binlog_size</code></a>.
          </p><p>
            If <a class="link" href="server-administration.html#sysvar_max_relay_log_size"><code class="literal">max_relay_log_size</code></a> is 0,
            the value of
            <a class="link" href="replication.html#sysvar_max_binlog_size"><code class="literal">max_binlog_size</code></a> applies to
            relay logs as well.
          </p></li><li class="listitem"><p><a name="sysvar_max_binlog_stmt_cache_size"></a>
            <a class="indexterm" name="idm140301480457360"></a>

            <a class="indexterm" name="idm140301480456256"></a>

            <a class="link" href="replication.html#sysvar_max_binlog_stmt_cache_size"><code class="literal">max_binlog_stmt_cache_size</code></a>
</p>
<div class="informaltable">
<table summary="Options for max_binlog_stmt_cache_size" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td><td colspan="3">5.5.9</td></tr><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--max_binlog_stmt_cache_size=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_max_binlog_stmt_cache_size">max_binlog_stmt_cache_size</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">4096</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr></tbody></table>
</div>
<p>
            If nontransactional statements within a transaction require
            more than this many bytes of memory, the server generates an
            error. The minimum value is 4096. The maximum and default
            values are 4GB on 32-bit platforms and 16EB (exabytes) on
            64-bit platforms.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Prior to MySQL 5.5.28, 64-bit Windows platforms truncated
              the stored value for this variable to 4G, even when it was
              set to a greater value (Bug #13961678).
</p>
</div>
<p>
            In MySQL 5.5.3, a separate binary log cache (the binary log
            statement cache) was introduced for nontransactional
            statements and in MySQL 5.5.3 through 5.5.8, this variable
            sets.the upper limit for both caches. This means that, in
            these MySQL versions, the effective maximum for these caches
            is double the value set for
            <a class="link" href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a>.
          </p><p>
            Beginning with MySQL 5.5.9,
            <code class="literal">max_binlog_stmt_cache_size</code> sets the size
            for the statement cache only, and the upper limit for the
            transaction cache is governed exclusively by the
            <a class="link" href="replication.html#sysvar_max_binlog_cache_size"><code class="literal">max_binlog_cache_size</code></a>
            system variable.
          </p></li><li class="listitem"><p><a name="sysvar_sync_binlog"></a>
            <a class="indexterm" name="idm140301480420480"></a>

            <a class="indexterm" name="idm140301480419472"></a>

            <a class="link" href="replication.html#sysvar_sync_binlog"><code class="literal">sync_binlog</code></a>
</p>
<div class="informaltable">
<table summary="Options for sync_binlog" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--sync-binlog=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal"><a class="link" href="replication.html#sysvar_sync_binlog">sync_binlog</a></code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (32-bit platforms)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &lt;= 5.5.2)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709547520</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span> (64-bit platforms, &gt;= 5.5.3)</td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2"><code class="literal">integer</code></td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">4294967295</code></td></tr></tbody></table>
</div>
<p>
            If the value of this variable is greater than 0, the MySQL
            server synchronizes its binary log to disk (using
            <code class="literal">fdatasync()</code>) after every
            <a class="link" href="replication.html#sysvar_sync_binlog"><code class="literal">sync_binlog</code></a> writes to the
            binary log. There is one write to the binary log per
            statement if autocommit is enabled, and one write per
            transaction otherwise. The default value of
            <a class="link" href="replication.html#sysvar_sync_binlog"><code class="literal">sync_binlog</code></a> is 0, which
            does no synchronizing to disk—in this case, the server
            relies on the operating system to flush the binary
            log's contents from time to time as for any other file.
            A value of 1 is the safest choice because in the event of a
            crash you lose at most one statement or transaction from the
            binary log. However, it is also the slowest choice (unless
            the disk has a battery-backed cache, which makes
            synchronization very fast).
</p></li></ul>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-administration"></a>17.1.4 Common Replication Administration Tasks</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-administration-status">17.1.4.1 Checking Replication Status</a></span></dt><dt><span class="section"><a href="replication.html#replication-administration-pausing">17.1.4.2 Pausing Replication on the Slave</a></span></dt></dl>
</div>
<p>
      Once replication has been started it should execute without
      requiring much regular administration. Depending on your
      replication environment, you will want to check the replication
      status of each slave periodically, daily, or even more frequently.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-administration-status"></a>17.1.4.1 Checking Replication Status</h4>
</div>
</div>
</div>
<p>
        The most common task when managing a replication process is to
        ensure that replication is taking place and that there have been
        no errors between the slave and the master. The primary
        statement for this is <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE
        STATUS</code></a>, which you must execute on each slave:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW SLAVE STATUS\G</code></strong>
*************************** 1. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: master1
                  Master_User: root
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000004
          Read_Master_Log_Pos: 931
               Relay_Log_File: slave1-relay-bin.000056
                Relay_Log_Pos: 950
        Relay_Master_Log_File: mysql-bin.000004
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB:
          Replicate_Ignore_DB:
           Replicate_Do_Table:
       Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
                   Last_Errno: 0
                   Last_Error:
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 931
              Relay_Log_Space: 1365
              Until_Condition: None
               Until_Log_File:
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File:
           Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
               Master_SSL_Key:
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
               Last_SQL_Errno: 0
               Last_SQL_Error:
  Replicate_Ignore_Server_Ids: 0
</pre><p>
        The key fields from the status report to examine are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">Slave_IO_State</code>: The current status of the
            slave. See <a class="xref" href="optimization.html#slave-io-thread-states" title="8.12.5.6 Replication Slave I/O Thread States">Section 8.12.5.6, “Replication Slave I/O Thread States”</a>, and
            <a class="xref" href="optimization.html#slave-sql-thread-states" title="8.12.5.7 Replication Slave SQL Thread States">Section 8.12.5.7, “Replication Slave SQL Thread States”</a>, for more
            information.
          </p></li><li class="listitem"><p>
            <code class="literal">Slave_IO_Running</code>: Whether the I/O thread
            for reading the master's binary log is running. Normally,
            you want this to be <code class="literal">Yes</code> unless you have
            not yet started replication or have explicitly stopped it
            with <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a>.
          </p></li><li class="listitem"><p>
            <code class="literal">Slave_SQL_Running</code>: Whether the SQL thread
            for executing events in the relay log is running. As with
            the I/O thread, this should normally be
            <code class="literal">Yes</code>.
          </p></li><li class="listitem"><p>
            <code class="literal">Last_IO_Error</code>,
            <code class="literal">Last_SQL_Error</code>: The last errors
            registered by the I/O and SQL threads when processing the
            relay log. Ideally these should be blank, indicating no
            errors.
          </p></li><li class="listitem"><p>
            <code class="literal">Seconds_Behind_Master</code>: The number of
            seconds that the slave SQL thread is behind processing the
            master binary log. A high number (or an increasing one) can
            indicate that the slave is unable to handle events from the
            master in a timely fashion.
          </p><p>
            A value of 0 for <code class="literal">Seconds_Behind_Master</code>
            can usually be interpreted as meaning that the slave has
            caught up with the master, but there are some cases where
            this is not strictly true. For example, this can occur if
            the network connection between master and slave is broken
            but the slave I/O thread has not yet noticed this—that
            is, <a class="link" href="replication.html#sysvar_slave_net_timeout"><code class="literal">slave_net_timeout</code></a> has
            not yet elapsed.
          </p><p>
            It is also possible that transient values for
            <code class="literal">Seconds_Behind_Master</code> may not reflect the
            situation accurately. When the slave SQL thread has caught
            up on I/O, <code class="literal">Seconds_Behind_Master</code> displays
            0; but when the slave I/O thread is still queuing up a new
            event, <code class="literal">Seconds_Behind_Master</code> may show a
            large value until the SQL thread finishes executing the new
            event. This is especially likely when the events have old
            timestamps; in such cases, if you execute
            <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> several
            times in a relatively short period, you may see this value
            change back and forth repeatedly between 0 and a relatively
            large value.
</p></li></ul>
</div>
<p>
        Several pairs of fields provide information about the progress
        of the slave in reading events from the master binary log and
        processing them in the relay log:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            (<code class="literal">Master_Log_file</code>,
            <code class="literal">Read_Master_Log_Pos</code>): Coordinates in the
            master binary log indicating how far the slave I/O thread
            has read events from that log.
          </p></li><li class="listitem"><p>
            (<code class="literal">Relay_Master_Log_File</code>,
            <code class="literal">Exec_Master_Log_Pos</code>): Coordinates in the
            master binary log indicating how far the slave SQL thread
            has executed events received from that log.
          </p></li><li class="listitem"><p>
            (<code class="literal">Relay_Log_File</code>,
            <code class="literal">Relay_Log_Pos</code>): Coordinates in the slave
            relay log indicating how far the slave SQL thread has
            executed the relay log. These correspond to the preceding
            coordinates, but are expressed in slave relay log
            coordinates rather than master binary log coordinates.
</p></li></ul>
</div>
<p>
        On the master, you can check the status of connected slaves
        using <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> to examine
        the list of running processes. Slave connections have
        <code class="literal">Binlog Dump</code> in the <code class="literal">Command</code>
        field:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW PROCESSLIST \G;</code></strong>
*************************** 4. row ***************************
     Id: 10
   User: root
   Host: slave1:58371
     db: NULL
Command: Binlog Dump
   Time: 777
  State: Has sent all binlog to slave; waiting for binlog to be updated
   Info: NULL
</pre><p>
        Because it is the slave that drives the replication process,
        very little information is available in this report.
      </p><p>
        For slaves that were started with the
        <a class="link" href="replication.html#option_mysqld_report-host"><code class="option">--report-host</code></a> option and are
        connected to the master, the <a class="link" href="sql-syntax.html#show-slave-hosts" title="13.7.5.34 SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE
        HOSTS</code></a> statement on the master shows basic information
        about the slaves. The output includes the ID of the slave
        server, the value of the
        <a class="link" href="replication.html#option_mysqld_report-host"><code class="option">--report-host</code></a> option, the
        connecting port, and master ID:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW SLAVE HOSTS;</code></strong>
+-----------+--------+------+-------------------+-----------+
| Server_id | Host   | Port | Rpl_recovery_rank | Master_id |
+-----------+--------+------+-------------------+-----------+
|        10 | slave1 | 3306 |                 0 |         1 |
+-----------+--------+------+-------------------+-----------+
1 row in set (0.00 sec)
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-administration-pausing"></a>17.1.4.2 Pausing Replication on the Slave</h4>

</div>

</div>

</div>
<p>
        You can stop and start the replication of statements on the
        slave using the <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> and
        <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statements.
      </p><p>
        To stop processing of the binary log from the master, use
        <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a>:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>STOP SLAVE;</code></strong>
</pre><p>
        When replication is stopped, the slave I/O thread stops reading
        events from the master binary log and writing them to the relay
        log, and the SQL thread stops reading events from the relay log
        and executing them. You can pause the I/O or SQL thread
        individually by specifying the thread type:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>STOP SLAVE IO_THREAD;</code></strong>
mysql&gt; <strong class="userinput"><code>STOP SLAVE SQL_THREAD;</code></strong>
</pre><p>
        To start execution again, use the <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START
        SLAVE</code></a> statement:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre><p>
        To start a particular thread, specify the thread type:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>START SLAVE IO_THREAD;</code></strong>
mysql&gt; <strong class="userinput"><code>START SLAVE SQL_THREAD;</code></strong>
</pre><p>
        For a slave that performs updates only by processing events from
        the master, stopping only the SQL thread can be useful if you
        want to perform a backup or other task. The I/O thread will
        continue to read events from the master but they are not
        executed. This makes it easier for the slave to catch up when
        you restart the SQL thread.
      </p><p>
        Stopping only the I/O thread enables the events in the relay log
        to be executed by the SQL thread up to the point where the relay
        log ends. This can be useful when you want to pause execution to
        catch up with events already received from the master, when you
        want to perform administration on the slave but also ensure that
        it has processed all updates to a specific point. This method
        can also be used to pause event receipt on the slave while you
        conduct administration on the master. Stopping the I/O thread
        but permitting the SQL thread to run helps ensure that there is
        not a massive backlog of events to be executed when replication
        is started again.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="replication-implementation"></a>17.2 Replication Implementation</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-implementation-details">17.2.1 Replication Implementation Details</a></span></dt><dt><span class="section"><a href="replication.html#slave-logs">17.2.2 Replication Relay and Status Logs</a></span></dt><dt><span class="section"><a href="replication.html#replication-rules">17.2.3 How Servers Evaluate Replication Filtering Rules</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140301480299696"></a><p>
    Replication is based on the master server keeping track of all
    changes to its databases (updates, deletes, and so on) in its binary
    log. The binary log serves as a written record of all events that
    modify database structure or content (data) from the moment the
    server was started. Typically, <a class="link" href="sql-syntax.html#select" title="13.2.9 SELECT Syntax"><code class="literal">SELECT</code></a>
    statements are not recorded because they modify neither database
    structure nor content.
  </p><p>
    Each slave that connects to the master requests a copy of the binary
    log. That is, it pulls the data from the master, rather than the
    master pushing the data to the slave. The slave also executes the
    events from the binary log that it receives. This has the effect of
    repeating the original changes just as they were made on the master.
    Tables are created or their structure modified, and data is
    inserted, deleted, and updated according to the changes that were
    originally made on the master.
  </p><p>
    Because each slave is independent, the replaying of the changes from
    the master's binary log occurs independently on each slave that is
    connected to the master. In addition, because each slave receives a
    copy of the binary log only by requesting it from the master, the
    slave is able to read and update the copy of the database at its own
    pace and can start and stop the replication process at will without
    affecting the ability to update to the latest database status on
    either the master or slave side.
  </p><p>
    For more information on the specifics of the replication
    implementation, see
    <a class="xref" href="replication.html#replication-implementation-details" title="17.2.1 Replication Implementation Details">Section 17.2.1, “Replication Implementation Details”</a>.
  </p><p>
    Masters and slaves report their status in respect of the replication
    process regularly so that you can monitor them. See
    <a class="xref" href="optimization.html#thread-information" title="8.12.5 Examining Thread Information">Section 8.12.5, “Examining Thread Information”</a>, for descriptions of all
    replicated-related states.
  </p><p>
    The master binary log is written to a local relay log on the slave
    before it is processed. The slave also records information about the
    current position with the master's binary log and the local relay
    log. See <a class="xref" href="replication.html#slave-logs" title="17.2.2 Replication Relay and Status Logs">Section 17.2.2, “Replication Relay and Status Logs”</a>.
  </p><p>
    Database changes are filtered on the slave according to a set of
    rules that are applied according to the various configuration
    options and variables that control event evaluation. For details on
    how these rules are applied, see
    <a class="xref" href="replication.html#replication-rules" title="17.2.3 How Servers Evaluate Replication Filtering Rules">Section 17.2.3, “How Servers Evaluate Replication Filtering Rules”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-implementation-details"></a>17.2.1 Replication Implementation Details</h3>
</div>
</div>
</div>
<p>
      MySQL replication capabilities are implemented using three
      threads, one on the master server and two on the slave:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Binlog dump thread. </b>
            The master creates a thread to send the binary log contents
            to a slave when the slave connects. This thread can be
            identified in the output of <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW
            PROCESSLIST</code></a> on the master as the <code class="literal">Binlog
            Dump</code> thread.
          </p><p>
          The binary log dump thread acquires a lock on the master's
          binary log for reading each event that is to be sent to the
          slave. As soon as the event has been read, the lock is
          released, even before the event is sent to the slave.
        </p></li><li class="listitem"><p><b>Slave I/O thread. </b>
            When a <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statement
            is issued on a slave server, the slave creates an I/O
            thread, which connects to the master and asks it to send the
            updates recorded in its binary logs.
          </p><p>
          The slave I/O thread reads the updates that the master's
          <code class="literal">Binlog Dump</code> thread sends (see previous
          item) and copies them to local files that comprise the slave's
          relay log.
        </p><p>
          The state of this thread is shown as
          <code class="literal">Slave_IO_running</code> in the output of
          <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> or as
          <a class="link" href="server-administration.html#statvar_Slave_running"><code class="literal">Slave_running</code></a> in the output
          of <a class="link" href="sql-syntax.html#show-status" title="13.7.5.36 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a>.
        </p></li><li class="listitem"><p><b>Slave SQL thread. </b>
            The slave creates an SQL thread to read the relay log that
            is written by the slave I/O thread and execute the events
            contained therein.
</p></li></ul>
</div>
<p>
      In the preceding description, there are three threads per
      master/slave connection. A master that has multiple slaves creates
      one binary log dump thread for each currently connected slave, and
      each slave has its own I/O and SQL threads.
    </p><p>
      A slave uses two threads to separate reading updates from the
      master and executing them into independent tasks. Thus, the task
      of reading statements is not slowed down if statement execution is
      slow. For example, if the slave server has not been running for a
      while, its I/O thread can quickly fetch all the binary log
      contents from the master when the slave starts, even if the SQL
      thread lags far behind. If the slave stops before the SQL thread
      has executed all the fetched statements, the I/O thread has at
      least fetched everything so that a safe copy of the statements is
      stored locally in the slave's relay logs, ready for execution the
      next time that the slave starts. This enables the master server to
      purge its binary logs sooner because it no longer needs to wait
      for the slave to fetch their contents.
    </p><p>
      The <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> statement
      provides information that tells you what is happening on the
      master and on the slave regarding replication. For information on
      master states, see <a class="xref" href="optimization.html#master-thread-states" title="8.12.5.5 Replication Master Thread States">Section 8.12.5.5, “Replication Master Thread States”</a>. For
      slave states, see <a class="xref" href="optimization.html#slave-io-thread-states" title="8.12.5.6 Replication Slave I/O Thread States">Section 8.12.5.6, “Replication Slave I/O Thread States”</a>, and
      <a class="xref" href="optimization.html#slave-sql-thread-states" title="8.12.5.7 Replication Slave SQL Thread States">Section 8.12.5.7, “Replication Slave SQL Thread States”</a>.
    </p><p>
      The following example illustrates how the three threads show up in
      the output from <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>.
    </p><p>
      On the master server, the output from <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW
      PROCESSLIST</code></a> looks like this:
    </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW PROCESSLIST\G</code></strong>
*************************** 1. row ***************************
     Id: 2
   User: root
   Host: localhost:32931
     db: NULL
Command: Binlog Dump
   Time: 94
  State: Has sent all binlog to slave; waiting for binlog to
         be updated
   Info: NULL
</pre><p>
      Here, thread 2 is a <code class="literal">Binlog Dump</code> replication
      thread that services a connected slave. The
      <code class="literal">State</code> information indicates that all
      outstanding updates have been sent to the slave and that the
      master is waiting for more updates to occur. If you see no
      <code class="literal">Binlog Dump</code> threads on a master server, this
      means that replication is not running; that is, no slaves are
      currently connected.
    </p><p>
      On a slave server, the output from <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW
      PROCESSLIST</code></a> looks like this:
    </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW PROCESSLIST\G</code></strong>
*************************** 1. row ***************************
     Id: 10
   User: system user
   Host:
     db: NULL
Command: Connect
   Time: 11
  State: Waiting for master to send event
   Info: NULL
*************************** 2. row ***************************
     Id: 11
   User: system user
   Host:
     db: NULL
Command: Connect
   Time: 11
  State: Has read all relay log; waiting for the slave I/O
         thread to update it
   Info: NULL
</pre><p>
      The <code class="literal">State</code> information indicates that thread 10
      is the I/O thread that is communicating with the master server,
      and thread 11 is the SQL thread that is processing the updates
      stored in the relay logs. At the time that
      <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> was run, both
      threads were idle, waiting for further updates.
    </p><p>
      The value in the <code class="literal">Time</code> column can show how late
      the slave is compared to the master. See
      <a class="xref" href="faqs.html#faqs-replication" title="A.13 MySQL 5.5 FAQ: Replication">Section A.13, “MySQL 5.5 FAQ: Replication”</a>. If sufficient time elapses on
      the master side without activity on the <code class="literal">Binlog
      Dump</code> thread, the master determines that the slave is no
      longer connected. As for any other client connection, the timeouts
      for this depend on the values of
      <code class="option">net_write_timeout</code> and
      <code class="option">net_retry_count</code>; for more information about
      these, see <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4 Server System Variables">Section 5.1.4, “Server System Variables”</a>.
    </p><p>
      The <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> statement
      provides additional information about replication processing on a
      slave server. See
      <a class="xref" href="replication.html#replication-administration-status" title="17.1.4.1 Checking Replication Status">Section 17.1.4.1, “Checking Replication Status”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="slave-logs"></a>17.2.2 Replication Relay and Status Logs</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#slave-logs-relaylog">17.2.2.1 The Slave Relay Log</a></span></dt><dt><span class="section"><a href="replication.html#slave-logs-status">17.2.2.2 Slave Status Logs</a></span></dt></dl>
</div>
<p>
      During replication, a slave server creates several logs that hold
      the binary log events relayed from the master to the slave, and to
      record information about the current status and location within
      the relay log. There are three types of logs used in the process,
      listed here:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          The <span class="emphasis"><em>relay log</em></span> consists of the events read
          from the binary log of the master and written by the slave I/O
          thread. Events in the relay log are executed on the slave as
          part of the SQL thread.
        </p></li><li class="listitem"><p>
          The <em class="firstterm">master info log</em> contains status and
          current configuration information for the slave's
          connection to the master. This log holds information on the
          master host name, login credentials, and coordinates
          indicating how far the slave has read from the master's binary
          log.
        </p></li><li class="listitem"><p>
          The <em class="firstterm">relay log info log</em> holds status
          information about the execution point within the slave's
          relay log.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="slave-logs-relaylog"></a>17.2.2.1 The Slave Relay Log</h4>

</div>

</div>

</div>
<p>
        The relay log, like the binary log, consists of a set of
        numbered files containing events that describe database changes,
        and an index file that contains the names of all used relay log
        files.
      </p><p>
        The term <span class="quote">“<span class="quote">relay log file</span>”</span> generally denotes an
        individual numbered file containing database events. The term
        <span class="quote">“<span class="quote">relay log</span>”</span> collectively denotes the set of
        numbered relay log files plus the index file.
      </p><p>
        Relay log files have the same format as binary log files and can
        be read using <a class="link" href="programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a> (see
        <a class="xref" href="programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog — Utility for Processing Binary Log Files">Section 4.6.7, “<span class="command"><strong>mysqlbinlog</strong></span> — Utility for Processing Binary Log Files”</a>).
      </p><p>
        By default, relay log file names have the form
        <code class="filename"><em class="replaceable"><code>host_name</code></em>-relay-bin.<em class="replaceable"><code>nnnnnn</code></em></code>
        in the data directory, where
        <em class="replaceable"><code>host_name</code></em> is the name of the slave
        server host and <em class="replaceable"><code>nnnnnn</code></em> is a sequence
        number. Successive relay log files are created using successive
        sequence numbers, beginning with <code class="literal">000001</code>. The
        slave uses an index file to track the relay log files currently
        in use. The default relay log index file name is
        <code class="filename"><em class="replaceable"><code>host_name</code></em>-relay-bin.index</code>
        in the data directory.
      </p><p>
        The default relay log file and relay log index file names can be
        overridden with, respectively, the
        <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> and
        <a class="link" href="replication.html#option_mysqld_relay-log-index"><code class="option">--relay-log-index</code></a> server options
        (see <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>).
      </p><p>
        If a slave uses the default host-based relay log file names,
        changing a slave's host name after replication has been set up
        can cause replication to fail with the errors <span class="errortext">Failed
        to open the relay log</span> and <span class="errortext">Could not find
        target log during relay log initialization</span>. This is
        a known issue (see Bug #2122). If you anticipate that a slave's
        host name might change in the future (for example, if networking
        is set up on the slave such that its host name can be modified
        using DHCP), you can avoid this issue entirely by using the
        <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> and
        <a class="link" href="replication.html#option_mysqld_relay-log-index"><code class="option">--relay-log-index</code></a> options to
        specify relay log file names explicitly when you initially set
        up the slave. This will make the names independent of server
        host name changes.
      </p><p>
        If you encounter the issue after replication has already begun,
        one way to work around it is to stop the slave server, prepend
        the contents of the old relay log index file to the new one, and
        then restart the slave. On a Unix system, this can be done as
        shown here:
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>cat <em class="replaceable"><code>new_relay_log_name</code></em>.index &gt;&gt; <em class="replaceable"><code>old_relay_log_name</code></em>.index</code></strong>
shell&gt; <strong class="userinput"><code>mv <em class="replaceable"><code>old_relay_log_name</code></em>.index <em class="replaceable"><code>new_relay_log_name</code></em>.index</code></strong>
</pre><p>
        A slave server creates a new relay log file under the following
        conditions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Each time the I/O thread starts.
          </p></li><li class="listitem"><p>
            When the logs are flushed; for example, with
            <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>
            or <a class="link" href="programs.html#mysqladmin" title="4.5.2 mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin flush-logs</strong></span></a>.
          </p></li><li class="listitem"><p>
            When the size of the current relay log file becomes
            <span class="quote">“<span class="quote">too large,</span>”</span> determined as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                If the value of
                <a class="link" href="server-administration.html#sysvar_max_relay_log_size"><code class="literal">max_relay_log_size</code></a> is
                greater than 0, that is the maximum relay log file size.
              </p></li><li class="listitem"><p>
                If the value of
                <a class="link" href="server-administration.html#sysvar_max_relay_log_size"><code class="literal">max_relay_log_size</code></a> is
                0, <a class="link" href="replication.html#sysvar_max_binlog_size"><code class="literal">max_binlog_size</code></a>
                determines the maximum relay log file size.
</p></li></ul>
</div>
</li></ul>
</div>
<p>
        The SQL thread automatically deletes each relay log file as soon
        as it has executed all events in the file and no longer needs
        it. There is no explicit mechanism for deleting relay logs
        because the SQL thread takes care of doing so. However,
        <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>
        rotates relay logs, which influences when the SQL thread deletes
        them.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="slave-logs-status"></a>17.2.2.2 Slave Status Logs</h4>

</div>

</div>

</div>
<p>
        A replication slave server creates two logs. By default, these
        logs are files named <code class="filename">master.info</code> and
        <code class="filename">relay-log.info</code> and created in the data
        directory. The names and locations of these files can be changed
        by using the <a class="link" href="replication.html#option_mysqld_master-info-file"><code class="option">--master-info-file</code></a>
        and <a class="link" href="replication.html#option_mysqld_relay-log-info-file"><code class="option">--relay-log-info-file</code></a>
        options, respectively. See
        <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>.
      </p><p>
        The two status logs contain information like that shown in the
        output of the <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>
        statement, which is discussed in
        <a class="xref" href="sql-syntax.html#replication-slave-sql" title="13.4.2 SQL Statements for Controlling Slave Servers">Section 13.4.2, “SQL Statements for Controlling Slave Servers”</a>. Because the status logs
        are stored on disk, they survive a slave server's shutdown.
        The next time the slave starts up, it reads the two logs to
        determine how far it has proceeded in reading binary logs from
        the master and in processing its own relay logs.
      </p><p>
        The master info log should be protected because it contains the
        password for connecting to the master. See
        <a class="xref" href="security.html#password-logging" title="6.1.2.3 Passwords and Logging">Section 6.1.2.3, “Passwords and Logging”</a>.
      </p><p>
        The slave I/O thread updates the master info log. The following
        table shows the correspondence between the lines in the
        <code class="filename">master.info</code> file and the columns displayed
        by <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>.
</p>
<div class="informaltable">
<table summary="This table shows the correspondence between the lines
          in the master.info file and the columns
          displayed by SHOW SLAVE
          STATUS." border="1"><colgroup><col><col><col></colgroup><thead><tr><th scope="col">Line in <code class="filename">master.info</code></th><th scope="col"><code class="literal">SHOW SLAVE STATUS</code> Column</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row">1</td><td> </td><td>Number of lines in the file</td></tr><tr><td scope="row">2</td><td><code class="literal">Master_Log_File</code></td><td>The name of the master binary log currently being read from the master</td></tr><tr><td scope="row">3</td><td><code class="literal">Read_Master_Log_Pos</code></td><td>The current position within the master binary log that have been read
                from the master</td></tr><tr><td scope="row">4</td><td><code class="literal">Master_Host</code></td><td>The host name of the master</td></tr><tr><td scope="row">5</td><td><code class="literal">Master_User</code></td><td>The user name used to connect to the master</td></tr><tr><td scope="row">6</td><td>Password (not shown by <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>)</td><td>The password used to connect to the master</td></tr><tr><td scope="row">7</td><td><code class="literal">Master_Port</code></td><td>The network port used to connect to the master</td></tr><tr><td scope="row">8</td><td><code class="literal">Connect_Retry</code></td><td>The period (in seconds) that the slave will wait before trying to
                reconnect to the master</td></tr><tr><td scope="row">9</td><td><code class="literal">Master_SSL_Allowed</code></td><td>Indicates whether the server supports SSL connections</td></tr><tr><td scope="row">10</td><td><code class="literal">Master_SSL_CA_File</code></td><td>The file used for the Certificate Authority (CA) certificate</td></tr><tr><td scope="row">11</td><td><code class="literal">Master_SSL_CA_Path</code></td><td>The path to the Certificate Authority (CA) certificates</td></tr><tr><td scope="row">12</td><td><code class="literal">Master_SSL_Cert</code></td><td>The name of the SSL certificate file</td></tr><tr><td scope="row">13</td><td><code class="literal">Master_SSL_Cipher</code></td><td>The list of possible ciphers used in the handshake for the SSL
                connection</td></tr><tr><td scope="row">14</td><td><code class="literal">Master_SSL_Key</code></td><td>The name of the SSL key file</td></tr><tr><td scope="row">15</td><td><code class="literal">Master_SSL_Verify_Server_Cert</code></td><td>Whether to verify the server certificate</td></tr><tr><td scope="row">17</td><td><code class="literal">Replicate_Ignore_Server_Ids</code></td><td>The number of server IDs to be ignored, followed by the actual server
IDs</td></tr></tbody></table>
</div>
<p>
        The slave SQL thread updates the relay log info log. The
        following table shows the correspondence between the lines in
        the <code class="filename">relay-log.info</code> file and the columns
        displayed by <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>.
</p>
<div class="informaltable">
<table summary="This table shows the correspondence between the lines
          in the relay-log.info file and the
          columns displayed by SHOW SLAVE
          STATUS." border="1"><colgroup><col><col><col></colgroup><thead><tr><th scope="col">Line in <code class="filename">relay-log.info</code></th><th scope="col"><code class="literal">SHOW SLAVE STATUS</code> Column</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row">1</td><td><code class="literal">Relay_Log_File</code></td><td>The name of the current relay log file</td></tr><tr><td scope="row">2</td><td><code class="literal">Relay_Log_Pos</code></td><td>The current position within the relay log file; events up to this
                position have been executed on the slave database</td></tr><tr><td scope="row">3</td><td><code class="literal">Relay_Master_Log_File</code></td><td>The name of the master binary log file from which the events in the
                relay log file were read</td></tr><tr><td scope="row">4</td><td><code class="literal">Exec_Master_Log_Pos</code></td><td>The equivalent position within the master's binary log file of events
that have already been executed</td></tr></tbody></table>
</div>
<p>
        The contents of the <code class="filename">relay-log.info</code> file and
        the states shown by the <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE
        STATUS</code></a> statement might not match if the
        <code class="filename">relay-log.info</code> file has not been flushed to
        disk. Ideally, you should only view
        <code class="filename">relay-log.info</code> on a slave that is offline
        (that is, <code class="literal">mysqld</code> is not running). For a
        running system, <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>
        should be used.
      </p><p>
        When you back up the slave's data, you should back up these
        two status logs, along with the relay log files. The status logs
        are needed to resume replication after you restore the data from
        the slave. If you lose the relay logs but still have the relay
        log info log, you can check it to determine how far the SQL
        thread has executed in the master binary logs. Then you can use
        <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> with the
        <code class="literal">MASTER_LOG_FILE</code> and
        <code class="literal">MASTER_LOG_POS</code> options to tell the slave to
        re-read the binary logs from that point. Of course, this
        requires that the binary logs still exist on the master.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-rules"></a>17.2.3 How Servers Evaluate Replication Filtering Rules</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-rules-db-options">17.2.3.1 Evaluation of Database-Level Replication and Binary Logging Options</a></span></dt><dt><span class="section"><a href="replication.html#replication-rules-table-options">17.2.3.2 Evaluation of Table-Level Replication Options</a></span></dt><dt><span class="section"><a href="replication.html#replication-rules-examples">17.2.3.3 Replication Rule Application</a></span></dt></dl>
</div>
<p>
      If a master server does not write a statement to its binary log,
      the statement is not replicated. If the server does log the
      statement, the statement is sent to all slaves and each slave
      determines whether to execute it or ignore it.
    </p><p>
      On the master, you can control which databases to log changes for
      by using the <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> and
      <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a> options to
      control binary logging. For a description of the rules that
      servers use in evaluating these options, see
      <a class="xref" href="replication.html#replication-rules-db-options" title="17.2.3.1 Evaluation of Database-Level Replication and Binary Logging Options">Section 17.2.3.1, “Evaluation of Database-Level Replication and Binary Logging Options”</a>. You should not use
      these options to control which databases and tables are
      replicated. Instead, use filtering on the slave to control the
      events that are executed on the slave.
    </p><p>
      On the slave side, decisions about whether to execute or ignore
      statements received from the master are made according to the
      <code class="option">--replicate-*</code> options that the slave was started
      with. (See <a class="xref" href="replication.html#replication-options" title="17.1.3 Replication and Binary Logging Options and Variables">Section 17.1.3, “Replication and Binary Logging Options and Variables”</a>.)
    </p><p>
      In the simplest case, when there are no
      <code class="option">--replicate-*</code> options, the slave executes all
      statements that it receives from the master. Otherwise, the result
      depends on the particular options given.
    </p><p>
      Database-level options
      (<a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>,
      <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a>) are checked
      first; see <a class="xref" href="replication.html#replication-rules-db-options" title="17.2.3.1 Evaluation of Database-Level Replication and Binary Logging Options">Section 17.2.3.1, “Evaluation of Database-Level Replication and Binary Logging Options”</a>, for a
      description of this process. If no database-level options are
      used, option checking proceeds to any table-level options that may
      be in use (see <a class="xref" href="replication.html#replication-rules-table-options" title="17.2.3.2 Evaluation of Table-Level Replication Options">Section 17.2.3.2, “Evaluation of Table-Level Replication Options”</a>,
      for a discussion of these). If one or more database-level options
      are used but none are matched, the statement is not replicated.
    </p><p>
      To make it easier to determine what effect an option set will
      have, it is recommended that you avoid mixing <span class="quote">“<span class="quote">do</span>”</span>
      and <span class="quote">“<span class="quote">ignore</span>”</span> options, or wildcard and nonwildcard
      options. An example of the latter that may have unintended effects
      is the use of <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> and
      <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a> together,
      where <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a>
      uses a pattern for the database name that matches the name given
      for <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>. Suppose a
      replication slave is started with
      <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db=dbx</code></a>
      <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table=db%.t1</code></a>.
      Then, suppose that on the master, you issue the statement
      <a class="link" href="sql-syntax.html#create-database" title="13.1.10 CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE
      dbx</code></a>. Although you might expect it, this statement is not
      replicated because it does not reference a table named
      <code class="literal">t1</code>.
    </p><p>
      If any <a class="link" href="replication.html#option_mysqld_replicate-rewrite-db"><code class="option">--replicate-rewrite-db</code></a>
      options were specified, they are applied before the
      <code class="option">--replicate-*</code> filtering rules are tested.
</p><a class="indexterm" name="idm140301480093760"></a><a class="indexterm" name="idm140301480092256"></a>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        In MySQL 5.5, database-level filtering options are
        case-sensitive on platforms supporting case sensitivity in
        filenames, whereas table-level filtering options are not
        (regardless of platform). This is true regardless of the value
        of the <a class="link" href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
        system variable.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-rules-db-options"></a>17.2.3.1 Evaluation of Database-Level Replication and Binary Logging Options</h4>

</div>

</div>

</div>
<p>
        When evaluating replication options, the slave begins by
        checking to see whether there are any
        <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> or
        <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a> options
        that apply. When using
        <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> or
        <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a>, the process
        is similar, but the options are checked on the master.
      </p><p>
        With statement-based replication, the default database is
        checked for a match. With row-based replication, the database
        where data is to be changed is the database that is checked.
        Regardless of the binary logging format, checking of
        database-level options proceeds as shown in the following
        diagram.
</p>
<div class="mediaobject">
<img src="images/replication-filtering-db-rules.png" width="600" height="635" alt="Evaluation of Database-Level Filtering Rules in Replication">
</div>
<p>
        The steps involved are listed here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Are there any
            <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Do any of them match the database?

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Yes. </b>
                          Execute the statement and exit.
                        </p></li><li class="listitem"><p><b>No. </b>
                          Ignore the statement and exit.
</p></li></ul>
</div>
<p>
                </p></li><li class="listitem"><p><b>No. </b>
                  Continue to step 2.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Are there any
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a>
            options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Do any of them match the database?

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Yes. </b>
                          Ignore the statement and exit.
                        </p></li><li class="listitem"><p><b>No. </b>
                          Continue to step 3.
</p></li></ul>
</div>
<p>
                </p></li><li class="listitem"><p><b>No. </b>
                  Continue to step 3.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Proceed to checking the table-level replication options, if
            there are any. For a description of how these options are
            checked, see
            <a class="xref" href="replication.html#replication-rules-table-options" title="17.2.3.2 Evaluation of Table-Level Replication Options">Section 17.2.3.2, “Evaluation of Table-Level Replication Options”</a>.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              A statement that is still permitted at this stage is not
              yet actually executed. The statement is not executed until
              all table-level options (if any) have also been checked,
              and the outcome of that process permits execution of the
              statement.
</p>
</div>
</li></ol>
</div>
<p>
        For binary logging, the steps involved are listed here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Are there any <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a>
            or <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a>
            options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Continue to step 2.
                </p></li><li class="listitem"><p><b>No. </b>
                  Log the statement and exit.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Is there a default database (has any database been selected
            by <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a>)?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Continue to step 3.
                </p></li><li class="listitem"><p><b>No. </b>
                  Ignore the statement and exit.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            There is a default database. Are there any
            <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Do any of them match the database?

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Yes. </b>
                          Log the statement and exit.
                        </p></li><li class="listitem"><p><b>No. </b>
                          Ignore the statement and exit.
</p></li></ul>
</div>
<p>
                </p></li><li class="listitem"><p><b>No. </b>
                  Continue to step 4.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Do any of the
            <a class="link" href="replication.html#option_mysqld_binlog-ignore-db"><code class="option">--binlog-ignore-db</code></a> options
            match the database?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Ignore the statement and exit.
                </p></li><li class="listitem"><p><b>No. </b>
                  Log the statement and exit.
</p></li></ul>
</div>
</li></ol>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
          For statement-based logging, an exception is made in the rules
          just given for the <a class="link" href="sql-syntax.html#create-database" title="13.1.10 CREATE DATABASE Syntax"><code class="literal">CREATE
          DATABASE</code></a>, <a class="link" href="sql-syntax.html#alter-database" title="13.1.1 ALTER DATABASE Syntax"><code class="literal">ALTER
          DATABASE</code></a>, and <a class="link" href="sql-syntax.html#drop-database" title="13.1.21 DROP DATABASE Syntax"><code class="literal">DROP
          DATABASE</code></a> statements. In those cases, the database
          being <span class="emphasis"><em>created, altered, or dropped</em></span>
          replaces the default database when determining whether to log
          or ignore updates.
</p>
</div>
<p>
        <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db</code></a> can sometimes mean
        <span class="quote">“<span class="quote">ignore other databases</span>”</span>. For example, when using
        statement-based logging, a server running with only
        <a class="link" href="replication.html#option_mysqld_binlog-do-db"><code class="option">--binlog-do-db=sales</code></a> does not
        write to the binary log statements for which the default
        database differs from <code class="literal">sales</code>. When using
        row-based logging with the same option, the server logs only
        those updates that change data in <code class="literal">sales</code>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-rules-table-options"></a>17.2.3.2 Evaluation of Table-Level Replication Options</h4>

</div>

</div>

</div>
<p>
        The slave checks for and evaluates table options only if either
        of the following two conditions is true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            No matching database options were found.
          </p></li><li class="listitem"><p>
            One or more database options were found, and were evaluated
            to arrive at an <span class="quote">“<span class="quote">execute</span>”</span> condition according
            to the rules described in the previous section (see
            <a class="xref" href="replication.html#replication-rules-db-options" title="17.2.3.1 Evaluation of Database-Level Replication and Binary Logging Options">Section 17.2.3.1, “Evaluation of Database-Level Replication and Binary Logging Options”</a>).
</p></li></ul>
</div>
<p>
        First, as a preliminary condition, the slave checks whether
        statement-based replication is enabled. If so, and the statement
        occurs within a stored function, the slave executes the
        statement and exits. If row-based replication is enabled, the
        slave does not know whether a statement occurred within a stored
        function on the master, so this condition does not apply.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          For statement-based replication, replication events represent
          statements (all changes making up a given event are associated
          with a single SQL statement); for row-based replication, each
          event represents a change in a single table row (thus a single
          statement such as <code class="literal">UPDATE mytable SET mycol =
          1</code> may yield many row-based events). When viewed in
          terms of events, the process of checking table options is the
          same for both row-based and statement-based replication.
</p>
</div>
<p>
        Having reached this point, if there are no table options, the
        slave simply executes all events. If there are any
        <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a> or
        <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a>
        options, the event must match one of these if it is to be
        executed; otherwise, it is ignored. If there are any
        <a class="link" href="replication.html#option_mysqld_replicate-ignore-table"><code class="option">--replicate-ignore-table</code></a> or
        <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table</code></a>
        options, all events are executed except those that match any of
        these options. This process is illustrated in the following
        diagram.
</p>
<div class="mediaobject">
<img src="images/replication-filtering-tbl-rules.png" width="585" height="1245" alt="Evaluation of Table-Level Filtering Rules in Replication">
</div>
<p>
        The following steps describe this evaluation in more detail:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Are there any table options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Continue to step 2.
                </p></li><li class="listitem"><p><b>No. </b>
                  Execute the event and exit.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Are there any
            <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a> options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Does the table match any of them?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Yes. </b>
                      Execute the event and exit.
                    </p></li><li class="listitem"><p><b>No. </b>
                      Continue to step 3.
</p></li></ul>
</div>
</li><li class="listitem"><p><b>No. </b>
                  Continue to step 3.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Are there any
            <a class="link" href="replication.html#option_mysqld_replicate-ignore-table"><code class="option">--replicate-ignore-table</code></a>
            options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Does the table match any of them?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Yes. </b>
                      Ignore the event and exit.
                    </p></li><li class="listitem"><p><b>No. </b>
                      Continue to step 4.
</p></li></ul>
</div>
</li><li class="listitem"><p><b>No. </b>
                  Continue to step 4.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Are there any
            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a>
            options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Does the table match any of them?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Yes. </b>
                      Execute the event and exit.
                    </p></li><li class="listitem"><p><b>No. </b>
                      Continue to step 5.
</p></li></ul>
</div>
</li><li class="listitem"><p><b>No. </b>
                  Continue to step 5.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Are there any
            <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table</code></a>
            options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Does the table match any of them?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>Yes. </b>
                      Ignore the event and exit.
                    </p></li><li class="listitem"><p><b>No. </b>
                      Continue to step 6.
</p></li></ul>
</div>
</li><li class="listitem"><p><b>No. </b>
                  Continue to step 6.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            Are there any
            <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a> or
            <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a>
            options?
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Yes. </b>
                  Ignore the event and exit.
                </p></li><li class="listitem"><p><b>No. </b>
                  Execute the event and exit.
</p></li></ul>
</div>
</li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-rules-examples"></a>17.2.3.3 Replication Rule Application</h4>

</div>

</div>

</div>
<p>
        This section provides additional explanation and examples of
        usage for different combinations of replication filtering
        options.
      </p><p>
        Some typical combinations of replication filter rule types are
        given in the following table:
</p>
<div class="informaltable">
<table summary="This table shows typical combinations of replication
          filter rule types and describes the outcome of each." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Condition (Types of Options)</th><th scope="col">Outcome</th></tr></thead><tbody><tr><td scope="row">No <code class="option">--replicate-*</code> options at all:</td><td>The slave executes all events that it receives from the master.</td></tr><tr><td scope="row"><code class="option">--replicate-*-db</code> options, but no table options:</td><td>The slave accepts or ignores events using the database options. It
                executes all events permitted by those options because
                there are no table restrictions.</td></tr><tr><td scope="row"><code class="option">--replicate-*-table</code> options, but no database options:</td><td>All events are accepted at the database-checking stage because there are
                no database conditions. The slave executes or ignores
                events based solely on the table options.</td></tr><tr><td scope="row">A combination of database and table options:</td><td>The slave accepts or ignores events using the database options. Then it
                evaluates all events permitted by those options
                according to the table options. This can sometimes lead
                to results that seem counterintuitive, and that may be
                different depending on whether you are using
                statement-based or row-based replication; see the text
for an example.</td></tr></tbody></table>
</div>
<p>
        A more complex example follows, in which we examine the outcomes
        for both statement-based and row-based settings.
      </p><p>
        Suppose that we have two tables <code class="literal">mytbl1</code> in
        database <code class="literal">db1</code> and <code class="literal">mytbl2</code> in
        database <code class="literal">db2</code> on the master, and the slave is
        running with the following options (and no other replication
        filtering options):
      </p><pre class="programlisting">
replicate-ignore-db = db1
replicate-do-table  = db2.tbl2
</pre><p>
        Now we execute the following statements on the master:
      </p><pre class="programlisting">
USE db1;
INSERT INTO db2.tbl2 VALUES (1);
</pre><p>
        The results on the slave vary considerably depending on the
        binary log format, and may not match initial expectations in
        either case.
      </p><p><b>Statement-based replication. </b>
          The <code class="literal">USE</code> statement causes
          <code class="literal">db1</code> to be the default database. Thus the
          <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a> option
          matches, <span class="emphasis"><em>and the
          <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statement is
          ignored</em></span>. The table options are not checked.
        </p><p><b>Row-based replication. </b>
          The default database has no effect on how the slave reads
          database options when using row-based replication. Thus, the
          <a class="link" href="sql-syntax.html#use" title="13.8.4 USE Syntax"><code class="literal">USE</code></a> statement makes no
          difference in how the
          <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a> option is
          handled: the database specified by this option does not match
          the database where the <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a>
          statement changes data, so the slave proceeds to check the
          table options. The table specified by
          <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a> matches
          the table to be updated, <span class="emphasis"><em>and the row is
          inserted</em></span>.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="replication-solutions"></a>17.3 Replication Solutions</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-solutions-backups">17.3.1 Using Replication for Backups</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-diffengines">17.3.2 Using Replication with Different Master and Slave Storage Engines</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-scaleout">17.3.3 Using Replication for Scale-Out</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-partitioning">17.3.4 Replicating Different Databases to Different Slaves</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-performance">17.3.5 Improving Replication Performance</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-switch">17.3.6 Switching Masters During Failover</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-ssl">17.3.7 Setting Up Replication Using SSL</a></span></dt><dt><span class="section"><a href="replication.html#replication-semisync">17.3.8 Semisynchronous Replication</a></span></dt></dl>
</div>
<p>
    Replication can be used in many different environments for a range
    of purposes. This section provides general notes and advice on using
    replication for specific solution types.
  </p><p>
    For information on using replication in a backup environment,
    including notes on the setup, backup procedure, and files to back
    up, see <a class="xref" href="replication.html#replication-solutions-backups" title="17.3.1 Using Replication for Backups">Section 17.3.1, “Using Replication for Backups”</a>.
  </p><p>
    For advice and tips on using different storage engines on the master
    and slaves, see <a class="xref" href="replication.html#replication-solutions-diffengines" title="17.3.2 Using Replication with Different Master and Slave Storage Engines">Section 17.3.2, “Using Replication with Different Master and Slave Storage Engines”</a>.
  </p><p>
    Using replication as a scale-out solution requires some changes in
    the logic and operation of applications that use the solution. See
    <a class="xref" href="replication.html#replication-solutions-scaleout" title="17.3.3 Using Replication for Scale-Out">Section 17.3.3, “Using Replication for Scale-Out”</a>.
  </p><p>
    For performance or data distribution reasons, you may want to
    replicate different databases to different replication slaves. See
    <a class="xref" href="replication.html#replication-solutions-partitioning" title="17.3.4 Replicating Different Databases to Different Slaves">Section 17.3.4, “Replicating Different Databases to Different Slaves”</a>
  </p><p>
    As the number of replication slaves increases, the load on the
    master can increase and lead to reduced performance (because of the
    need to replicate the binary log to each slave). For tips on
    improving your replication performance, including using a single
    secondary server as an replication master, see
    <a class="xref" href="replication.html#replication-solutions-performance" title="17.3.5 Improving Replication Performance">Section 17.3.5, “Improving Replication Performance”</a>.
  </p><p>
    For guidance on switching masters, or converting slaves into masters
    as part of an emergency failover solution, see
    <a class="xref" href="replication.html#replication-solutions-switch" title="17.3.6 Switching Masters During Failover">Section 17.3.6, “Switching Masters During Failover”</a>.
  </p><p>
    To secure your replication communication, you can use SSL to encrypt
    the communication channel. For step-by-step instructions, see
    <a class="xref" href="replication.html#replication-solutions-ssl" title="17.3.7 Setting Up Replication Using SSL">Section 17.3.7, “Setting Up Replication Using SSL”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-solutions-backups"></a>17.3.1 Using Replication for Backups</h3>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-solutions-backups-mysqldump">17.3.1.1 Backing Up a Slave Using mysqldump</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-backups-rawdata">17.3.1.2 Backing Up Raw Data from a Slave</a></span></dt><dt><span class="section"><a href="replication.html#replication-solutions-backups-read-only">17.3.1.3 Backing Up a Master or Slave by Making It Read Only</a></span></dt></dl>
</div>
<p>
      To use replication as a backup solution, replicate data from the
      master to a slave, and then back up the data slave. The slave can
      be paused and shut down without affecting the running operation of
      the master, so you can produce an effective snapshot of
      <span class="quote">“<span class="quote">live</span>”</span> data that would otherwise require the master
      to be shut down.
    </p><p>
      How you back up a database depends on its size and whether you are
      backing up only the data, or the data and the replication slave
      state so that you can rebuild the slave in the event of failure.
      There are therefore two choices:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If you are using replication as a solution to enable you to
          back up the data on the master, and the size of your database
          is not too large, the <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> tool may be
          suitable. See
          <a class="xref" href="replication.html#replication-solutions-backups-mysqldump" title="17.3.1.1 Backing Up a Slave Using mysqldump">Section 17.3.1.1, “Backing Up a Slave Using mysqldump”</a>.
        </p></li><li class="listitem"><p>
          For larger databases, where <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> would
          be impractical or inefficient, you can back up the raw data
          files instead. Using the raw data files option also means that
          you can back up the binary and relay logs that will enable you
          to recreate the slave in the event of a slave failure. For
          more information, see
          <a class="xref" href="replication.html#replication-solutions-backups-rawdata" title="17.3.1.2 Backing Up Raw Data from a Slave">Section 17.3.1.2, “Backing Up Raw Data from a Slave”</a>.
</p></li></ul>
</div>
<p>
      Another backup strategy, which can be used for either master or
      slave servers, is to put the server in a read-only state. The
      backup is performed against the read-only server, which then is
      changed back to its usual read/write operational status. See
      <a class="xref" href="replication.html#replication-solutions-backups-read-only" title="17.3.1.3 Backing Up a Master or Slave by Making It Read Only">Section 17.3.1.3, “Backing Up a Master or Slave by Making It Read Only”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-solutions-backups-mysqldump"></a>17.3.1.1 Backing Up a Slave Using mysqldump</h4>
</div>
</div>
</div>
<p>
        Using <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> to create a copy of a
        database enables you to capture all of the data in the database
        in a format that enables the information to be imported into
        another instance of MySQL Server (see
        <a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program">Section 4.5.4, “<span class="command"><strong>mysqldump</strong></span> — A Database Backup Program”</a>). Because the format of the
        information is SQL statements, the file can easily be
        distributed and applied to running servers in the event that you
        need access to the data in an emergency. However, if the size of
        your data set is very large, <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> may be
        impractical.
      </p><p>
        When using <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>, you should stop
        replication on the slave before starting the dump process to
        ensure that the dump contains a consistent set of data:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Stop the slave from processing requests. You can stop
            replication completely on the slave using
            <a class="link" href="programs.html#mysqladmin" title="4.5.2 mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a>:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin stop-slave</code></strong></pre><p>
            Alternatively, you can stop only the slave SQL thread to
            pause event execution:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -e 'STOP SLAVE SQL_THREAD;'</code></strong></pre><p>
            This enables the slave to continue to receive data change
            events from the master's binary log and store them in the
            relay logs using the I/O thread, but prevents the slave from
            executing these events and changing its data. Within busy
            replication environments, permitting the I/O thread to run
            during backup may speed up the catch-up process when you
            restart the slave SQL thread.
          </p></li><li class="listitem"><p>
            Run <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> to dump your databases. You
            may either dump all databases or select databases to be
            dumped. For example, to dump all databases:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqldump --all-databases &gt; fulldb.dump</code></strong></pre></li><li class="listitem"><p>
            Once the dump has completed, start slave operations again:
</p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin start-slave</code></strong></pre></li></ol>
</div>
<p>
        In the preceding example, you may want to add login credentials
        (user name, password) to the commands, and bundle the process up
        into a script that you can run automatically each day.
      </p><p>
        If you use this approach, make sure you monitor the slave
        replication process to ensure that the time taken to run the
        backup does not affect the slave's ability to keep up with
        events from the master. See
        <a class="xref" href="replication.html#replication-administration-status" title="17.1.4.1 Checking Replication Status">Section 17.1.4.1, “Checking Replication Status”</a>. If the
        slave is unable to keep up, you may want to add another slave
        and distribute the backup process. For an example of how to
        configure this scenario, see
        <a class="xref" href="replication.html#replication-solutions-partitioning" title="17.3.4 Replicating Different Databases to Different Slaves">Section 17.3.4, “Replicating Different Databases to Different Slaves”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-solutions-backups-rawdata"></a>17.3.1.2 Backing Up Raw Data from a Slave</h4>

</div>

</div>

</div>
<p>
        To guarantee the integrity of the files that are copied, backing
        up the raw data files on your MySQL replication slave should
        take place while your slave server is shut down. If the MySQL
        server is still running, background tasks may still be updating
        the database files, particularly those involving storage engines
        with background processes such as <code class="literal">InnoDB</code>.
        With <code class="literal">InnoDB</code>, these problems should be
        resolved during crash recovery, but since the slave server can
        be shut down during the backup process without affecting the
        execution of the master it makes sense to take advantage of this
        capability.
      </p><p>
        To shut down the server and back up the files:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Shut down the slave MySQL server:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin shutdown</code></strong></pre></li><li class="listitem"><p>
            Copy the data files. You can use any suitable copying or
            archive utility, including <span class="command"><strong>cp</strong></span>,
            <span class="command"><strong>tar</strong></span> or <span class="command"><strong>WinZip</strong></span>. For
            example, assuming that the data directory is located under
            the current directory, you can archive the entire directory
            as follows:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>tar cf /tmp/dbbackup.tar ./data</code></strong></pre></li><li class="listitem"><p>
            Start the MySQL server again. Under Unix:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqld_safe &amp;</code></strong></pre><p>
            Under Windows:
</p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld"</code></strong></pre></li></ol>
</div>
<p>
        Normally you should back up the entire data directory for the
        slave MySQL server. If you want to be able to restore the data
        and operate as a slave (for example, in the event of failure of
        the slave), then in addition to the slave's data, you should
        also back up the slave status files,
        <code class="filename">master.info</code> and
        <code class="filename">relay-log.info</code>, along with the relay log
        files. These files are needed to resume replication after you
        restore the slave's data.
      </p><p>
        If you lose the relay logs but still have the
        <code class="filename">relay-log.info</code> file, you can check it to
        determine how far the SQL thread has executed in the master
        binary logs. Then you can use <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
        TO</code></a> with the <code class="literal">MASTER_LOG_FILE</code> and
        <code class="literal">MASTER_LOG_POS</code> options to tell the slave to
        re-read the binary logs from that point. This requires that the
        binary logs still exist on the master server.
      </p><p>
        If your slave is replicating
        <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statements, you should also back up any
        <code class="filename">SQL_LOAD-*</code> files that exist in the
        directory that the slave uses for this purpose. The slave needs
        these files to resume replication of any interrupted
        <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> operations. The location of this directory is
        the value of the
        <a class="link" href="replication.html#option_mysqld_slave-load-tmpdir"><code class="option">--slave-load-tmpdir</code></a> option. If
        the server was not started with that option, the directory
        location is the value of the
        <a class="link" href="server-administration.html#sysvar_tmpdir"><code class="literal">tmpdir</code></a> system variable.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-solutions-backups-read-only"></a>17.3.1.3 Backing Up a Master or Slave by Making It Read Only</h4>

</div>

</div>

</div>
<p>
        It is possible to back up either master or slave servers in a
        replication setup by acquiring a global read lock and
        manipulating the <a class="link" href="server-administration.html#sysvar_read_only"><code class="literal">read_only</code></a>
        system variable to change the read-only state of the server to
        be backed up:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Make the server read-only, so that it processes only
            retrievals and blocks updates.
          </p></li><li class="listitem"><p>
            Perform the backup.
          </p></li><li class="listitem"><p>
            Change the server back to its normal read/write state.
</p></li></ol>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          The instructions in this section place the server to be backed
          up in a state that is safe for backup methods that get the
          data from the server, such as <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>
          (see <a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program">Section 4.5.4, “<span class="command"><strong>mysqldump</strong></span> — A Database Backup Program”</a>). You should not attempt to
          use these instructions to make a binary backup by copying
          files directly because the server may still have modified data
          cached in memory and not flushed to disk.
</p>
</div>
<p>
        The following instructions describe how to do this for a master
        server and for a slave server. For both scenarios discussed
        here, suppose that you have the following replication setup:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A master server M1
          </p></li><li class="listitem"><p>
            A slave server S1 that has M1 as its master
          </p></li><li class="listitem"><p>
            A client C1 connected to M1
          </p></li><li class="listitem"><p>
            A client C2 connected to S1
</p></li></ul>
</div>
<p>
        In either scenario, the statements to acquire the global read
        lock and manipulate the
        <a class="link" href="server-administration.html#sysvar_read_only"><code class="literal">read_only</code></a> variable are
        performed on the server to be backed up and do not propagate to
        any slaves of that server.
      </p><p>
        <span class="bold"><strong>Scenario 1: Backup with a Read-Only
        Master</strong></span>
      </p><p>
        Put the master M1 in a read-only state by executing these
        statements on it:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>FLUSH TABLES WITH READ LOCK;</code></strong>
mysql&gt; <strong class="userinput"><code>SET GLOBAL read_only = ON;</code></strong>
</pre><p>
        While M1 is in a read-only state, the following properties are
        true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Requests for updates sent by C1 to M1 will block because the
            server is in read-only mode.
          </p></li><li class="listitem"><p>
            Requests for query results sent by C1 to M1 will succeed.
          </p></li><li class="listitem"><p>
            Making a backup on M1 is safe.
          </p></li><li class="listitem"><p>
            Making a backup on S1 is not safe. This server is still
            running, and might be processing the binary log or update
            requests coming from client C2
</p></li></ul>
</div>
<p>
        While M1 is read only, perform the backup. For example, you can
        use <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>.
      </p><p>
        After the backup operation on M1 completes, restore M1 to its
        normal operational state by executing these statements:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SET GLOBAL read_only = OFF;</code></strong>
mysql&gt; <strong class="userinput"><code>UNLOCK TABLES;</code></strong>
</pre><p>
        Although performing the backup on M1 is safe (as far as the
        backup is concerned), it is not optimal for performance because
        clients of M1 are blocked from executing updates.
      </p><p>
        This strategy applies to backing up a master server in a
        replication setup, but can also be used for a single server in a
        nonreplication setting.
      </p><p>
        <span class="bold"><strong>Scenario 2: Backup with a Read-Only
        Slave</strong></span>
      </p><p>
        Put the slave S1 in a read-only state by executing these
        statements on it:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>FLUSH TABLES WITH READ LOCK;</code></strong>
mysql&gt; <strong class="userinput"><code>SET GLOBAL read_only = ON;</code></strong>
</pre><p>
        While S1 is in a read-only state, the following properties are
        true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The master M1 will continue to operate, so making a backup
            on the master is not safe.
          </p></li><li class="listitem"><p>
            The slave S1 is stopped, so making a backup on the slave S1
            is safe.
</p></li></ul>
</div>
<p>
        These properties provide the basis for a popular backup
        scenario: Having one slave busy performing a backup for a while
        is not a problem because it does not affect the entire network,
        and the system is still running during the backup. In
        particular, clients can still perform updates on the master
        server, which remains unaffected by backup activity on the
        slave.
      </p><p>
        While S1 is read only, perform the backup. For example, you can
        use <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>.
      </p><p>
        After the backup operation on S1 completes, restore S1 to its
        normal operational state by executing these statements:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SET GLOBAL read_only = OFF;</code></strong>
mysql&gt; <strong class="userinput"><code>UNLOCK TABLES;</code></strong>
</pre><p>
        After the slave is restored to normal operation, it again
        synchronizes to the master by catching up with any outstanding
        updates from the binary log of the master.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-solutions-diffengines"></a>17.3.2 Using Replication with Different Master and Slave Storage Engines</h3>

</div>

</div>

</div>
<p>
      It does not matter for the replication process whether the source
      table on the master and the replicated table on the slave use
      different engine types. In fact, the
      <a class="link" href="server-administration.html#sysvar_default_storage_engine"><code class="literal">default_storage_engine</code></a> and
      <a class="link" href="server-administration.html#sysvar_storage_engine"><code class="literal">storage_engine</code></a> system variables
      are not replicated.
    </p><p>
      This provides a number of benefits in the replication process in
      that you can take advantage of different engine types for
      different replication scenarios. For example, in a typical
      scale-out scenario (see
      <a class="xref" href="replication.html#replication-solutions-scaleout" title="17.3.3 Using Replication for Scale-Out">Section 17.3.3, “Using Replication for Scale-Out”</a>), you want to use
      <code class="literal">InnoDB</code> tables on the master to take advantage
      of the transactional functionality, but use
      <code class="literal">MyISAM</code> on the slaves where transaction support
      is not required because the data is only read. When using
      replication in a data-logging environment you may want to use the
      <code class="literal">Archive</code> storage engine on the slave.
    </p><p>
      Configuring different engines on the master and slave depends on
      how you set up the initial replication process:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If you used <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> to create the
          database snapshot on your master, you could edit the dump file
          text to change the engine type used on each table.
        </p><p>
          Another alternative for <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> is to
          disable engine types that you do not want to use on the slave
          before using the dump to build the data on the slave. For
          example, you can add the
          <a class="link" href="innodb-storage-engine.html#option_mysqld_innodb"><code class="option">--skip-innodb</code></a>
          option on your slave to disable the <code class="literal">InnoDB</code>
          engine. If a specific engine does not exist for a table to be
          created, MySQL will use the default engine type, usually
          <code class="literal">MyISAM</code>. (This requires that the
          <a class="link" href="server-administration.html#sqlmode_no_engine_substitution"><code class="literal">NO_ENGINE_SUBSTITUTION</code></a> SQL
          mode is not enabled.) If you want to disable additional
          engines in this way, you may want to consider building a
          special binary to be used on the slave that only supports the
          engines you want.
        </p></li><li class="listitem"><p>
          If you are using raw data files (a binary backup) to set up
          the slave, you will be unable to change the initial table
          format. Instead, use <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER
          TABLE</code></a> to change the table types after the slave has
          been started.
        </p></li><li class="listitem"><p>
          For new master/slave replication setups where there are
          currently no tables on the master, avoid specifying the engine
          type when creating new tables.
</p></li></ul>
</div>
<p>
      If you are already running a replication solution and want to
      convert your existing tables to another engine type, follow these
      steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Stop the slave from running replication updates:
        </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>STOP SLAVE;</code></strong>
</pre><p>
          This will enable you to change engine types without
          interruptions.
        </p></li><li class="listitem"><p>
          Execute an <code class="literal">ALTER TABLE ...
          ENGINE='<em class="replaceable"><code>engine_type</code></em>'</code> for
          each table to be changed.
        </p></li><li class="listitem"><p>
          Start the slave replication process again:
        </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre></li></ol>
</div>
<p>
      Although the
      <a class="link" href="server-administration.html#sysvar_default_storage_engine"><code class="literal">default_storage_engine</code></a> variable
      is not replicated, be aware that <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE
      TABLE</code></a> and <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
      statements that include the engine specification will be correctly
      replicated to the slave. For example, if you have a CSV table and
      you execute:
    </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>ALTER TABLE csvtable Engine='MyISAM';</code></strong>
</pre><p>
      The above statement will be replicated to the slave and the engine
      type on the slave will be converted to <code class="literal">MyISAM</code>,
      even if you have previously changed the table type on the slave to
      an engine other than CSV. If you want to retain engine differences
      on the master and slave, you should be careful to use the
      <a class="link" href="server-administration.html#sysvar_default_storage_engine"><code class="literal">default_storage_engine</code></a> variable
      on the master when creating a new table. For example, instead of:
    </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE tablea (columna int) Engine=MyISAM;</code></strong>
</pre><p>
      Use this format:
    </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SET default_storage_engine=MyISAM;</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE TABLE tablea (columna int);</code></strong>
</pre><p>
      When replicated, the
      <a class="link" href="server-administration.html#sysvar_default_storage_engine"><code class="literal">default_storage_engine</code></a> variable
      will be ignored, and the <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE
      TABLE</code></a> statement will execute on the slave using the
      slave's default engine.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-solutions-scaleout"></a>17.3.3 Using Replication for Scale-Out</h3>

</div>

</div>

</div>
<p>
      You can use replication as a scale-out solution; that is, where
      you want to split up the load of database queries across multiple
      database servers, within some reasonable limitations.
    </p><p>
      Because replication works from the distribution of one master to
      one or more slaves, using replication for scale-out works best in
      an environment where you have a high number of reads and low
      number of writes/updates. Most Web sites fit into this category,
      where users are browsing the Web site, reading articles, posts, or
      viewing products. Updates only occur during session management, or
      when making a purchase or adding a comment/message to a forum.
    </p><p>
      Replication in this situation enables you to distribute the reads
      over the replication slaves, while still enabling your web servers
      to communicate with the replication master when a write is
      required. You can see a sample replication layout for this
      scenario in <a class="xref" href="replication.html#figure_replication-scaleout" title="Figure 17.1 Using Replication to Improve Performance During Scale-Out">Figure 17.1, “Using Replication to Improve Performance During Scale-Out”</a>.
</p>
<div class="figure">
<a name="figure_replication-scaleout"></a><p class="title"><b>Figure 17.1 Using Replication to Improve Performance During Scale-Out</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/scaleout.png" width="687" height="341" alt="Using replication to improve performance during scale-out">
</div>

</div>

</div>
<br class="figure-break"><p>
      If the part of your code that is responsible for database access
      has been properly abstracted/modularized, converting it to run
      with a replicated setup should be very smooth and easy. Change the
      implementation of your database access to send all writes to the
      master, and to send reads to either the master or a slave. If your
      code does not have this level of abstraction, setting up a
      replicated system gives you the opportunity and motivation to
      clean it up. Start by creating a wrapper library or module that
      implements the following functions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">safe_writer_connect()</code>
        </p></li><li class="listitem"><p>
          <code class="literal">safe_reader_connect()</code>
        </p></li><li class="listitem"><p>
          <code class="literal">safe_reader_statement()</code>
        </p></li><li class="listitem"><p>
          <code class="literal">safe_writer_statement()</code>
</p></li></ul>
</div>
<p>
      <code class="literal">safe_</code> in each function name means that the
      function takes care of handling all error conditions. You can use
      different names for the functions. The important thing is to have
      a unified interface for connecting for reads, connecting for
      writes, doing a read, and doing a write.
    </p><p>
      Then convert your client code to use the wrapper library. This may
      be a painful and scary process at first, but it pays off in the
      long run. All applications that use the approach just described
      are able to take advantage of a master/slave configuration, even
      one involving multiple slaves. The code is much easier to
      maintain, and adding troubleshooting options is trivial. You need
      modify only one or two functions; for example, to log how long
      each statement took, or which statement among those issued gave
      you an error.
    </p><p>
      If you have written a lot of code, you may want to automate the
      conversion task by using the <a class="link" href="programs.html#replace-utility" title="4.8.2 replace — A String-Replacement Utility"><span class="command"><strong>replace</strong></span></a> utility
      that comes with standard MySQL distributions, or write your own
      conversion script. Ideally, your code uses consistent programming
      style conventions. If not, then you are probably better off
      rewriting it anyway, or at least going through and manually
      regularizing it to use a consistent style.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-solutions-partitioning"></a>17.3.4 Replicating Different Databases to Different Slaves</h3>

</div>

</div>

</div>
<p>
      There may be situations where you have a single master and want to
      replicate different databases to different slaves. For example,
      you may want to distribute different sales data to different
      departments to help spread the load during data analysis. A sample
      of this layout is shown in
      <a class="xref" href="replication.html#figure_replication-multi-db" title="Figure 17.2 Using Replication to Replicate Databases to Separate Replication Slaves">Figure 17.2, “Using Replication to Replicate Databases to Separate Replication Slaves”</a>.
</p>
<div class="figure">
<a name="figure_replication-multi-db"></a><p class="title"><b>Figure 17.2 Using Replication to Replicate Databases to Separate Replication Slaves</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/multi-db.png" width="424" height="178" alt="Using replication to replicate databases to separate replication slaves">
</div>

</div>

</div>
<br class="figure-break"><p>
      You can achieve this separation by configuring the master and
      slaves as normal, and then limiting the binary log statements that
      each slave processes by using the
      <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a>
      configuration option on each slave.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        You should <span class="emphasis"><em>not</em></span> use
        <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> for this
        purpose when using statement-based replication, since
        statement-based replication causes this option's affects to
        vary according to the database that is currently selected. This
        applies to mixed-format replication as well, since this enables
        some updates to be replicated using the statement-based format.
      </p><p>
        However, it should be safe to use
        <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> for this
        purpose if you are using row-based replication only, since in
        this case the currently selected database has no effect on the
        option's operation.
</p>
</div>
<p>
      For example, to support the separation as shown in
      <a class="xref" href="replication.html#figure_replication-multi-db" title="Figure 17.2 Using Replication to Replicate Databases to Separate Replication Slaves">Figure 17.2, “Using Replication to Replicate Databases to Separate Replication Slaves”</a>, you should
      configure each replication slave as follows, before executing
      <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START SLAVE</code></a>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Replication slave 1 should use
          <code class="option">--replicate-wild-do-table=databaseA.%</code>.
        </p></li><li class="listitem"><p>
          Replication slave 2 should use
          <code class="option">--replicate-wild-do-table=databaseB.%</code>.
        </p></li><li class="listitem"><p>
          Replication slave 3 should use
          <code class="option">--replicate-wild-do-table=databaseC.%</code>.
</p></li></ul>
</div>
<p>
      Each slave in this configuration receives the entire binary log
      from the master, but executes only those events from the binary
      log that apply to the databases and tables included by the
      <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a> option in
      effect on that slave.
    </p><p>
      If you have data that must be synchronized to the slaves before
      replication starts, you have a number of choices:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Synchronize all the data to each slave, and delete the
          databases, tables, or both that you do not want to keep.
        </p></li><li class="listitem"><p>
          Use <a class="link" href="programs.html#mysqldump" title="4.5.4 mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a> to create a separate dump
          file for each database and load the appropriate dump file on
          each slave.
        </p></li><li class="listitem"><p>
          Use a raw data file dump and include only the specific files
          and databases that you need for each slave.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            This does not work with <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a>
            databases unless you use
            <a class="link" href="innodb-storage-engine.html#sysvar_innodb_file_per_table"><code class="literal">innodb_file_per_table</code></a>.
</p>
</div>
</li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-solutions-performance"></a>17.3.5 Improving Replication Performance</h3>

</div>

</div>

</div>
<p>
      As the number of slaves connecting to a master increases, the
      load, although minimal, also increases, as each slave uses a
      client connection to the master. Also, as each slave must receive
      a full copy of the master binary log, the network load on the
      master may also increase and create a bottleneck.
    </p><p>
      If you are using a large number of slaves connected to one master,
      and that master is also busy processing requests (for example, as
      part of a scale-out solution), then you may want to improve the
      performance of the replication process.
    </p><p>
      One way to improve the performance of the replication process is
      to create a deeper replication structure that enables the master
      to replicate to only one slave, and for the remaining slaves to
      connect to this primary slave for their individual replication
      requirements. A sample of this structure is shown in
      <a class="xref" href="replication.html#figure_replication-performance" title="Figure 17.3 Using an Additional Replication Host to Improve Performance">Figure 17.3, “Using an Additional Replication Host to Improve Performance”</a>.
</p>
<div class="figure">
<a name="figure_replication-performance"></a><p class="title"><b>Figure 17.3 Using an Additional Replication Host to Improve Performance</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/submaster-performance.png" width="534" height="179" alt="Using an additional replication host to improve performance">
</div>

</div>

</div>
<br class="figure-break"><p>
      For this to work, you must configure the MySQL instances as
      follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Master 1 is the primary master where all changes and updates
          are written to the database. Binary logging should be enabled
          on this machine.
        </p></li><li class="listitem"><p>
          Master 2 is the slave to the Master 1 that provides the
          replication functionality to the remainder of the slaves in
          the replication structure. Master 2 is the only machine
          permitted to connect to Master 1. Master 2 also has binary
          logging enabled, and the
          <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> option so
          that replication instructions from Master 1 are also written
          to Master 2's binary log so that they can then be replicated
          to the true slaves.
        </p></li><li class="listitem"><p>
          Slave 1, Slave 2, and Slave 3 act as slaves to Master 2, and
          replicate the information from Master 2, which actually
          consists of the upgrades logged on Master 1.
</p></li></ul>
</div>
<p>
      The above solution reduces the client load and the network
      interface load on the primary master, which should improve the
      overall performance of the primary master when used as a direct
      database solution.
    </p><p>
      If your slaves are having trouble keeping up with the replication
      process on the master, there are a number of options available:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If possible, put the relay logs and the data files on
          different physical drives. To do this, use the
          <a class="link" href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log</code></a> option to specify
          the location of the relay log.
        </p></li><li class="listitem"><p>
          If the slaves are significantly slower than the master, you
          may want to divide up the responsibility for replicating
          different databases to different slaves. See
          <a class="xref" href="replication.html#replication-solutions-partitioning" title="17.3.4 Replicating Different Databases to Different Slaves">Section 17.3.4, “Replicating Different Databases to Different Slaves”</a>.
        </p></li><li class="listitem"><p>
          If your master makes use of transactions and you are not
          concerned about transaction support on your slaves, use
          <code class="literal">MyISAM</code> or another nontransactional engine
          on the slaves. See
          <a class="xref" href="replication.html#replication-solutions-diffengines" title="17.3.2 Using Replication with Different Master and Slave Storage Engines">Section 17.3.2, “Using Replication with Different Master and Slave Storage Engines”</a>.
        </p></li><li class="listitem"><p>
          If your slaves are not acting as masters, and you have a
          potential solution in place to ensure that you can bring up a
          master in the event of failure, then you can switch off
          <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a>. This
          prevents <span class="quote">“<span class="quote">dumb</span>”</span> slaves from also logging events
          they have executed into their own binary log.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-solutions-switch"></a>17.3.6 Switching Masters During Failover</h3>

</div>

</div>

</div>
<p>
      There is in MySQL 5.5 no official solution for
      providing failover between master and slaves in the event of a
      failure. Instead, you must set up a master and one or more slaves;
      then, you need to write an application or script that monitors the
      master to check whether it is up, and instructs the slaves and
      applications to change master in case of failure. This section
      discusses some of the issues encountered when setting up failover
      in this fashion.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        The MySQL Utilities include a <span class="command"><strong>mysqlfailover</strong></span>
        tool that provides failover capability using GTIDs, support for
        which requires MySQL 5.6 or later. For more information, see
        <a class="ulink" href="http://dev.mysql.com/doc/mysql-utilities/1.5/en/mysqlfailover.html" target="_top"><span class="command"><strong>mysqlfailover</strong></span> — Automatic replication health monitoring and failover</a>, and
        <a class="ulink" href="http://dev.mysql.com/doc/refman/5.6/en/replication-gtids.html" target="_top">Replication with Global Transaction Identifiers</a>.
</p>
</div>
<p>
      You can tell a slave to change to a new master using the
      <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement. The
      slave does not check whether the databases on the master are
      compatible with those on the slave; it simply begins reading and
      executing events from the specified coordinates in the new
      master's binary log. In a failover situation, all the servers
      in the group are typically executing the same events from the same
      binary log file, so changing the source of the events should not
      affect the structure or integrity of the database, provided that
      you exercise care in making the change.
    </p><p>
      Slaves should be run with the
      <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> option and without
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a>. In this way,
      the slave is ready to become a master without restarting the slave
      <a class="link" href="programs.html#mysqld" title="4.3.1 mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>. Assume that you have the structure
      shown in <a class="xref" href="replication.html#figure_replication-redundancy-before" title="Figure 17.4 Redundancy Using Replication, Initial Structure">Figure 17.4, “Redundancy Using Replication, Initial Structure”</a>.
    </p><p>
      Remember that you can tell a slave to change its master at any
      time, using the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>
      statement. The slave will not check whether the databases on the
      master are compatible with the slave, it will just start reading
      and executing events from the specified binary log coordinates on
      the new master. In a failover situation, all the servers in the
      group are typically executing the same events from the same binary
      log file, so changing the source of the events should not affect
      the database structure or integrity providing you are careful.
    </p><p>
      Run your slaves with the <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a>
      option and without
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a>. In this way,
      the slave is ready to become a master as soon as you issue
      <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a>;
      <a class="link" href="sql-syntax.html#reset-master" title="13.4.1.2 RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a>, and
      <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement on the
      other slaves. For example, assume that you have the structure
      shown in <a class="xref" href="replication.html#figure_replication-redundancy-before" title="Figure 17.4 Redundancy Using Replication, Initial Structure">Figure 17.4, “Redundancy Using Replication, Initial Structure”</a>.
</p>
<div class="figure">
<a name="figure_replication-redundancy-before"></a><p class="title"><b>Figure 17.4 Redundancy Using Replication, Initial Structure</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/redundancy-before.png" width="504" height="353" alt="Redundancy using replication, initial structure">
</div>

</div>

</div>
<br class="figure-break"><p>
      In this diagram, the <code class="literal">MySQL Master</code> holds the
      master database, the <code class="literal">MySQL Slave</code> hosts are
      replication slaves, and the <code class="literal">Web Client</code> machines
      are issuing database reads and writes. Web clients that issue only
      reads (and would normally be connected to the slaves) are not
      shown, as they do not need to switch to a new server in the event
      of failure. For a more detailed example of a read/write scale-out
      replication structure, see
      <a class="xref" href="replication.html#replication-solutions-scaleout" title="17.3.3 Using Replication for Scale-Out">Section 17.3.3, “Using Replication for Scale-Out”</a>.
    </p><p>
      Each MySQL Slave (<code class="literal">Slave 1</code>, <code class="literal">Slave
      2</code>, and <code class="literal">Slave 3</code>) is a slave running
      with <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> and without
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a>. Because
      updates received by a slave from the master are not logged in the
      binary log unless
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> is specified,
      the binary log on each slave is empty initially. If for some
      reason <code class="literal">MySQL Master</code> becomes unavailable, you
      can pick one of the slaves to become the new master. For example,
      if you pick <code class="literal">Slave 1</code>, all <code class="literal">Web
      Clients</code> should be redirected to <code class="literal">Slave
      1</code>, which writes the updates to its binary log.
      <code class="literal">Slave 2</code> and <code class="literal">Slave 3</code> should
      then replicate from <code class="literal">Slave 1</code>.
    </p><p>
      The reason for running the slave without
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> is to prevent
      slaves from receiving updates twice in case you cause one of the
      slaves to become the new master. If <code class="literal">Slave 1</code> has
      <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> enabled, it
      writes any updates that it receives from <code class="literal">Master</code>
      in its own binary log. This means that, when <code class="literal">Slave
      2</code> changes from <code class="literal">Master</code> to
      <code class="literal">Slave 1</code> as its master, it may receive updates
      from <code class="literal">Slave 1</code> that it has already received from
      <code class="literal">Master</code>.
    </p><p>
      Make sure that all slaves have processed any statements in their
      relay log. On each slave, issue <code class="literal">STOP SLAVE
      IO_THREAD</code>, then check the output of
      <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> until you see
      <code class="literal">Has read all relay log</code>. When this is true for
      all slaves, they can be reconfigured to the new setup. On the
      slave <code class="literal">Slave 1</code> being promoted to become the
      master, issue <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> and
      <a class="link" href="sql-syntax.html#reset-master" title="13.4.1.2 RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a>.
    </p><p>
      On the other slaves <code class="literal">Slave 2</code> and <code class="literal">Slave
      3</code>, use <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> and
      <code class="literal">CHANGE MASTER TO MASTER_HOST='Slave1'</code> (where
      <code class="literal">'Slave1'</code> represents the real host name of
      <code class="literal">Slave 1</code>). To use <code class="literal">CHANGE MASTER
      TO</code>, add all information about how to connect to
      <code class="literal">Slave 1</code> from <code class="literal">Slave 2</code> or
      <code class="literal">Slave 3</code> (<em class="replaceable"><code>user</code></em>,
      <em class="replaceable"><code>password</code></em>,
      <em class="replaceable"><code>port</code></em>). When issuing the <code class="literal">CHANGE
      MASTER TO</code> statement in this, there is no need to specify
      the name of the <code class="literal">Slave 1</code> binary log file or log
      position to read from, since the first binary log file and
      position 4, are the defaults. Finally, execute
      <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START SLAVE</code></a> on <code class="literal">Slave
      2</code> and <code class="literal">Slave 3</code>.
    </p><p>
      Once the new replication setup is in place, you need to tell each
      <code class="literal">Web Client</code> to direct its statements to
      <code class="literal">Slave 1</code>. From that point on, all updates
      statements sent by <code class="literal">Web Client</code> to <code class="literal">Slave
      1</code> are written to the binary log of <code class="literal">Slave
      1</code>, which then contains every update statement sent to
      <code class="literal">Slave 1</code> since <code class="literal">Master</code> died.
    </p><p>
      The resulting server structure is shown in
      <a class="xref" href="replication.html#figure_replication-redundancy-after" title="Figure 17.5 Redundancy Using Replication, After Master Failure">Figure 17.5, “Redundancy Using Replication, After Master Failure”</a>.
</p>
<div class="figure">
<a name="figure_replication-redundancy-after"></a><p class="title"><b>Figure 17.5 Redundancy Using Replication, After Master Failure</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/redundancy-after.png" width="538" height="432" alt="Redundancy using replication, after master failure">
</div>

</div>

</div>
<br class="figure-break"><p>
      When <code class="literal">Master</code> becomes available again, you should
      make it a slave of <code class="literal">Slave 1</code>. To do this, issue
      on <code class="literal">Master</code> the same <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE
      MASTER TO</code></a> statement as that issued on <code class="literal">Slave
      2</code> and <code class="literal">Slave 3</code> previously.
      <code class="literal">Master</code> then becomes a slave of <code class="literal">S1ave
      1</code> and picks up the <code class="literal">Web Client</code> writes
      that it missed while it was offline.
    </p><p>
      To make <code class="literal">Master</code> a master again (for example,
      because it is the most powerful machine), use the preceding
      procedure as if <code class="literal">Slave 1</code> was unavailable and
      <code class="literal">Master</code> was to be the new master. During this
      procedure, do not forget to run <a class="link" href="sql-syntax.html#reset-master" title="13.4.1.2 RESET MASTER Syntax"><code class="literal">RESET
      MASTER</code></a> on <code class="literal">Master</code> before making
      <code class="literal">Slave 1</code>, <code class="literal">Slave 2</code>, and
      <code class="literal">Slave 3</code> slaves of <code class="literal">Master</code>. If
      you fail to do this, the slaves may pick up stale writes from the
      <code class="literal">Web Client</code> applications dating from before the
      point at which <code class="literal">Master</code> became unavailable.
    </p><p>
      You should be aware that there is no synchronization between
      slaves, even when they share the same master, and thus some slaves
      might be considerably ahead of others. This means that in some
      cases the procedure outlined in the previous example might not
      work as expected. In practice, however, relay logs on all slaves
      should be relatively close together.
    </p><p>
      One way to keep applications informed about the location of the
      master is to have a dynamic DNS entry for the master. With
      <code class="literal">bind</code> you can use <code class="filename">nsupdate</code>
      to update the DNS dynamically.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-solutions-ssl"></a>17.3.7 Setting Up Replication Using SSL</h3>

</div>

</div>

</div>
<p>
      To use SSL for encrypting the transfer of the binary log required
      during replication, both the master and the slave must support SSL
      network connections. If either host does not support SSL
      connections (because it has not been compiled or configured for
      SSL), replication through an SSL connection is not possible.
    </p><p>
      Setting up replication using an SSL connection is similar to
      setting up a server and client using SSL. You must obtain (or
      create) a suitable security certificate that you can use on the
      master, and a similar certificate (from the same certificate
      authority) on each slave.
    </p><p>
      For more information on setting up a server and client for SSL
      connectivity, see <a class="xref" href="security.html#building-with-ssl-support" title="6.3.9.2 Building MySQL with SSL Support">Section 6.3.9.2, “Building MySQL with SSL Support”</a>.
    </p><p>
      To enable SSL on the master you must create or obtain suitable
      certificates, and then add the following configuration options to
      the master's configuration within the <code class="literal">[mysqld]</code>
      section of the master's <code class="filename">my.cnf</code> file:
    </p><pre class="programlisting">
[mysqld]
ssl-ca=<em class="replaceable"><code>cacert.pem</code></em>
ssl-cert=<em class="replaceable"><code>server-cert.pem</code></em>
ssl-key=<em class="replaceable"><code>server-key.pem</code></em>
</pre><p>
      The paths to the certificates may be relative or absolute; we
      recommend that you always use complete paths for this purpose.
    </p><p>
      The options are as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">ssl-ca</code> identifies the Certificate Authority
          (CA) certificate.
        </p></li><li class="listitem"><p>
          <code class="literal">ssl-cert</code> identifies the server public key.
          This can be sent to the client and authenticated against the
          CA certificate that it has.
        </p></li><li class="listitem"><p>
          <code class="literal">ssl-key</code> identifies the server private key.
</p></li></ul>
</div>
<p>
      On the slave, you have two options available for setting the SSL
      information. You can either add the slave certificates to the
      <code class="literal">[client]</code> section of the slave's
      <code class="filename">my.cnf</code> file, or you can explicitly specify
      the SSL information using the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
      TO</code></a> statement:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          To add the slave certificates using an option file, add the
          following lines to the <code class="literal">[client]</code> section of
          the slave's <code class="filename">my.cnf</code> file:
        </p><pre class="programlisting">[client]
ssl-ca=<em class="replaceable"><code>cacert.pem</code></em>
ssl-cert=<em class="replaceable"><code>client-cert.pem</code></em>
ssl-key=<em class="replaceable"><code>client-key.pem</code></em></pre><p>
          Restart the slave server, using the
          <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option to
          prevent the slave from connecting to the master. Use
          <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> to specify the
          master configuration, using the <code class="literal">MASTER_SSL</code>
          option to enable SSL connectivity:
        </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_HOST='master_hostname',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_USER='replicate',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_PASSWORD='password',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_SSL=1;</code></strong>
</pre></li><li class="listitem"><p>
          To specify the SSL certificate options using the
          <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement,
          append the SSL options:
        </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_HOST='master_hostname',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_USER='replicate',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_PASSWORD='password',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_SSL=1,</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_SSL_CA = 'ca_file_name',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_SSL_CAPATH = 'ca_directory_name',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_SSL_CERT = 'cert_file_name',</code></strong>
    -&gt; <strong class="userinput"><code>MASTER_SSL_KEY = 'key_file_name';</code></strong>
</pre></li></ul>
</div>
<p>
      After the master information has been updated, start the slave
      replication process:
    </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre><p>
      You can use the <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>
      statement to confirm that the SSL connection was established
      successfully.
    </p><p>
      For more information on the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
      TO</code></a> statement, see <a class="xref" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax">Section 13.4.2.1, “CHANGE MASTER TO Syntax”</a>.
    </p><p>
      If you want to enforce the use of SSL connections during
      replication, then create a user with the
      <a class="link" href="security.html#priv_replication-slave"><code class="literal">REPLICATION SLAVE</code></a> privilege and use
      the <code class="literal">REQUIRE SSL</code> option for that user. For
      example:
    </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE USER 'repl'@'%.mydomain.com' IDENTIFIED BY 'slavepass';</code></strong>
mysql&gt; <strong class="userinput"><code>GRANT REPLICATION SLAVE ON *.*</code></strong>
    -&gt; <strong class="userinput"><code>TO 'repl'@'%.mydomain.com' REQUIRE SSL;</code></strong>
</pre><p>
      If the account already exists, you can add <code class="literal">REQUIRE
      SSL</code> to it with this statement:
    </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>GRANT USAGE ON *.*</code></strong>
    -&gt; <strong class="userinput"><code>TO 'repl'@'%.mydomain.com' REQUIRE SSL;</code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-semisync"></a>17.3.8 Semisynchronous Replication</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-semisync-interface">17.3.8.1 Semisynchronous Replication Administrative Interface</a></span></dt><dt><span class="section"><a href="replication.html#replication-semisync-installation">17.3.8.2 Semisynchronous Replication Installation and Configuration</a></span></dt><dt><span class="section"><a href="replication.html#replication-semisync-monitoring">17.3.8.3 Semisynchronous Replication Monitoring</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140301479513296"></a><a class="indexterm" name="idm140301479512240"></a><p>
      In addition to the built-in asynchronous replication, MySQL
      5.5 supports an interface to semisynchronous
      replication that is implemented by plugins. This section discusses
      what semisynchronous replication is and how it works. The
      following sections cover the administrative interface to
      semisynchronous replication and how to install, configure, and
      monitor it.
    </p><p>
      MySQL replication by default is asynchronous. The master writes
      events to its binary log but does not know whether or when a slave
      has retrieved and processed them. With asynchronous replication,
      if the master crashes, transactions that it has committed might
      not have been transmitted to any slave. Consequently, failover
      from master to slave in this case may result in failover to a
      server that is missing transactions relative to the master.
    </p><p>
      Semisynchronous replication can be used as an alternative to
      asynchronous replication:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          A slave indicates whether it is semisynchronous-capable when
          it connects to the master.
        </p></li><li class="listitem"><p>
          If semisynchronous replication is enabled on the master side
          and there is at least one semisynchronous slave, a thread that
          performs a transaction commit on the master blocks after the
          commit is done and waits until at least one semisynchronous
          slave acknowledges that it has received all events for the
          transaction, or until a timeout occurs.
        </p></li><li class="listitem"><p>
          The slave acknowledges receipt of a transaction's events only
          after the events have been written to its relay log and
          flushed to disk.
        </p></li><li class="listitem"><p>
          If a timeout occurs without any slave having acknowledged the
          transaction, the master reverts to asynchronous replication.
          When at least one semisynchronous slave catches up, the master
          returns to semisynchronous replication.
        </p></li><li class="listitem"><p>
          Semisynchronous replication must be enabled on both the master
          and slave sides. If semisynchronous replication is disabled on
          the master, or enabled on the master but on no slaves, the
          master uses asynchronous replication.
</p></li></ul>
</div>
<p>
      While the master is blocking (waiting for acknowledgment from a
      slave after having performed a commit), it does not return to the
      session that performed the transaction. When the block ends, the
      master returns to the session, which then can proceed to execute
      other statements. At this point, the transaction has committed on
      the master side, and receipt of its events has been acknowledged
      by at least one slave.
    </p><p>
      Blocking also occurs after rollbacks that are written to the
      binary log, which occurs when a transaction that modifies
      nontransactional tables is rolled back. The rolled-back
      transaction is logged even though it has no effect for
      transactional tables because the modifications to the
      nontransactional tables cannot be rolled back and must be sent to
      slaves.
    </p><p>
      For statements that do not occur in transactional context (that
      is, when no transaction has been started with
      <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">START
      TRANSACTION</code></a> or
      <a class="link" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax"><code class="literal">SET autocommit =
      0</code></a>), autocommit is enabled and each statement commits
      implicitly. With semisynchronous replication, the master blocks
      after committing each such statement, just as it does for explicit
      transaction commits.
    </p><p>
      To understand what the <span class="quote">“<span class="quote">semi</span>”</span> in
      <span class="quote">“<span class="quote">semisynchronous replication</span>”</span> means, compare it with
      asynchronous and fully synchronous replication:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          With asynchronous replication, the master writes events to its
          binary log and slaves request them when they are ready. There
          is no guarantee that any event will ever reach any slave.
        </p></li><li class="listitem"><p>
          With fully synchronous replication, when a master commits a
          transaction, all slaves also will have committed the
          transaction before the master returns to the session that
          performed the transaction. The drawback of this is that there
          might be a lot of delay to complete a transaction.
        </p></li><li class="listitem"><p>
          Semisynchronous replication falls between asynchronous and
          fully synchronous replication. The master waits after commit
          only until at least one slave has received and logged the
          events. It does not wait for all slaves to acknowledge
          receipt, and it requires only receipt, not that the events
          have been fully executed and committed on the slave side.
</p></li></ul>
</div>
<p>
      Compared to asynchronous replication, semisynchronous replication
      provides improved data integrity. When a commit returns
      successfully, it is known that the data exists in at least two
      places (on the master and at least one slave). If the master
      commits but a crash occurs while the master is waiting for
      acknowledgment from a slave, it is possible that the transaction
      may not have reached any slave.
    </p><p>
      Semisynchronous replication also places a rate limit on busy
      sessions by constraining the speed at which binary log events can
      be sent from master to slave. When one user is too busy, this will
      slow it down, which is useful in some deployment situations.
    </p><p>
      Semisynchronous replication does have some performance impact
      because commits are slower due to the need to wait for slaves.
      This is the tradeoff for increased data integrity. The amount of
      slowdown is at least the TCP/IP roundtrip time to send the commit
      to the slave and wait for the acknowledgment of receipt by the
      slave. This means that semisynchronous replication works best for
      close servers communicating over fast networks, and worst for
      distant servers communicating over slow networks.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-semisync-interface"></a>17.3.8.1 Semisynchronous Replication Administrative Interface</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140301479489232"></a><p>
        The administrative interface to semisynchronous replication has
        several components:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Two plugins implement semisynchronous capability. There is
            one plugin for the master side and one for the slave side.
          </p></li><li class="listitem"><p>
            System variables control plugin behavior. Some examples:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_enabled"><code class="literal">rpl_semi_sync_master_enabled</code></a>
              </p><p>
                Controls whether semisynchronous replication is enabled
                on the master. To enable or disable the plugin, set this
                variable to 1 or 0, respectively. The default is 0
                (off).
              </p></li><li class="listitem"><p>
                <a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_timeout"><code class="literal">rpl_semi_sync_master_timeout</code></a>
              </p><p>
                A value in milliseconds that controls how long the
                master waits on a commit for acknowledgment from a slave
                before timing out and reverting to asynchronous
                replication. The default value is 10000 (10 seconds).
              </p></li><li class="listitem"><p>
                <a class="link" href="server-administration.html#sysvar_rpl_semi_sync_slave_enabled"><code class="literal">rpl_semi_sync_slave_enabled</code></a>
              </p><p>
                Similar to
                <a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_enabled"><code class="literal">rpl_semi_sync_master_enabled</code></a>,
                but controls the slave plugin.
</p></li></ul>
</div>
<p>
            All
            <code class="literal">rpl_semi_sync_<em class="replaceable"><code>xxx</code></em></code>
            system variables are described at
            <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4 Server System Variables">Section 5.1.4, “Server System Variables”</a>.
          </p></li><li class="listitem"><p>
            Status variables enable semisynchronous replication
            monitoring. Some examples:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_clients"><code class="literal">Rpl_semi_sync_master_clients</code></a>
              </p><p>
                The number of semisynchronous slaves.
              </p></li><li class="listitem"><p>
                <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_status"><code class="literal">Rpl_semi_sync_master_status</code></a>
              </p><p>
                Whether semisynchronous replication currently is
                operational on the master. The value is 1 if the plugin
                has been enabled and a commit acknowledgment has
                occurred. It is 0 if the plugin is not enabled or the
                master has fallen back to asynchronous replication due
                to commit acknowledgment timeout.
              </p></li><li class="listitem"><p>
                <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_no_tx"><code class="literal">Rpl_semi_sync_master_no_tx</code></a>
              </p><p>
                The number of commits that were not acknowledged
                successfully by a slave.
              </p></li><li class="listitem"><p>
                <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_yes_tx"><code class="literal">Rpl_semi_sync_master_yes_tx</code></a>
              </p><p>
                The number of commits that were acknowledged
                successfully by a slave.
              </p></li><li class="listitem"><p>
                <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_slave_status"><code class="literal">Rpl_semi_sync_slave_status</code></a>
              </p><p>
                Whether semisynchronous replication currently is
                operational on the slave. This is 1 if the plugin has
                been enabled and the slave I/O thread is running, 0
                otherwise.
</p></li></ul>
</div>
<p>
            All
            <code class="literal">Rpl_semi_sync_<em class="replaceable"><code>xxx</code></em></code>
            status variables are described at
            <a class="xref" href="server-administration.html#server-status-variables" title="5.1.6 Server Status Variables">Section 5.1.6, “Server Status Variables”</a>.
</p></li></ul>
</div>
<p>
        The system and status variables are available only if the
        appropriate master or slave plugin has been installed with
        <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3 INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-semisync-installation"></a>17.3.8.2 Semisynchronous Replication Installation and Configuration</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479453744"></a><a class="indexterm" name="idm140301479452288"></a><p>
        Semisynchronous replication is implemented using plugins, so the
        plugins must be installed into the server to make them
        available. After a plugin has been installed, you control it by
        means of the system variables associated with it. These system
        variables are unavailable until the associated plugin has been
        installed.
      </p><p>
        To use semisynchronous replication, the following requirements
        must be satisfied:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            MySQL 5.5 or higher must be installed.
          </p></li><li class="listitem"><p>
            The capability of installing plugins requires a MySQL server
            that supports dynamic loading. To verify this, check that
            the value of the
            <a class="link" href="server-administration.html#sysvar_have_dynamic_loading"><code class="literal">have_dynamic_loading</code></a> system
            variable is <code class="literal">YES</code>. Binary distributions
            should support dynamic loading.
          </p></li><li class="listitem"><p>
            Replication must already be working. For information on
            creating a master/slave relationship, see
            <a class="xref" href="replication.html#replication-howto" title="17.1.1 How to Set Up Replication">Section 17.1.1, “How to Set Up Replication”</a>.
</p></li></ul>
</div>
<p>
        To set up semisynchronous replication, use the following
        instructions. The <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3 INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a>,
        <a class="link" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax"><code class="literal">SET
        GLOBAL</code></a>, <a class="link" href="sql-syntax.html#stop-slave" title="13.4.2.6 STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a>, and
        <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statements mentioned
        here require the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege.
      </p><p>
        The semisynchronous replication plugins are included with MySQL
        distributions.
      </p><p>
        Unpack the component distribution, which contains files for the
        master side and the slave side.
      </p><p>
        Install the component files in the plugin directory of the
        appropriate server. Install the
        <code class="filename">semisync_master*</code> files in the plugin
        directory of the master server. Install the
        <code class="filename">semisync_slave*</code> files in the plugin
        directory of each slave server. The location of the plugin
        directory is available as the value of the server's
        <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
      </p><p>
        To load the plugins, use the <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3 INSTALL PLUGIN Syntax"><code class="literal">INSTALL
        PLUGIN</code></a> statement on the master and on each slave that
        is to be semisynchronous.
      </p><p>
        On the master:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>INSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so';</code></strong>
</pre><p>
        On each slave:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>INSTALL PLUGIN rpl_semi_sync_slave SONAME 'semisync_slave.so';</code></strong>
</pre><p>
        The preceding commands use a plugin file name suffix of
        <code class="filename">.so</code>. A different suffix might apply on your
        system. If you are not sure about the plugin file name, look for
        the plugins in the server's plugin directory.
      </p><p>
        If an attempt to install a plugin results in an error on Linux
        similar to that shown here, you will need to install
        <code class="literal">libimf</code>:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>INSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so';</code></strong>
ERROR 1126 (HY000): Can't open shared library
'/usr/local/mysql/lib/plugin/semisync_master.so' (errno: 22 libimf.so: cannot open
shared object file: No such file or directory)
</pre><p>
        You can obtain <code class="literal">libimf</code> from
        <a class="ulink" href="http://dev.mysql.com/downloads/os-linux.html" target="_top">http://dev.mysql.com/downloads/os-linux.html</a>.
      </p><p>
        To see which plugins are installed, use the
        <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.26 SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a> statement, or query
        the <a class="link" href="information-schema.html#plugins-table" title="21.13 The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a>
        table.
      </p><p>
        After a semisynchronous replication plugin has been installed,
        it is disabled by default. The plugins must be enabled both on
        the master side and the slave side to enable semisynchronous
        replication. If only one side is enabled, replication will be
        asynchronous.
      </p><p>
        To control whether an installed plugin is enabled, set the
        appropriate system variables. You can set these variables at
        runtime using <a class="link" href="sql-syntax.html#set-statement" title="13.7.4 SET Syntax"><code class="literal">SET
        GLOBAL</code></a>, or at server startup on the command line or in
        an option file.
      </p><p>
        At runtime, these master-side system variables are available:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SET GLOBAL rpl_semi_sync_master_enabled = {0|1};</code></strong>
mysql&gt; <strong class="userinput"><code>SET GLOBAL rpl_semi_sync_master_timeout = <em class="replaceable"><code>N</code></em>;</code></strong>
</pre><p>
        On the slave side, this system variable is available:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SET GLOBAL rpl_semi_sync_slave_enabled = {0|1};</code></strong>
</pre><p>
        For
        <a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_enabled"><code class="literal">rpl_semi_sync_master_enabled</code></a> or
        <a class="link" href="server-administration.html#sysvar_rpl_semi_sync_slave_enabled"><code class="literal">rpl_semi_sync_slave_enabled</code></a>,
        the value should be 1 to enable semisynchronous replication or 0
        to disable it. By default, these variables are set to 0.
      </p><p>
        For
        <a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_timeout"><code class="literal">rpl_semi_sync_master_timeout</code></a>,
        the value <em class="replaceable"><code>N</code></em> is given in milliseconds.
        The default value is 10000 (10 seconds).
      </p><p>
        If you enable semisynchronous replication on a slave at runtime,
        you must also start the slave I/O thread (stopping it first if
        it is already running) to cause the slave to connect to the
        master and register as a semisynchronous slave:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>STOP SLAVE IO_THREAD; START SLAVE IO_THREAD;</code></strong>
</pre><p>
        If the I/O thread is already running and you do not restart it,
        the slave continues to use asynchronous replication.
      </p><p>
        At server startup, the variables that control semisynchronous
        replication can be set as command-line options or in an option
        file. A setting listed in an option file takes effect each time
        the server starts. For example, you can set the variables in
        <code class="filename">my.cnf</code> files on the master and slave sides
        as follows.
      </p><p>
        On the master:
      </p><pre class="programlisting">
[mysqld]
rpl_semi_sync_master_enabled=1
rpl_semi_sync_master_timeout=1000 # 1 second
</pre><p>
        On each slave:
      </p><pre class="programlisting">
[mysqld]
rpl_semi_sync_slave_enabled=1
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-semisync-monitoring"></a>17.3.8.3 Semisynchronous Replication Monitoring</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479397744"></a><p>
        The plugins for the semisynchronous replication capability
        expose several system and status variables that you can examine
        to determine its configuration and operational state.
      </p><p>
        The system variable reflect how semisynchronous replication is
        configured. To check their values, use <a class="link" href="sql-syntax.html#show-variables" title="13.7.5.40 SHOW VARIABLES Syntax"><code class="literal">SHOW
        VARIABLES</code></a>:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'rpl_semi_sync%';</code></strong>
</pre><p>
        The status variables enable you to monitor the operation of
        semisynchronous replication. To check their values, use
        <a class="link" href="sql-syntax.html#show-status" title="13.7.5.36 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a>:
      </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'Rpl_semi_sync%';</code></strong>
</pre><p>
        When the master switches between asynchronous or semisynchronous
        replication due to commit-blocking timeout or a slave catching
        up, it sets the value of the
        <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_status"><code class="literal">Rpl_semi_sync_master_status</code></a>
        status variable appropriately. Automatic fallback from
        semisynchronous to asynchronous replication on the master means
        that it is possible for the
        <a class="link" href="server-administration.html#sysvar_rpl_semi_sync_master_enabled"><code class="literal">rpl_semi_sync_master_enabled</code></a>
        system variable to have a value of 1 on the master side even
        when semisynchronous replication is in fact not operational at
        the moment. You can monitor the
        <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_status"><code class="literal">Rpl_semi_sync_master_status</code></a>
        status variable to determine whether the master currently is
        using asynchronous or semisynchronous replication.
      </p><p>
        To see how many semisynchronous slaves are connected, check
        <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_clients"><code class="literal">Rpl_semi_sync_master_clients</code></a>.
      </p><p>
        The number of commits that have been acknowledged successfully
        or unsuccessfully by slaves are indicated by the
        <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_yes_tx"><code class="literal">Rpl_semi_sync_master_yes_tx</code></a>
        and <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_master_no_tx"><code class="literal">Rpl_semi_sync_master_no_tx</code></a>
        variables.
      </p><p>
        On the slave side,
        <a class="link" href="server-administration.html#statvar_Rpl_semi_sync_slave_status"><code class="literal">Rpl_semi_sync_slave_status</code></a>
        indicates whether semisynchronous replication currently is
        operational.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="replication-notes"></a>17.4 Replication Notes and Tips</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-features">17.4.1 Replication Features and Issues</a></span></dt><dt><span class="section"><a href="replication.html#replication-compatibility">17.4.2 Replication Compatibility Between MySQL Versions</a></span></dt><dt><span class="section"><a href="replication.html#replication-upgrade">17.4.3 Upgrading a Replication Setup</a></span></dt><dt><span class="section"><a href="replication.html#replication-problems">17.4.4 Troubleshooting Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-bugs">17.4.5 How to Report Replication Bugs or Problems</a></span></dt></dl>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-features"></a>17.4.1 Replication Features and Issues</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="replication.html#replication-features-auto-increment">17.4.1.1 Replication and AUTO_INCREMENT</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-blackhole">17.4.1.2 Replication and BLACKHOLE Tables</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-charset">17.4.1.3 Replication and Character Sets</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-create-if-not-exists">17.4.1.4 Replication of CREATE ... IF NOT EXISTS Statements</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-create-select">17.4.1.5 Replication of CREATE TABLE ... SELECT Statements</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-create-alter-drop-server">17.4.1.6 Replication of CREATE SERVER, ALTER SERVER, and DROP SERVER</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-current-user">17.4.1.7 Replication of CURRENT_USER()</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-drop-if-exists">17.4.1.8 Replication of DROP ... IF EXISTS Statements</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-differing-tables">17.4.1.9 Replication with Differing Table Definitions on Master and Slave</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-directory">17.4.1.10 Replication and DIRECTORY Table Options</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-invoked">17.4.1.11 Replication of Invoked Features</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-floatvalues">17.4.1.12 Replication and Floating-Point Values</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-flush">17.4.1.13 Replication and FLUSH</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-functions">17.4.1.14 Replication and System Functions</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-limit">17.4.1.15 Replication and LIMIT</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-load-data">17.4.1.16 Replication and LOAD DATA INFILE</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-logging">17.4.1.17 Replication and the Slow Query Log</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-repair-table">17.4.1.18 Replication and REPAIR TABLE</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-shutdowns">17.4.1.19 Replication and Master or Slave Shutdowns</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-max-allowed-packet">17.4.1.20 Replication and max_allowed_packet</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-memory">17.4.1.21 Replication and MEMORY Tables</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-temptables">17.4.1.22 Replication and Temporary Tables</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-mysqldb">17.4.1.23 Replication of the mysql System Database</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-optimizer">17.4.1.24 Replication and the Query Optimizer</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-reserved-words">17.4.1.25 Replication and Reserved Words</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-set-password">17.4.1.26 SET PASSWORD and Row-Based Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-slaveerrors">17.4.1.27 Slave Errors During Replication</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-server-side-help">17.4.1.28 Replication of Server-Side Help Tables</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-sql-mode">17.4.1.29 Replication and Server SQL Mode</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-timeout">17.4.1.30 Replication Retries and Timeouts</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-timestamp">17.4.1.31 Replication and TIMESTAMP</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-timezone">17.4.1.32 Replication and Time Zones</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-transactions">17.4.1.33 Replication and Transactions</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-triggers">17.4.1.34 Replication and Triggers</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-truncate">17.4.1.35 Replication and TRUNCATE TABLE</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-variables">17.4.1.36 Replication and Variables</a></span></dt><dt><span class="section"><a href="replication.html#replication-features-views">17.4.1.37 Replication and Views</a></span></dt></dl>
</div>
<a class="indexterm" name="idm140301479375120"></a><a class="indexterm" name="idm140301479373664"></a><a class="indexterm" name="idm140301479372592"></a><a class="indexterm" name="idm140301479371104"></a><a class="indexterm" name="idm140301479370032"></a><a class="indexterm" name="idm140301479368960"></a><p>
      The following sections provide information about what is supported
      and what is not in MySQL replication, and about specific issues
      and situations that may occur when replicating certain statements.
    </p><p>
      Statement-based replication depends on compatibility at the SQL
      level between the master and slave. In others, successful SBR
      requires that any SQL features used be supported by both the
      master and the slave servers. For example, if you use a feature on
      the master server that is available only in MySQL 5.5
      (or later), you cannot replicate to a slave that uses MySQL
      5.1 (or earlier).
    </p><p>
      Such incompatibilities also can occur within a release series when
      using pre-production releases of MySQL. For example, the
      <a class="link" href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a> function is available
      beginning with MySQL 5.0.12. If you use this function on the
      master, you cannot replicate to a slave that uses MySQL 5.0.11 or
      earlier.
    </p><p>
      For this reason, use Generally Available (GA) releases of MySQL
      for statement-based replication in a production setting, since we
      do not introduce new SQL statements or change their behavior
      within a given release series once that series reaches GA release
      status.
    </p><p>
      If you are planning to use statement-based replication between
      MySQL 5.5 and a previous MySQL release series, it is
      also a good idea to consult the edition of the <em class="citetitle">MySQL
      Reference Manual</em> corresponding to the earlier release
      series for information regarding the replication characteristics
      of that series.
    </p><p>
      With MySQL's statement-based replication, there may be issues with
      replicating stored routines or triggers. You can avoid these
      issues by using MySQL's row-based replication instead. For a
      detailed list of issues, see
      <a class="xref" href="stored-programs-views.html#stored-programs-logging" title="20.7 Binary Logging of Stored Programs">Section 20.7, “Binary Logging of Stored Programs”</a>. For more information
      about row-based logging and row-based replication, see
      <a class="xref" href="server-administration.html#binary-log-formats" title="5.2.4.1 Binary Logging Formats">Section 5.2.4.1, “Binary Logging Formats”</a>, and
      <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.
    </p><p>
      For additional information specific to replication and
      <code class="literal">InnoDB</code>, see
      <a class="xref" href="innodb-storage-engine.html#innodb-and-mysql-replication" title="14.19 InnoDB and MySQL Replication">Section 14.19, “InnoDB and MySQL Replication”</a>. For information
      relating to replication with MySQL Cluster, see
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="18.6 MySQL Cluster Replication">Section 18.6, “MySQL Cluster Replication”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-auto-increment"></a>17.4.1.1 Replication and AUTO_INCREMENT</h4>
</div>
</div>
</div>
<a class="indexterm" name="idm140301479355536"></a><a class="indexterm" name="idm140301479354048"></a><a class="indexterm" name="idm140301479352560"></a><a class="indexterm" name="idm140301479351072"></a><a class="indexterm" name="idm140301479349584"></a><a class="indexterm" name="idm140301479348096"></a><p>
        Statement-based replication of
        <code class="literal">AUTO_INCREMENT</code>,
        <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>, and
        <a class="link" href="data-types.html#datetime" title="11.3.1 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values is done
        correctly, subject to the following exceptions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            When using statement-based replication prior to MySQL
            5.5.30, <code class="literal">AUTO_INCREMENT</code> columns in tables
            on the slave must match the same columns on the master; that
            is, <code class="literal">AUTO_INCREMENT</code> columns must be
            replicated to <code class="literal">AUTO_INCREMENT</code> columns.
            (Bug #12669186)
          </p></li><li class="listitem"><p>
            A statement invoking a trigger or function that causes an
            update to an <code class="literal">AUTO_INCREMENT</code> column is not
            replicated correctly using statement-based replication. In
            MySQL 5.5, such statements are marked as
            unsafe. (Bug #45677)
          </p></li><li class="listitem"><p>
            An <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> into a table that
            has a composite primary key that includes an
            <code class="literal">AUTO_INCREMENT</code> column that is not the
            first column of this composite key is not safe for
            statement-based logging or replication. Beginning with MySQL
            5.5.25, such statements are marked as unsafe. (Bug
            #11754117, Bug #45670)
          </p><p>
            This issue does not affect tables using the
            <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> storage engine, since an
            <code class="literal">InnoDB</code> table with an
            <a class="link" href="glossary.html#glos_auto_increment" title="auto-increment">AUTO_INCREMENT</a>
            column requires at least one key where the auto-increment
            column is the only or leftmost column.
          </p></li><li class="listitem"><p>
            Adding an <code class="literal">AUTO_INCREMENT</code> column to a
            table with <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> might
            not produce the same ordering of the rows on the slave and
            the master. This occurs because the order in which the rows
            are numbered depends on the specific storage engine used for
            the table and the order in which the rows were inserted. If
            it is important to have the same order on the master and
            slave, the rows must be ordered before assigning an
            <code class="literal">AUTO_INCREMENT</code> number. Assuming that you
            want to add an <code class="literal">AUTO_INCREMENT</code> column to a
            table <code class="literal">t1</code> that has columns
            <code class="literal">col1</code> and <code class="literal">col2</code>, the
            following statements produce a new table
            <code class="literal">t2</code> identical to <code class="literal">t1</code> but
            with an <code class="literal">AUTO_INCREMENT</code> column:
          </p><pre class="programlisting">
CREATE TABLE t2 LIKE t1;
ALTER TABLE t2 ADD id INT AUTO_INCREMENT PRIMARY KEY;
INSERT INTO t2 SELECT * FROM t1 ORDER BY col1, col2;
</pre>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
              To guarantee the same ordering on both master and slave,
              the <code class="literal">ORDER BY</code> clause must name
              <span class="emphasis"><em>all</em></span> columns of <code class="literal">t1</code>.
</p>
</div>
<p>
            The instructions just given are subject to the limitations
            of <a class="link" href="sql-syntax.html#create-table-like" title="13.1.17.1 CREATE TABLE ... LIKE Syntax"><code class="literal">CREATE
            TABLE ... LIKE</code></a>: Foreign key definitions are
            ignored, as are the <code class="literal">DATA DIRECTORY</code> and
            <code class="literal">INDEX DIRECTORY</code> table options. If a table
            definition includes any of those characteristics, create
            <code class="literal">t2</code> using a <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE
            TABLE</code></a> statement that is identical to the one used
            to create <code class="literal">t1</code>, but with the addition of
            the <code class="literal">AUTO_INCREMENT</code> column.
          </p><p>
            Regardless of the method used to create and populate the
            copy having the <code class="literal">AUTO_INCREMENT</code> column,
            the final step is to drop the original table and then rename
            the copy:
          </p><pre class="programlisting">
DROP t1;
ALTER TABLE t2 RENAME t1;
</pre><p>
            See also <a class="xref" href="error-handling.html#alter-table-problems" title="B.5.7.1 Problems with ALTER TABLE">Section B.5.7.1, “Problems with ALTER TABLE”</a>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-blackhole"></a>17.4.1.2 Replication and BLACKHOLE Tables</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479307056"></a><a class="indexterm" name="idm140301479305568"></a><a class="indexterm" name="idm140301479304080"></a><a class="indexterm" name="idm140301479302592"></a><p>
        The <a class="link" href="storage-engines.html#blackhole-storage-engine" title="15.7 The BLACKHOLE Storage Engine"><code class="literal">BLACKHOLE</code></a> storage engine
        accepts data but discards it and does not store it. When
        performing binary logging, all inserts to such tables are always
        logged, regardless of the logging format in use. Updates and
        deletes are handled differently depending on whether statement
        based or row based logging is in use. With the statement based
        logging format, all statements affecting
        <code class="literal">BLACKHOLE</code> tables are logged, but their
        effects ignored. When using row-based logging, updates and
        deletes to such tables are simply skipped—they are not
        written to the binary log. In MySQL 5.5.32 and later, a warning
        is logged whenever this occurs (Bug #13004581)
      </p><p>
        For this reason we recommend when you replicate to tables using
        the <a class="link" href="storage-engines.html#blackhole-storage-engine" title="15.7 The BLACKHOLE Storage Engine"><code class="literal">BLACKHOLE</code></a> storage engine that
        you have the <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
        server variable set to <code class="literal">STATEMENT</code>, and not to
        either <code class="literal">ROW</code> or <code class="literal">MIXED</code>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-charset"></a>17.4.1.3 Replication and Character Sets</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479291232"></a><a class="indexterm" name="idm140301479289744"></a><p>
        The following applies to replication between MySQL servers that
        use different character sets:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            If the master uses MySQL 4.1, you must
            <span class="emphasis"><em>always</em></span> use the same
            <span class="emphasis"><em>global</em></span> character set and collation on
            the master and the slave, regardless of the slave MySQL
            version. (These are controlled by the
            <a class="link" href="server-administration.html#option_mysqld_character-set-server"><code class="option">--character-set-server</code></a> and
            <a class="link" href="server-administration.html#option_mysqld_collation-server"><code class="option">--collation-server</code></a> options.)
            Otherwise, you may get duplicate-key errors on the slave,
            because a key that is unique in the master character set
            might not be unique in the slave character set. Note that
            this is not a cause for concern when master and slave are
            both MySQL 5.0 or later.
          </p></li><li class="listitem"><p>
            If the master is older than MySQL 4.1.3, the character set
            of any client should never be made different from its global
            value because this character set change is not known to the
            slave. In other words, clients should not use <code class="literal">SET
            NAMES</code>, <code class="literal">SET CHARACTER SET</code>, and
            so forth. If both the master and the slave are 4.1.3 or
            newer, clients can freely set session values for character
            set variables because these settings are written to the
            binary log and so are known to the slave. That is, clients
            can use <code class="literal">SET NAMES</code> or <code class="literal">SET
            CHARACTER SET</code> or can set variables such as
            <code class="literal">collation_client</code> or
            <a class="link" href="server-administration.html#sysvar_collation_server"><code class="literal">collation_server</code></a>. However,
            clients are prevented from changing the
            <span class="emphasis"><em>global</em></span> value of these variables; as
            stated previously, the master and slave must always have
            identical global character set values. This is true whether
            you are using statement-based or row-based replication.
          </p></li><li class="listitem"><p>
            If the master has databases with a character set different
            from the global
            <a class="link" href="server-administration.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a> value,
            you should design your <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE
            TABLE</code></a> statements so that they do not implicitly
            rely on the database default character set. A good
            workaround is to state the character set and collation
            explicitly in <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
            statements.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-create-if-not-exists"></a>17.4.1.4 Replication of CREATE ... IF NOT EXISTS Statements</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479269968"></a><a class="indexterm" name="idm140301479268464"></a><p>
        MySQL applies these rules when various <code class="literal">CREATE ... IF
        NOT EXISTS</code> statements are replicated:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Every
            <a class="link" href="sql-syntax.html#create-database" title="13.1.10 CREATE DATABASE Syntax"><code class="literal">CREATE
            DATABASE IF NOT EXISTS</code></a> statement is replicated,
            whether or not the database already exists on the master.
          </p></li><li class="listitem"><p>
            Similarly, every
            <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE
            IF NOT EXISTS</code></a> statement without a
            <a class="link" href="sql-syntax.html#select" title="13.2.9 SELECT Syntax"><code class="literal">SELECT</code></a> is replicated, whether
            or not the table already exists on the master. This includes
            <a class="link" href="sql-syntax.html#create-table-like" title="13.1.17.1 CREATE TABLE ... LIKE Syntax"><code class="literal">CREATE
            TABLE IF NOT EXISTS ... LIKE</code></a>. Replication of
            <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE
            TABLE IF NOT EXISTS ... SELECT</code></a> follows somewhat
            different rules; see
            <a class="xref" href="replication.html#replication-features-create-select" title="17.4.1.5 Replication of CREATE TABLE ... SELECT Statements">Section 17.4.1.5, “Replication of CREATE TABLE ... SELECT Statements”</a>, for
            more information.
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#create-event" title="13.1.11 CREATE EVENT Syntax"><code class="literal">CREATE EVENT
            IF NOT EXISTS</code></a> is always replicated in MySQL
            5.5, whether or not the event named in the
            statement already exists on the master.
</p></li></ul>
</div>
<p>
        See also Bug #45574.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-create-select"></a>17.4.1.5 Replication of CREATE TABLE ... SELECT Statements</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479252352"></a><a class="indexterm" name="idm140301479250896"></a><p>
        This section discusses how MySQL replicates
        <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> statements.
      </p><p>
        These behaviors are not dependent on MySQL version:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE
            TABLE ... SELECT</code></a> always performs an implicit
            commit (<a class="xref" href="sql-syntax.html#implicit-commit" title="13.3.3 Statements That Cause an Implicit Commit">Section 13.3.3, “Statements That Cause an Implicit Commit”</a>).
          </p></li><li class="listitem"><p>
            If destination table does not exist, logging occurs as
            follows. It does not matter whether <code class="literal">IF NOT
            EXISTS</code> is present.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">STATEMENT</code> or <code class="literal">MIXED</code>
                format: The statement is logged as written.
              </p></li><li class="listitem"><p>
                <code class="literal">ROW</code> format: The statement is logged
                as a <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
                statement followed by a series of insert-row events.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            If the statement fails, nothing is logged. This includes the
            case that the destination table exists and <code class="literal">IF NOT
            EXISTS</code> is not given.
</p></li></ul>
</div>
<p>
        When the destination table exists and <code class="literal">IF NOT
        EXISTS</code> is given, MySQL handles the statement in a
        version-dependent way.
      </p><p>
        In MySQL 5.1 before 5.1.51 and in MySQL 5.5 before 5.5.6 (this
        is the original behavior):
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">STATEMENT</code> or <code class="literal">MIXED</code>
            format: The statement is logged as written.
          </p></li><li class="listitem"><p>
            <code class="literal">ROW</code> format: The statement is logged as a
            <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement
            followed by a series of insert-row events.
</p></li></ul>
</div>
<p>
        In MySQL 5.1 as of 5.1.51:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">STATEMENT</code> or <code class="literal">MIXED</code>
            format: The statement is logged as the equivalent pair of
            <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> and
            <a class="link" href="sql-syntax.html#insert-select" title="13.2.5.1 INSERT ... SELECT Syntax"><code class="literal">INSERT INTO
            ... SELECT</code></a> statements.
          </p></li><li class="listitem"><p>
            <code class="literal">ROW</code> format: The statement is logged as a
            <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement
            followed by a series of insert-row events.
</p></li></ul>
</div>
<p>
        In MySQL 5.5 as of 5.5.6:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Nothing is inserted or logged.
</p></li></ul>
</div>
<p>
        These version dependencies arise due to a change in MySQL 5.5.6
        in handling of
        <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> not to insert rows if the destination
        table already exists, and a change made in MySQL 5.1.51 to
        preserve forward compatibility in replication of such statements
        from a 5.1 master to a 5.5 slave. For details, see
        <a class="xref" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax">Section 13.1.17.2, “CREATE TABLE ... SELECT Syntax”</a>.
      </p><p>
        When using statement-based replication between a MySQL 5.6 or
        later slave and a master running a previous version of MySQL, a
        <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> statement causing changes in other
        tables on the master fails on the slave, causing replication to
        stop. This is due to the fact that MySQL 5.6 does not allow a
        <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> statement to make any changes in
        tables other than the table that is created by the
        statement—a change in behavior from previous versions of
        MySQL, which permitted these statements to do so. To keep this
        from happening, you should use row-based replication, rewrite
        the offending statement before running it on the master, or
        upgrade the master to MySQL 5.6 (or later). (If you choose to
        upgrade the master, keep in mind that such a
        <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> statement will fail there as well,
        following the upgrade, unless the statement is rewritten to
        remove any side effects on other tables.) This is not an issue
        when using row-based replication, because the statement is
        logged as a <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
        statement with any changes to table data logged as row-insert
        events (or possibly row-update events), rather than as the
        entire
        <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE
        TABLE ... SELECT</code></a> statement.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-create-alter-drop-server"></a>17.4.1.6 Replication of CREATE SERVER, ALTER SERVER, and DROP SERVER</h4>

</div>

</div>

</div>
<p>
        In MySQL 5.5, the statements
        <a class="link" href="sql-syntax.html#create-server" title="13.1.16 CREATE SERVER Syntax"><code class="literal">CREATE SERVER</code></a>,
        <a class="link" href="sql-syntax.html#alter-server" title="13.1.6 ALTER SERVER Syntax"><code class="literal">ALTER SERVER</code></a>, and
        <a class="link" href="sql-syntax.html#drop-server" title="13.1.27 DROP SERVER Syntax"><code class="literal">DROP SERVER</code></a> are not written to
        the binary log, regardless of the binary logging format that is
        in use.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-current-user"></a>17.4.1.7 Replication of CURRENT_USER()</h4>

</div>

</div>

</div>
<p>
        The following statements support use of the
        <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function to take
        the place of the name of (and, possibly, the host for) an
        affected user or a definer; in such cases,
        <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> is expanded where
        and as needed:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#drop-user" title="13.7.1.2 DROP USER Syntax"><code class="literal">DROP USER</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#rename-user" title="13.7.1.4 RENAME USER Syntax"><code class="literal">RENAME USER</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#grant" title="13.7.1.3 GRANT Syntax"><code class="literal">GRANT</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#revoke" title="13.7.1.5 REVOKE Syntax"><code class="literal">REVOKE</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#create-function" title="13.1.12 CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#create-procedure" title="13.1.15 CREATE PROCEDURE and CREATE FUNCTION Syntax"><code class="literal">CREATE PROCEDURE</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#create-trigger" title="13.1.19 CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#create-event" title="13.1.11 CREATE EVENT Syntax"><code class="literal">CREATE EVENT</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#create-view" title="13.1.20 CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#alter-view" title="13.1.9 ALTER VIEW Syntax"><code class="literal">ALTER VIEW</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="sql-syntax.html#set-password" title="13.7.1.6 SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>
</p></li></ul>
</div>
<p>
        When <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> or
        <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> is used as the
        definer in any of the statements <a class="link" href="sql-syntax.html#create-function" title="13.1.12 CREATE FUNCTION Syntax"><code class="literal">CREATE
        FUNCTION</code></a>, <a class="link" href="sql-syntax.html#create-procedure" title="13.1.15 CREATE PROCEDURE and CREATE FUNCTION Syntax"><code class="literal">CREATE
        PROCEDURE</code></a>, <a class="link" href="sql-syntax.html#create-trigger" title="13.1.19 CREATE TRIGGER Syntax"><code class="literal">CREATE
        TRIGGER</code></a>, <a class="link" href="sql-syntax.html#create-event" title="13.1.11 CREATE EVENT Syntax"><code class="literal">CREATE EVENT</code></a>,
        <a class="link" href="sql-syntax.html#create-view" title="13.1.20 CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a>, or
        <a class="link" href="sql-syntax.html#alter-view" title="13.1.9 ALTER VIEW Syntax"><code class="literal">ALTER VIEW</code></a> when binary logging is
        enabled, the function reference is expanded before it is written
        to the binary log, so that the statement refers to the same user
        on both the master and the slave when the statement is
        replicated. <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> or
        <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> is also expanded
        prior to being written to the binary log when used in
        <a class="link" href="sql-syntax.html#drop-user" title="13.7.1.2 DROP USER Syntax"><code class="literal">DROP USER</code></a>,
        <a class="link" href="sql-syntax.html#rename-user" title="13.7.1.4 RENAME USER Syntax"><code class="literal">RENAME USER</code></a>,
        <a class="link" href="sql-syntax.html#grant" title="13.7.1.3 GRANT Syntax"><code class="literal">GRANT</code></a>,
        <a class="link" href="sql-syntax.html#revoke" title="13.7.1.5 REVOKE Syntax"><code class="literal">REVOKE</code></a>, or
        <a class="link" href="sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-drop-if-exists"></a>17.4.1.8 Replication of DROP ... IF EXISTS Statements</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479152832"></a><a class="indexterm" name="idm140301479151344"></a><p>
        The <a class="link" href="sql-syntax.html#drop-database" title="13.1.21 DROP DATABASE Syntax"><code class="literal">DROP DATABASE
        IF EXISTS</code></a>,
        <a class="link" href="sql-syntax.html#drop-table" title="13.1.28 DROP TABLE Syntax"><code class="literal">DROP TABLE IF
        EXISTS</code></a>, and
        <a class="link" href="sql-syntax.html#drop-view" title="13.1.31 DROP VIEW Syntax"><code class="literal">DROP VIEW IF
        EXISTS</code></a> statements are always replicated, even if the
        database, table, or view to be dropped does not exist on the
        master. This is to ensure that the object to be dropped no
        longer exists on either the master or the slave, once the slave
        has caught up with the master.
      </p><p>
        <code class="literal">DROP ... IF EXISTS</code> statements for stored
        programs (stored procedures and functions, triggers, and events)
        are also replicated, even if the stored program to be dropped
        does not exist on the master.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-differing-tables"></a>17.4.1.9 Replication with Differing Table Definitions on Master and Slave</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479142800"></a><p>
        Source and target tables for replication do not have to be
        identical. A table on the master can have more or fewer columns
        than the slave's copy of the table. In addition, corresponding
        table columns on the master and the slave can use different data
        types, subject to certain conditions.
      </p><p>
        In all cases where the source and target tables do not have
        identical definitions, the database and table names must be the
        same on both the master and the slave. Additional conditions are
        discussed, with examples, in the following two sections.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="replication-features-more-columns"></a>17.4.1.9.1 Replication with More Columns on Master or Slave</h5>
</div>
</div>
</div>
<p>
          You can replicate a table from the master to the slave such
          that the master and slave copies of the table have differing
          numbers of columns, subject to the following conditions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Columns common to both versions of the table must be
              defined in the same order on the master and the slave.
            </p><p>
              (This is true even if both tables have the same number of
              columns.)
            </p></li><li class="listitem"><p>
              Columns common to both versions of the table must be
              defined before any additional columns.
            </p><p>
              This means that executing an <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER
              TABLE</code></a> statement on the slave where a new column
              is inserted into the table within the range of columns
              common to both tables causes replication to fail, as shown
              in the following example:
            </p><p>
              Suppose that a table <code class="literal">t</code>, existing on the
              master and the slave, is defined by the following
              <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement:
            </p><pre class="programlisting">
CREATE TABLE t (
    c1 INT,
    c2 INT,
    c3 INT
); 
</pre><p>
              Suppose that the <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER
              TABLE</code></a> statement shown here is executed on the
              slave:
            </p><pre class="programlisting">
ALTER TABLE t ADD COLUMN cnew1 INT AFTER c3;
</pre><p>
              The previous <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> is
              permitted on the slave because the columns
              <code class="literal">c1</code>, <code class="literal">c2</code>, and
              <code class="literal">c3</code> that are common to both versions of
              table <code class="literal">t</code> remain grouped together in both
              versions of the table, before any columns that differ.
            </p><p>
              However, the following <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER
              TABLE</code></a> statement cannot be executed on the slave
              without causing replication to break:
            </p><pre class="programlisting">
ALTER TABLE t ADD COLUMN cnew2 INT AFTER c2;
</pre><p>
              Replication fails after execution on the slave of the
              <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement just
              shown, because the new column <code class="literal">cnew2</code>
              comes between columns common to both versions of
              <code class="literal">t</code>.
            </p></li><li class="listitem"><p>
              Each <span class="quote">“<span class="quote">extra</span>”</span> column in the version of the
              table having more columns must have a default value.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
                A column's default value is determined by a number of
                factors, including its type, whether it is defined with
                a <code class="literal">DEFAULT</code> option, whether it is
                declared as <code class="literal">NULL</code>, and the server SQL
                mode in effect at the time of its creation; for more
                information, see <a class="xref" href="data-types.html#data-type-defaults" title="11.6 Data Type Default Values">Section 11.6, “Data Type Default Values”</a>).
</p>
</div>
</li></ul>
</div>
<p>
          In addition, when the slave's copy of the table has more
          columns than the master's copy, each column common to the
          tables must use the same data type in both tables.
        </p><p><b>Examples. </b>
            The following examples illustrate some valid and invalid
            table definitions:
          </p><p><b>More columns on the master. </b>
            The following table definitions are valid and replicate
            correctly:
          </p><pre class="programlisting">
master&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT, c3 INT);</code></strong>
slave&gt;  <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT);</code></strong>
</pre><p>
          The following table definitions would raise Error 1532
          (<a class="link" href="error-handling.html#error_er_binlog_row_rbr_to_sbr"><code class="literal">ER_BINLOG_ROW_RBR_TO_SBR</code></a>)
          because the definitions of the columns common to both versions
          of the table are in a different order on the slave than they
          are on the master:
        </p><pre class="programlisting">
master&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT, c3 INT);</code></strong>
slave&gt;  <strong class="userinput"><code>CREATE TABLE t1 (c2 INT, c1 INT);</code></strong>
</pre><p>
          The following table definitions would also raise Error 1532
          because the definition of the extra column on the master
          appears before the definitions of the columns common to both
          versions of the table:
        </p><pre class="programlisting">
master&gt; <strong class="userinput"><code>CREATE TABLE t1 (c3 INT, c1 INT, c2 INT);</code></strong>
slave&gt;  <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT);</code></strong>
</pre><p><b>More columns on the slave. </b>
            The following table definitions are valid and replicate
            correctly:
          </p><pre class="programlisting">
master&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT);</code></strong>
slave&gt;  <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT, c3 INT);</code></strong>
                  </pre><p>
          The following definitions raise Error 1532 because the columns
          common to both versions of the table are not defined in the
          same order on both the master and the slave:
        </p><pre class="programlisting">
master&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT);</code></strong>
slave&gt;  <strong class="userinput"><code>CREATE TABLE t1 (c2 INT, c1 INT, c3 INT);</code></strong>
</pre><p>
          The following table definitions also raise Error 1532 because
          the definition for the extra column in the slave's version of
          the table appears before the definitions for the columns which
          are common to both versions of the table:
        </p><pre class="programlisting">
master&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT);</code></strong>
slave&gt;  <strong class="userinput"><code>CREATE TABLE t1 (c3 INT, c1 INT, c2 INT);</code></strong>
</pre><p>
          The following table definitions fail because the slave's
          version of the table has additional columns compared to the
          master's version, and the two versions of the table use
          different data types for the common column
          <code class="literal">c2</code>:
        </p><pre class="programlisting">
master&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 BIGINT);</code></strong>
slave&gt;  <strong class="userinput"><code>CREATE TABLE t1 (c1 INT, c2 INT, c3 INT);</code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="replication-features-different-data-types"></a>17.4.1.9.2 Replication of Columns Having Different Data Types</h5>

</div>

</div>

</div>
<a class="indexterm" name="idm140301479086576"></a><a class="indexterm" name="idm140301479085088"></a><a class="indexterm" name="idm140301479083600"></a><a class="indexterm" name="idm140301479082112"></a><p>
          Corresponding columns on the master's and the
          slave's copies of the same table ideally should have the
          same data type. However, beginning with MySQL 5.1.21, this is
          not always strictly enforced, as long as certain conditions
          are met.
        </p><p>
          All other things being equal, it is always possible to
          replicate from a column of a given data type to another column
          of the same type and same size or width, where applicable, or
          larger. For example, you can replicate from a
          <code class="literal">CHAR(10)</code> column to another
          <code class="literal">CHAR(10)</code>, or from a
          <code class="literal">CHAR(10)</code> column to a
          <code class="literal">CHAR(25)</code> column without any problems. In
          certain cases, it also possible to replicate from a column
          having one data type (on the master) to a column having a
          different data type (on the slave); when the data type of the
          master's version of the column is promoted to a type that
          is the same size or larger on the slave, this is known as
          <em class="firstterm">attribute promotion</em>.
        </p><p>
          Attribute promotion can be used with both statement-based and
          row-based replication, and is not dependent on the storage
          engine used by either the master or the slave. However, the
          choice of logging format does have an effect on the type
          conversions that are permitted; the particulars are discussed
          later in this section.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
            Whether you use statement-based or row-based replication,
            the slave's copy of the table cannot contain more
            columns than the master's copy if you wish to employ
            attribute promotion.
</p>
</div>
<p><b>Statement-based replication. </b>
            When using statement-based replication, a simple rule of
            thumb to follow is, <span class="quote">“<span class="quote">If the statement run on the
            master would also execute successfully on the slave, it
            should also replicate successfully</span>”</span>. In other words,
            if the statement uses a value that is compatible with the
            type of a given column on the slave, the statement can be
            replicated. For example, you can insert any value that fits
            in a <code class="literal">TINYINT</code> column into a
            <code class="literal">BIGINT</code> column as well; it follows that,
            even if you change the type of a <code class="literal">TINYINT</code>
            column in the slave's copy of a table to
            <code class="literal">BIGINT</code>, any insert into that column on
            the master that succeeds should also succeed on the slave,
            since it is impossible to have a legal
            <code class="literal">TINYINT</code> value that is large enough to
            exceed a <code class="literal">BIGINT</code> column.
          </p><p>
          Prior to MySQL 5.5.30, when using statement-based replication,
          <code class="literal">AUTO_INCREMENT</code> columns were required to be
          the same on both the master and the slave; otherwise, updates
          could be applied to the wrong table on the slave. (Bug
          #12669186)
        </p><p><a name="replication-features-attribute-promotion"></a><b>Row-based replication: attribute promotion and demotion. </b>
            Formerly, due to the fact that in row-based replication
            changes rather than statements are replicated, and that
            these changes are transmitted using formats that do not
            always map directly to MySQL server column data types, you
            could not replicate between different subtypes of the same
            general type (for example, from <code class="literal">TINYINT</code>
            to <code class="literal">BIGINT</code>, both <code class="literal">INT</code>
            subtypes). However, beginning with MySQL 5.5.3, MySQL
            Replication supports attribute promotion and demotion
            between smaller data types and larger types. It is also
            possible to specify whether or not to permit lossy
            (truncated) or non-lossy conversions of demoted column
            values, as explained later in this section.
          </p><p><b>Lossy and non-lossy conversions. </b>
            In the event that the target type cannot represent the value
            being inserted, a decision must be made on how to handle the
            conversion. If we permit the conversion but truncate (or
            otherwise modify) the source value to achieve a
            <span class="quote">“<span class="quote">fit</span>”</span> in the target column, we make what is
            known as a <em class="firstterm">lossy conversion</em>. A
            conversion which does not require truncation or similar
            modifications to fit the source column value in the target
            column is a <em class="firstterm">non-lossy</em> conversion.
          </p><p><b>Type conversion modes (slave_type_conversions variable). </b>
            The setting of the <code class="literal">slave_type_conversions</code>
            global server variable controls the type conversion mode
            used on the slave. This variable takes a set of values from
            the following table, which shows the effects of each mode on
            the slave's type-conversion behavior:
</p>
<div class="informaltable">
<table summary="This table shows type conversion modes for the
            slave_type_conversions global server
            variable and describes the effects of each mode on the
            slave's type-conversion behavior." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Mode</th><th scope="col">Effect</th></tr></thead><tbody><tr><td scope="row"><code class="literal">ALL_LOSSY</code></td><td><p>
                    In this mode, type conversions that would mean loss
                    of information are permitted.
                  </p>



                  <p>
                    This does not imply that non-lossy conversions are
                    permitted, merely that only cases requiring either
                    lossy conversions or no conversion at all are
                    permitted; for example, enabling
                    <span class="emphasis"><em>only</em></span> this mode permits an
                    <code class="literal">INT</code> column to be converted to
                    <code class="literal">TINYINT</code> (a lossy conversion), but
                    not a <code class="literal">TINYINT</code> column to an
                    <code class="literal">INT</code> column (non-lossy).
                    Attempting the latter conversion in this case would
                    cause replication to stop with an error on the
                    slave.
                  </p></td></tr><tr><td scope="row"><code class="literal">ALL_NON_LOSSY</code></td><td><p>
                    This mode permits conversions that do not require
                    truncation or other special handling of the source
                    value; that is, it permits conversions where the
                    target type has a wider range than the source type.
                  </p>



                  <p>
                    Setting this mode has no bearing on whether lossy
                    conversions are permitted; this is controlled with
                    the <code class="literal">ALL_LOSSY</code> mode. If only
                    <code class="literal">ALL_NON_LOSSY</code> is set, but not
                    <code class="literal">ALL_LOSSY</code>, then attempting a
                    conversion that would result in the loss of data
                    (such as <code class="literal">INT</code> to
                    <code class="literal">TINYINT</code>, or
                    <code class="literal">CHAR(25)</code> to
                    <code class="literal">VARCHAR(20)</code>) causes the slave to
                    stop with an error.
                  </p></td></tr><tr><td scope="row"><code class="literal">ALL_LOSSY,ALL_NON_LOSSY</code></td><td><p>
                    When this mode is set, all supported type
                    conversions are permitted, whether or not they are
                    lossy conversions.
                  </p></td></tr><tr><td scope="row">[<span class="emphasis"><em>empty</em></span>]</td><td><p>
                    When <code class="literal">slave_type_conversions</code> is
                    not set, no attribute promotion or demotion is
                    permitted; this means that all columns in the source
                    and target tables must be of the same types.
                  </p>



                  <p>
                    This mode is the default.
</p></td></tr></tbody></table>
</div>
<p>
          Changing the type conversion mode requires restarting the
          slave with the new <code class="literal">slave_type_conversions</code>
          setting.
        </p><p><b>Supported conversions. </b>
            Supported conversions between different but similar data
            types are shown in the following list:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Between any of the integer types
              <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">TINYINT</code></a>,
              <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">SMALLINT</code></a>,
              <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">MEDIUMINT</code></a>,
              <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a>, and
              <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>.
            </p><p>
              This includes conversions between the signed and unsigned
              versions of these types.
            </p><p>
              Lossy conversions are made by truncating the source value
              to the maximum (or minimum) permitted by the target
              column. For insuring non-lossy conversions when going from
              unsigned to signed types, the target column must be large
              enough to accommodate the range of values in the source
              column. For example, you can demote <code class="literal">TINYINT
              UNSIGNED</code> non-lossily to
              <code class="literal">SMALLINT</code>, but not to
              <code class="literal">TINYINT</code>.
            </p></li><li class="listitem"><p>
              Between any of the decimal types
              <a class="link" href="data-types.html#fixed-point-types" title="11.2.2 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a>,
              <a class="link" href="data-types.html#floating-point-types" title="11.2.3 Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">FLOAT</code></a>,
              <a class="link" href="data-types.html#floating-point-types" title="11.2.3 Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a>, and
              <a class="link" href="data-types.html#fixed-point-types" title="11.2.2 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">NUMERIC</code></a>.
            </p><p>
              <code class="literal">FLOAT</code> to <code class="literal">DOUBLE</code> is a
              non-lossy conversion; <code class="literal">DOUBLE</code> to
              <code class="literal">FLOAT</code> can only be handled lossily. A
              conversion from
              <code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code>
              to
              <code class="literal">DECIMAL(<em class="replaceable"><code>M'</code></em>,<em class="replaceable"><code>D'</code></em>)</code>
              where <code class="literal"><em class="replaceable"><code>D'</code></em> &gt;=
              <em class="replaceable"><code>D</code></em></code> and
              <code class="literal">(<em class="replaceable"><code>M'</code></em>-<em class="replaceable"><code>D'</code></em>)
              &gt;=
              (<em class="replaceable"><code>M</code></em></code>-<em class="replaceable"><code>D</code></em>)
              are non-lossy; for any case where
              <code class="literal"><em class="replaceable"><code>M'</code></em> &lt;
              <em class="replaceable"><code>M</code></em></code>,
              <code class="literal"><em class="replaceable"><code>D'</code></em> &lt;
              <em class="replaceable"><code>D</code></em></code>, or both, only a
              lossy conversion can be made.
            </p><p>
              For any of the decimal types, if a value to be stored
              cannot be fit in the target type, the value is rounded
              down according to the rounding rules defined for the
              server elsewhere in the documentation. See
              <a class="xref" href="functions.html#precision-math-rounding" title="12.18.4 Rounding Behavior">Section 12.18.4, “Rounding Behavior”</a>, for information
              about how this is done for decimal types.
            </p></li><li class="listitem"><p>
              Between any of the string types
              <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a>,
              <a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>, and
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a>, including conversions
              between different widths.
            </p><p>
              Conversion of a <code class="literal">CHAR</code>,
              <code class="literal">VARCHAR</code>, or <code class="literal">TEXT</code> to
              a <code class="literal">CHAR</code>, <code class="literal">VARCHAR</code>, or
              <code class="literal">TEXT</code> column the same size or larger is
              never lossy. Lossy conversion is handled by inserting only
              the first <em class="replaceable"><code>N</code></em> characters of the
              string on the slave, where <em class="replaceable"><code>N</code></em> is
              the width of the target column.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
                Replication between columns using different character
                sets is not supported.
</p>
</div>
</li><li class="listitem"><p>
              Between any of the binary data types
              <a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
              <a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>, and
              <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a>, including conversions
              between different widths.
            </p><p>
              Conversion of a <code class="literal">BINARY</code>,
              <code class="literal">VARBINARY</code>, or <code class="literal">BLOB</code>
              to a <code class="literal">BINARY</code>,
              <code class="literal">VARBINARY</code>, or <code class="literal">BLOB</code>
              column the same size or larger is never lossy. Lossy
              conversion is handled by inserting only the first
              <em class="replaceable"><code>N</code></em> bytes of the string on the
              slave, where <em class="replaceable"><code>N</code></em> is the width of
              the target column.
            </p></li><li class="listitem"><p>
              Between any 2 <a class="link" href="data-types.html#bit-type" title="11.2.4 Bit-Value Type - BIT"><code class="literal">BIT</code></a> columns
              of any 2 sizes.
            </p><p>
              When inserting a value from a
              <code class="literal">BIT(<em class="replaceable"><code>M</code></em>)</code>
              column into a
              <code class="literal">BIT(<em class="replaceable"><code>M'</code></em>)</code>
              column, where <code class="literal"><em class="replaceable"><code>M'</code></em> &gt;
              <em class="replaceable"><code>M</code></em></code>, the most
              significant bits of the
              <code class="literal">BIT(<em class="replaceable"><code>M'</code></em>)</code>
              columns are cleared (set to zero) and the
              <em class="replaceable"><code>M</code></em> bits of the
              <code class="literal">BIT(<em class="replaceable"><code>M</code></em>)</code> value
              are set as the least significant bits of the
              <code class="literal">BIT(<em class="replaceable"><code>M'</code></em>)</code>
              column.
            </p><p>
              When inserting a value from a source
              <code class="literal">BIT(<em class="replaceable"><code>M</code></em>)</code>
              column into a target
              <code class="literal">BIT(<em class="replaceable"><code>M'</code></em>)</code>
              column, where <code class="literal"><em class="replaceable"><code>M'</code></em> &lt;
              <em class="replaceable"><code>M</code></em></code>, the maximum
              possible value for the
              <code class="literal">BIT(<em class="replaceable"><code>M'</code></em>)</code>
              column is assigned; in other words, an
              <span class="quote">“<span class="quote">all-set</span>”</span> value is assigned to the target
              column.
</p></li></ul>
</div>
<p>
          Conversions between types not in the previous list are not
          permitted.
        </p><p><a name="replication-features-type-conversions-old"></a><b>Replication type conversions in MySQL 5.5.3 and earlier. </b>
            Prior to MySQL 5.5.3, with row-based binary logging, you
            could not replicate between different <code class="literal">INT</code>
            subtypes, such as from <code class="literal">TINYINT</code> to
            <code class="literal">BIGINT</code>, because changes to columns of
            these types were represented differently from one another in
            the binary log when using row-based logging. (However, you
            could replicate from <code class="literal">BLOB</code> to
            <code class="literal">TEXT</code> using row-based replication because
            changes to <code class="literal">BLOB</code> and
            <code class="literal">TEXT</code> columns were represented using the
            same format in the binary log.)
          </p><p>
          Supported conversions for attribute promotion when using
          row-based replication prior to MySQL 5.5.3 are shown in the
          following table:
</p>
<div class="informaltable">
<table summary="This table shows supported conversions for attribute
            promotion when using row-based replication prior to MySQL
5.5.3." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">From (Master)</th><th scope="col">To (Slave)</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a></td><td><a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a></td></tr><tr><td scope="row"><a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a></td><td><a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a></td></tr><tr><td scope="row"><a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a></td><td><a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a></td></tr><tr><td scope="row"><a class="link" href="data-types.html#fixed-point-types" title="11.2.2 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a></td><td><a class="link" href="data-types.html#fixed-point-types" title="11.2.2 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">NUMERIC</code></a></td></tr><tr><td scope="row"><a class="link" href="data-types.html#fixed-point-types" title="11.2.2 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">NUMERIC</code></a></td><td><a class="link" href="data-types.html#fixed-point-types" title="11.2.2 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a></td></tr><tr><td scope="row"><a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a></td><td><a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a></td></tr><tr><td scope="row"><a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a></td><td><a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a></td></tr><tr><td scope="row"><a class="link" href="data-types.html#char" title="11.4.1 The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a></td><td><a class="link" href="data-types.html#binary-varbinary" title="11.4.2 The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a></td></tr></tbody></table>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
            In all cases, the size or width of the column on the slave
            must be equal to or greater than that of the column on the
            master. For example, you could replicate from a
            <code class="literal">CHAR(10)</code> column on the master to a column
            that used <code class="literal">BINARY(10)</code> or
            <code class="literal">BINARY(25)</code> on the slave, but you could
            not replicate from a <code class="literal">CHAR(10)</code> column on
            the master to <code class="literal">BINARY(5)</code> column on the
            slave.
          </p><p>
            Any unique index (including primary keys) having a prefix
            must use a prefix of the same length on both master and
            slave; in such cases, differing prefix lengths are
            disallowed. It is possible to use a nonunique index whose
            prefix length differs between master and slave, but this can
            cause serious performance issues, particularly when the
            prefix used on the master is longer. This is due to the fact
            that 2 unique prefixes of a given length may no longer be
            unique at a shorter length; for example, the words
            <span class="emphasis"><em>catalogue</em></span> and
            <span class="emphasis"><em>catamount</em></span> have the 5-character prefixes
            <span class="emphasis"><em>catal</em></span> and <span class="emphasis"><em>catam</em></span>,
            respectively, but share the same 4-character prefix
            (<span class="emphasis"><em>cata</em></span>). This can lead to queries that
            use such indexes executing less efficiently on the slave,
            when a shorter prefix is employed in the slave'
            definition of the same index than on the master.
          </p><p>
            For <a class="link" href="data-types.html#fixed-point-types" title="11.2.2 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> and
            <a class="link" href="data-types.html#fixed-point-types" title="11.2.2 Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">NUMERIC</code></a> columns, both the
            mantissa (<span class="emphasis"><em>M</em></span>) and the number of decimals
            (<span class="emphasis"><em>D</em></span>) must be the same size or larger on
            the slave as compared with the master. For example,
            replication from a <code class="literal">NUMERIC(5,4)</code> to a
            <code class="literal">DECIMAL(6,4)</code> worked, but not from a
            <code class="literal">NUMERIC(5,4)</code> to a
            <code class="literal">DECIMAL(5,3)</code>.
</p>
</div>
<p>
          Prior to MySQL 5.5.3, MySQL replication did not support
          attribute promotion of any of the following data types to or
          from any other data type when using row-based replication:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a> (including
              <code class="literal">TINYINT</code>, <code class="literal">SMALLINT</code>,
              <code class="literal">MEDIUMINT</code>, <code class="literal">BIGINT</code>).
            </p><p>
              Promotion between <a class="link" href="data-types.html#integer-types" title="11.2.1 Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a>
              subtypes—for example, from
              <code class="literal">SMALLINT</code> to
              <code class="literal">BIGINT</code>—was also not supported
              prior to MySQL 5.5.3.
            </p></li><li class="listitem"><p>
              <a class="link" href="data-types.html#set" title="11.4.5 The SET Type"><code class="literal">SET</code></a> or
              <a class="link" href="data-types.html#enum" title="11.4.4 The ENUM Type"><code class="literal">ENUM</code></a>.
            </p></li><li class="listitem"><p>
              <a class="link" href="data-types.html#floating-point-types" title="11.2.3 Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">FLOAT</code></a> or
              <a class="link" href="data-types.html#floating-point-types" title="11.2.3 Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a>.
            </p></li><li class="listitem"><p>
              All of the data types relating to dates, times, or both:
              <a class="link" href="data-types.html#datetime" title="11.3.1 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>,
              <a class="link" href="data-types.html#time" title="11.3.2 The TIME Type"><code class="literal">TIME</code></a>,
              <a class="link" href="data-types.html#datetime" title="11.3.1 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>,
              <a class="link" href="data-types.html#datetime" title="11.3.1 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>, and
              <a class="link" href="data-types.html#year" title="11.3.3 The YEAR Type"><code class="literal">YEAR</code></a>.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-directory"></a>17.4.1.10 Replication and DIRECTORY Table Options</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478883408"></a><a class="indexterm" name="idm140301478881920"></a><a class="indexterm" name="idm140301478880432"></a><a class="indexterm" name="idm140301478878944"></a><a class="indexterm" name="idm140301478877456"></a><p>
        If a <code class="literal">DATA DIRECTORY</code> or <code class="literal">INDEX
        DIRECTORY</code> table option is used in a
        <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement on the
        master server, the table option is also used on the slave. This
        can cause problems if no corresponding directory exists in the
        slave host file system or if it exists but is not accessible to
        the slave server. This can be overridden by using the
        <a class="link" href="server-administration.html#sqlmode_no_dir_in_create"><code class="literal">NO_DIR_IN_CREATE</code></a> server SQL
        mode on the slave, which causes the slave to ignore the
        <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
        DIRECTORY</code> table options when replicating
        <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statements. The
        result is that <code class="literal">MyISAM</code> data and index files
        are created in the table's database directory.
      </p><p>
        For more information, see <a class="xref" href="server-administration.html#sql-mode" title="5.1.7 Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-invoked"></a>17.4.1.11 Replication of Invoked Features</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478864992"></a><a class="indexterm" name="idm140301478863504"></a><a class="indexterm" name="idm140301478862016"></a><a class="indexterm" name="idm140301478860528"></a><a class="indexterm" name="idm140301478859040"></a><a class="indexterm" name="idm140301478857552"></a><a class="indexterm" name="idm140301478856064"></a><p>
        Replication of invoked features such as user-defined functions
        (UDFs) and stored programs (stored procedures and functions,
        triggers, and events) provides the following characteristics:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The effects of the feature are always replicated.
          </p></li><li class="listitem"><p>
            The following statements are replicated using
            statement-based replication:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#create-event" title="13.1.11 CREATE EVENT Syntax"><code class="literal">CREATE EVENT</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#drop-event" title="13.1.22 DROP EVENT Syntax"><code class="literal">DROP EVENT</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#create-procedure" title="13.1.15 CREATE PROCEDURE and CREATE FUNCTION Syntax"><code class="literal">CREATE PROCEDURE</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#drop-procedure" title="13.1.26 DROP PROCEDURE and DROP FUNCTION Syntax"><code class="literal">DROP PROCEDURE</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#create-function" title="13.1.12 CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#drop-function" title="13.1.23 DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#create-trigger" title="13.1.19 CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a>
              </p></li><li class="listitem"><p>
                <a class="link" href="sql-syntax.html#drop-trigger" title="13.1.30 DROP TRIGGER Syntax"><code class="literal">DROP TRIGGER</code></a>
</p></li></ul>
</div>
<p>
            However, the <span class="emphasis"><em>effects</em></span> of features
            created, modified, or dropped using these statements are
            replicated using row-based replication.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
              Attempting to replicate invoked features using
              statement-based replication produces the warning
              <span class="errortext">Statement is not safe to log in statement
              format</span>. For example, trying to replicate a UDF
              with statement-based replication generates this warning
              because it currently cannot be determined by the MySQL
              server whether the UDF is deterministic. If you are
              absolutely certain that the invoked feature's effects are
              deterministic, you can safely disregard such warnings.
</p>
</div>
</li><li class="listitem"><p>
            <a class="indexterm" name="idm140301478830512"></a>

            <a class="indexterm" name="idm140301478829024"></a>

            <a class="indexterm" name="idm140301478827536"></a>

            <a class="indexterm" name="idm140301478826048"></a>

            In the case of <a class="link" href="sql-syntax.html#create-event" title="13.1.11 CREATE EVENT Syntax"><code class="literal">CREATE EVENT</code></a>
            and <a class="link" href="sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                The status of the event is set to
                <code class="literal">SLAVESIDE_DISABLED</code> on the slave
                regardless of the state specified (this does not apply
                to <a class="link" href="sql-syntax.html#drop-event" title="13.1.22 DROP EVENT Syntax"><code class="literal">DROP EVENT</code></a>).
              </p></li><li class="listitem"><p>
                The master on which the event was created is identified
                on the slave by its server ID. The
                <code class="literal">ORIGINATOR</code> column in
                <a class="link" href="information-schema.html#events-table" title="21.7 The INFORMATION_SCHEMA EVENTS Table"><code class="literal">INFORMATION_SCHEMA.EVENTS</code></a>
                and the <code class="literal">originator</code> column in
                <code class="literal">mysql.event</code> store this information.
                See <a class="xref" href="information-schema.html#events-table" title="21.7 The INFORMATION_SCHEMA EVENTS Table">Section 21.7, “The INFORMATION_SCHEMA EVENTS Table”</a>, and
                <a class="xref" href="sql-syntax.html#show-events" title="13.7.5.19 SHOW EVENTS Syntax">Section 13.7.5.19, “SHOW EVENTS Syntax”</a>, for more information.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            The feature implementation resides on the slave in a
            renewable state so that if the master fails, the slave can
            be used as the master without loss of event processing.
</p></li></ul>
</div>
<p>
        To determine whether there are any scheduled events on a MySQL
        server that were created on a different server (that was acting
        as a replication master), query the
        <a class="link" href="information-schema.html#events-table" title="21.7 The INFORMATION_SCHEMA EVENTS Table"><code class="literal">INFORMATION_SCHEMA.EVENTS</code></a> table in
        a manner similar to what is shown here:
      </p><pre class="programlisting">
SELECT EVENT_SCHEMA, EVENT_NAME
    FROM INFORMATION_SCHEMA.EVENTS
    WHERE STATUS = 'SLAVESIDE_DISABLED';
</pre><p>
        Alternatively, you can use the <a class="link" href="sql-syntax.html#show-events" title="13.7.5.19 SHOW EVENTS Syntax"><code class="literal">SHOW
        EVENTS</code></a> statement, like this:
      </p><pre class="programlisting">
SHOW EVENTS
    WHERE STATUS = 'SLAVESIDE_DISABLED';
</pre><p>
        When promoting a replication slave having such events to a
        replication master, you must enable each event using
        <a class="link" href="sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT Syntax"><code class="literal">ALTER EVENT
        <em class="replaceable"><code>event_name</code></em> ENABLED</code></a>, where
        <em class="replaceable"><code>event_name</code></em> is the name of the event.
      </p><p>
        If more than one master was involved in creating events on this
        slave, and you wish to identify events that were created only on
        a given master having the server ID
        <em class="replaceable"><code>master_id</code></em>, modify the previous query
        on the <a class="link" href="information-schema.html#events-table" title="21.7 The INFORMATION_SCHEMA EVENTS Table"><code class="literal">EVENTS</code></a> table to include the
        <code class="literal">ORIGINATOR</code> column, as shown here:
      </p><pre class="programlisting">
SELECT EVENT_SCHEMA, EVENT_NAME, ORIGINATOR
    FROM INFORMATION_SCHEMA.EVENTS
    WHERE STATUS = 'SLAVESIDE_DISABLED'
    AND   ORIGINATOR = '<em class="replaceable"><code>master_id</code></em>'
</pre><p>
        You can employ <code class="literal">ORIGINATOR</code> with the
        <a class="link" href="sql-syntax.html#show-events" title="13.7.5.19 SHOW EVENTS Syntax"><code class="literal">SHOW EVENTS</code></a> statement in a
        similar fashion:
      </p><pre class="programlisting">
SHOW EVENTS
    WHERE STATUS = 'SLAVESIDE_DISABLED'
    AND   ORIGINATOR = '<em class="replaceable"><code>master_id</code></em>'
</pre><p>
        Before enabling events that were replicated from the master, you
        should disable the MySQL Event Scheduler on the slave (using a
        statement such as <code class="literal">SET GLOBAL event_scheduler =
        OFF;</code>), run any necessary <a class="link" href="sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT Syntax"><code class="literal">ALTER
        EVENT</code></a> statements, restart the server, then re-enable
        the Event Scheduler on the slave afterward (using a statement
        such as <code class="literal">SET GLOBAL event_scheduler = ON;</code>)-
      </p><p>
        If you later demote the new master back to being a replication
        slave, you must disable manually all events enabled by the
        <a class="link" href="sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a> statements. You can
        do this by storing in a separate table the event names from the
        <a class="link" href="sql-syntax.html#select" title="13.2.9 SELECT Syntax"><code class="literal">SELECT</code></a> statement shown
        previously, or using <a class="link" href="sql-syntax.html#alter-event" title="13.1.2 ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a>
        statements to rename the events with a common prefix such as
        <code class="literal">replicated_</code> to identify them.
      </p><p>
        If you rename the events, then when demoting this server back to
        being a replication slave, you can identify the events by
        querying the <a class="link" href="information-schema.html#events-table" title="21.7 The INFORMATION_SCHEMA EVENTS Table"><code class="literal">EVENTS</code></a> table, as shown
        here:
      </p><pre class="programlisting">
SELECT CONCAT(EVENT_SCHEMA, '.', EVENT_NAME) AS 'Db.Event'
      FROM INFORMATION_SCHEMA.EVENTS
      WHERE INSTR(EVENT_NAME, 'replicated_') = 1;
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-floatvalues"></a>17.4.1.12 Replication and Floating-Point Values</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478783568"></a><a class="indexterm" name="idm140301478782064"></a><p>
        With statement-based replication, values are converted from
        decimal to binary. Because conversions between decimal and
        binary representations of them may be approximate, comparisons
        involving floating-point values are inexact. This is true for
        operations that use floating-point values explicitly, or that
        use values that are converted to floating-point implicitly.
        Comparisons of floating-point values might yield different
        results on master and slave servers due to differences in
        computer architecture, the compiler used to build MySQL, and so
        forth. See <a class="xref" href="functions.html#type-conversion" title="12.2 Type Conversion in Expression Evaluation">Section 12.2, “Type Conversion in Expression Evaluation”</a>, and
        <a class="xref" href="error-handling.html#problems-with-float" title="B.5.5.8 Problems with Floating-Point Values">Section B.5.5.8, “Problems with Floating-Point Values”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-flush"></a>17.4.1.13 Replication and FLUSH</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478776832"></a><a class="indexterm" name="idm140301478775344"></a><p>
        Some forms of the <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH</code></a> statement
        are not logged because they could cause problems if replicated
        to a slave: <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH
        LOGS</code></a>, <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH
        MASTER</code></a>, <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH
        SLAVE</code></a>, and
        <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
        LOCK</code></a>. For a syntax example, see
        <a class="xref" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax">Section 13.7.6.3, “FLUSH Syntax”</a>. The
        <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH TABLES</code></a>,
        <a class="link" href="sql-syntax.html#analyze-table" title="13.7.2.1 ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a>,
        <a class="link" href="sql-syntax.html#optimize-table" title="13.7.2.4 OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>, and
        <a class="link" href="sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> statements are
        written to the binary log and thus replicated to slaves. This is
        not normally a problem because these statements do not modify
        table data.
      </p><p>
        However, this behavior can cause difficulties under certain
        circumstances. If you replicate the privilege tables in the
        <code class="literal">mysql</code> database and update those tables
        directly without using <a class="link" href="sql-syntax.html#grant" title="13.7.1.3 GRANT Syntax"><code class="literal">GRANT</code></a>, you
        must issue a <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH
        PRIVILEGES</code></a> on the slaves to put the new privileges
        into effect. In addition, if you use
        <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH TABLES</code></a>
        when renaming a <code class="literal">MyISAM</code> table that is part of
        a <code class="literal">MERGE</code> table, you must issue
        <a class="link" href="sql-syntax.html#flush" title="13.7.6.3 FLUSH Syntax"><code class="literal">FLUSH TABLES</code></a>
        manually on the slaves. These statements are written to the
        binary log unless you specify
        <code class="literal">NO_WRITE_TO_BINLOG</code> or its alias
        <code class="literal">LOCAL</code>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-functions"></a>17.4.1.14 Replication and System Functions</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478750896"></a><a class="indexterm" name="idm140301478749408"></a><p>
        Certain functions do not replicate well under some conditions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>,
            <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> (or
            <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a>),
            <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a>,
            <a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a>, and
            <a class="link" href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a> functions are
            replicated without change and thus do not work reliably on
            the slave unless row-based replication is enabled. (See
            <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.)
          </p><p>
            <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> and
            <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> are
            automatically replicated using row-based replication when
            using <code class="literal">MIXED</code> mode, and generate a warning
            in <code class="literal">STATEMENT</code> mode. (Bug #28086) (See also
            <a class="xref" href="replication.html#replication-features-current-user" title="17.4.1.7 Replication of CURRENT_USER()">Section 17.4.1.7, “Replication of CURRENT_USER()”</a>.)
          </p><p>
            Beginning with MySQL 5.5.1,
            <a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a> is also
            automatically replicated using row-based replication when
            using <code class="literal">MIXED</code> mode, and generates a warning
            in <code class="literal">STATEMENT</code> mode. (Bug #47995) Beginning
            with MySQL 5.5.2, this is also true with regard to the
            <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a> function. (Bug #49222)
          </p></li><li class="listitem"><p>
            For <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>, the binary log
            includes the timestamp. This means that the value
            <span class="emphasis"><em>as returned by the call to this function on the
            master</em></span> is replicated to the slave. This can lead
            to a possibly unexpected result when replicating between
            MySQL servers in different time zones. Suppose that the
            master is located in New York, the slave is located in
            Stockholm, and both servers are using local time. Suppose
            further that, on the master, you create a table
            <code class="literal">mytable</code>, perform an
            <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statement on this
            table, and then select from the table, as shown here:
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE mytable (mycol TEXT);</code></strong>
Query OK, 0 rows affected (0.06 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO mytable VALUES ( NOW() );</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM mytable;</code></strong>
+---------------------+
| mycol               |
+---------------------+
| 2009-09-01 12:00:00 |
+---------------------+
1 row in set (0.00 sec)
</pre><p>
            Local time in Stockholm is 6 hours later than in New York;
            so, if you issue <code class="literal">SELECT NOW()</code> on the
            slave at that exact same instant, the value
            <code class="literal">2009-09-01 18:00:00</code> is returned. For this
            reason, if you select from the slave's copy of
            <code class="literal">mytable</code> after the
            <a class="link" href="sql-syntax.html#create-table" title="13.1.17 CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> and
            <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statements just shown
            have been replicated, you might expect
            <code class="literal">mycol</code> to contain the value
            <code class="literal">2009-09-01 18:00:00</code>. However, this is not
            the case; when you select from the slave's copy of
            <code class="literal">mytable</code>, you obtain exactly the same
            result as on the master:
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT * FROM mytable;</code></strong>
+---------------------+
| mycol               |
+---------------------+
| 2009-09-01 12:00:00 |
+---------------------+
1 row in set (0.00 sec)
</pre><p>
            Unlike <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>, the
            <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> function is not
            replication-safe because it is not affected by <code class="literal">SET
            TIMESTAMP</code> statements in the binary log and is
            nondeterministic if statement-based logging is used. This is
            not a problem if row-based logging is used.
          </p><p>
            An alternative is to use the
            <a class="link" href="server-administration.html#option_mysqld_sysdate-is-now"><code class="option">--sysdate-is-now</code></a> option to
            cause <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> to be an
            alias for <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>. This must be
            done on the master and the slave to work correctly. In such
            cases, a warning is still issued by this function, but can
            safely be ignored as long as
            <a class="link" href="server-administration.html#option_mysqld_sysdate-is-now"><code class="option">--sysdate-is-now</code></a> is used on
            both the master and the slave.
          </p><p>
            Beginning with MySQL 5.5.1,
            <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> is automatically
            replicated using row-based replication when using
            <code class="literal">MIXED</code> mode, and generates a warning in
            <code class="literal">STATEMENT</code> mode. (Bug #47995)
          </p><p>
            See also <a class="xref" href="replication.html#replication-features-timezone" title="17.4.1.32 Replication and Time Zones">Section 17.4.1.32, “Replication and Time Zones”</a>.
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>The following restriction applies to
            statement-based replication only, not to row-based
            replication.</em></span> The
            <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>,
            <a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>,
            <a class="link" href="functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK()</code></a>, and
            <a class="link" href="functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a> functions that
            handle user-level locks are replicated without the slave
            knowing the concurrency context on the master. Therefore,
            these functions should not be used to insert into a master
            table because the content on the slave would differ. For
            example, do not issue a statement such as <code class="literal">INSERT
            INTO mytable VALUES(GET_LOCK(...))</code>.
          </p><p>
            Beginning with MySQL 5.5.1, these functions are
            automatically replicated using row-based replication when
            using <code class="literal">MIXED</code> mode, and generate a warning
            in <code class="literal">STATEMENT</code> mode. (Bug #47995)
</p></li></ul>
</div>
<p>
        As a workaround for the preceding limitations when
        statement-based replication is in effect, you can use the
        strategy of saving the problematic function result in a user
        variable and referring to the variable in a later statement. For
        example, the following single-row
        <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> is problematic due to the
        reference to the <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a> function:
      </p><pre class="programlisting">
INSERT INTO t VALUES(UUID());
</pre><p>
        To work around the problem, do this instead:
      </p><pre class="programlisting">
SET @my_uuid = UUID();
INSERT INTO t VALUES(@my_uuid);
</pre><p>
        That sequence of statements replicates because the value of
        <code class="literal">@my_uuid</code> is stored in the binary log as a
        user-variable event prior to the
        <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statement and is available
        for use in the <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a>.
      </p><p>
        The same idea applies to multiple-row inserts, but is more
        cumbersome to use. For a two-row insert, you can do this:
      </p><pre class="programlisting">
SET @my_uuid1 = UUID(); @my_uuid2 = UUID();
INSERT INTO t VALUES(@my_uuid1),(@my_uuid2);
</pre><p>
        However, if the number of rows is large or unknown, the
        workaround is difficult or impracticable. For example, you
        cannot convert the following statement to one in which a given
        individual user variable is associated with each row:
      </p><pre class="programlisting">
INSERT INTO t2 SELECT UUID(), * FROM t1;
</pre><p>
        Within a stored function, <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a>
        replicates correctly as long as it is invoked only once during
        the execution of the function. (You can consider the function
        execution timestamp and random number seed as implicit inputs
        that are identical on the master and slave.)
      </p><p>
        The <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> and
        <a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> functions are not
        replicated reliably using statement-based replication. A
        workaround is to store the result of the function call in a user
        variable, and then use that in the
        <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statement. For example, if
        you wish to store the result in a table named
        <code class="literal">mytable</code>, you might normally do so like this:
      </p><pre class="programlisting">
SELECT SQL_CALC_FOUND_ROWS FROM mytable LIMIT 1;
INSERT INTO mytable VALUES( FOUND_ROWS() );
</pre><p>
        However, if you are replicating <code class="literal">mytable</code>, you
        should use <a class="link" href="sql-syntax.html#select-into" title="13.2.9.1 SELECT ... INTO Syntax"><code class="literal">SELECT
        ... INTO</code></a>, and then store the variable in the table,
        like this:
      </p><pre class="programlisting">
SELECT SQL_CALC_FOUND_ROWS INTO @found_rows FROM mytable LIMIT 1;
INSERT INTO mytable VALUES(@found_rows);
</pre><p>
        In this way, the user variable is replicated as part of the
        context, and applied on the slave correctly.
      </p><p>
        These functions are automatically replicated using row-based
        replication when using <code class="literal">MIXED</code> mode, and
        generate a warning in <code class="literal">STATEMENT</code> mode. (Bug
        #12092, Bug #30244)
      </p><p>
        Prior to MySQL 5.5.35, the value of
        <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> was not
        replicated correctly if any filtering options such as
        <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a> and
        <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a> were enabled
        on the slave. (Bug #17234370, BUG# 69861)
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-limit"></a>17.4.1.15 Replication and LIMIT</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478657888"></a><a class="indexterm" name="idm140301478656400"></a><p>
        Statement-based replication of <code class="literal">LIMIT</code> clauses
        in <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a>,
        <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
        <a class="link" href="sql-syntax.html#insert-select" title="13.2.5.1 INSERT ... SELECT Syntax"><code class="literal">INSERT ...
        SELECT</code></a> statements is unsafe since the order of the
        rows affected is not defined. (Such statements can be replicated
        correctly with statement-based replication only if they also
        contain an <code class="literal">ORDER BY</code> clause.) When such a
        statement is encountered:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            When using <code class="literal">STATEMENT</code> mode, a warning that
            the statement is not safe for statement-based replication is
            now issued.
          </p><p>
            Currently, when using <code class="literal">STATEMENT</code> mode,
            warnings are issued for DML statements containing
            <code class="literal">LIMIT</code> even when they also have an
            <code class="literal">ORDER BY</code> clause (and so are made
            deterministic). This is a known issue. (Bug #42851)
          </p></li><li class="listitem"><p>
            When using <code class="literal">MIXED</code> mode, the statement is
            now automatically replicated using row-based mode.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-load-data"></a>17.4.1.16 Replication and LOAD DATA INFILE</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478641424"></a><a class="indexterm" name="idm140301478639936"></a><p>
        The <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statement was not always replicated correctly
        to a slave running MySQL 5.5.0 or earlier from a master running
        MySQL 4.0 or earlier. When using statement-based replication,
        the <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> statement <code class="literal">CONCURRENT</code> option
        was not replicated. This issue was fixed in MySQL 5.5.0. This
        issue does not have any impact on <code class="literal">CONCURRENT</code>
        option handling when using row-based replication in MySQL 5.1 or
        later. (Bug #34628)
      </p><p>
        In MySQL 5.5.6 and later,
        <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> is considered unsafe (see
        <a class="xref" href="replication.html#replication-rbr-safe-unsafe" title="17.1.2.3 Determination of Safe and Unsafe Statements in Binary Logging">Section 17.1.2.3, “Determination of Safe and Unsafe Statements in Binary Logging”</a>). It causes a
        warning when using statement-based logging format, and is logged
        using row-based format when using mixed-format logging.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-logging"></a>17.4.1.17 Replication and the Slow Query Log</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478629808"></a><a class="indexterm" name="idm140301478628320"></a><p>
        In older versions of MySQL, replication slaves did not write
        replicated queries to the slow query log, even if the same
        queries were written to the slow query log on the master. This
        is no longer an issue in MySQL 5.5. (Bug #23300)
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-repair-table"></a>17.4.1.18 Replication and REPAIR TABLE</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478624896"></a><a class="indexterm" name="idm140301478623392"></a><p>
        When used on a corrupted or otherwise damaged table, it is
        possible for the <a class="link" href="sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>
        statement to delete rows that cannot be recovered. However, any
        such modifications of table data performed by this statement are
        not replicated, which can cause master and slave to lose
        synchronization. For this reason, in the event that a table on
        the master becomes damaged and you use
        <a class="link" href="sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> to repair it, you
        should first stop replication (if it is still running) before
        using <a class="link" href="sql-syntax.html#repair-table" title="13.7.2.5 REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>, then
        afterward compare the master's and slave's copies of
        the table and be prepared to correct any discrepancies manually,
        before restarting replication.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-shutdowns"></a>17.4.1.19 Replication and Master or Slave Shutdowns</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478615744"></a><a class="indexterm" name="idm140301478614256"></a><a class="indexterm" name="idm140301478612768"></a><p>
        It is safe to shut down a master server and restart it later.
        When a slave loses its connection to the master, the slave tries
        to reconnect immediately and retries periodically if that fails.
        The default is to retry every 60 seconds. This may be changed
        with the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>
        statement. A slave also is able to deal with network
        connectivity outages. However, the slave notices the network
        outage only after receiving no data from the master for
        <a class="link" href="replication.html#sysvar_slave_net_timeout"><code class="literal">slave_net_timeout</code></a> seconds. If
        your outages are short, you may want to decrease
        <a class="link" href="replication.html#sysvar_slave_net_timeout"><code class="literal">slave_net_timeout</code></a>. See
        <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4 Server System Variables">Section 5.1.4, “Server System Variables”</a>.
      </p><p>
        An unclean shutdown (for example, a crash) on the master side
        can result in the master binary log having a final position less
        than the most recent position read by the slave, due to the
        master binary log file not being flushed. This can cause the
        slave not to be able to replicate when the master comes back up.
        Setting <a class="link" href="replication.html#sysvar_sync_binlog"><code class="literal">sync_binlog=1</code></a> in the
        master <code class="filename">my.cnf</code> file helps to minimize this
        problem because it causes the master to flush its binary log
        more frequently.
      </p><p>
        Shutting down a slave cleanly is safe because it keeps track of
        where it left off. However, be careful that the slave does not
        have temporary tables open; see
        <a class="xref" href="replication.html#replication-features-temptables" title="17.4.1.22 Replication and Temporary Tables">Section 17.4.1.22, “Replication and Temporary Tables”</a>. Unclean
        shutdowns might produce problems, especially if the disk cache
        was not flushed to disk before the problem occurred:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            For transactions, the slave commits and then updates
            <code class="filename">relay-log.info</code>. If a crash occurs
            between these two operations, relay log processing will have
            proceeded further than the information file indicates and
            the slave will re-execute the events from the last
            transaction in the relay log after it has been restarted.
          </p></li><li class="listitem"><p>
            A similar problem can occur if the slave updates
            <code class="filename">relay-log.info</code> but the server host
            crashes before the write has been flushed to disk. To
            minimize the chance of this occurring, set
            <a class="link" href="replication.html#sysvar_sync_relay_log_info"><code class="literal">sync_relay_log_info=1</code></a> in
            the slave <code class="filename">my.cnf</code> file. The default
            value of
            <a class="link" href="replication.html#sysvar_sync_relay_log_info"><code class="literal">sync_relay_log_info</code></a> is 0,
            which does not cause writes to be forced to disk; the server
            relies on the operating system to flush the file from time
            to time.
</p></li></ul>
</div>
<p>
        The fault tolerance of your system for these types of problems
        is greatly increased if you have a good uninterruptible power
        supply.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-max-allowed-packet"></a>17.4.1.20 Replication and max_allowed_packet</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478592352"></a><a class="indexterm" name="idm140301478590864"></a><p>
        <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> sets an
        upper limit on the size of any single message between the MySQL
        server and clients, including replication slaves. If you are
        replicating large column values (such as might be found in
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">TEXT</code></a> or
        <a class="link" href="data-types.html#blob" title="11.4.3 The BLOB and TEXT Types"><code class="literal">BLOB</code></a> columns) and
        <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> is too small
        on the master, the master fails with an error, and the slave
        shuts down the I/O thread. If
        <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> is too small
        on the slave, this also causes the slave to stop the I/O thread.
      </p><p>
        Row-based replication currently sends all columns and column
        values for updated rows from the master to the slave, including
        values of columns that were not actually changed by the update.
        This means that, when you are replicating large column values
        using row-based replication, you must take care to set
        <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> large enough
        to accommodate the largest row in any table to be replicated,
        even if you are replicating updates only, or you are inserting
        only relatively small values.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-memory"></a>17.4.1.21 Replication and MEMORY Tables</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478578512"></a><a class="indexterm" name="idm140301478577024"></a><p>
        When a master server shuts down and restarts, its
        <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables become empty. To
        replicate this effect to slaves, the first time that the master
        uses a given <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> table after
        startup, it logs an event that notifies slaves that the table
        must to be emptied by writing a
        <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> statement for that table
        to the binary log.
      </p><p>
        When a slave server shuts down and restarts, its
        <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables become empty. This
        causes the slave to be out of synchrony with the master and may
        lead to other failures or cause the slave to stop:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Row-format updates and deletes received from the master may
            fail with <code class="literal">Can't find record in
            '<em class="replaceable"><code>memory_table</code></em>'</code>.
          </p></li><li class="listitem"><p>
            Statements such as
            <a class="link" href="sql-syntax.html#insert-select" title="13.2.5.1 INSERT ... SELECT Syntax"><code class="literal">INSERT INTO
            ... SELECT FROM
            <em class="replaceable"><code>memory_table</code></em></code></a> may insert
            a different set of rows on the master and slave.
</p></li></ul>
</div>
<p>
        The safe way to restart a slave that is replicating
        <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables is to first drop or
        delete all rows from the <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a>
        tables on the master and wait until those changes have
        replicated to the slave. Then it is safe to restart the slave.
      </p><p>
        An alternative restart method may apply in some cases. When
        <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=ROW</code></a>, you can
        prevent the slave from stopping if you set
        <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode=IDEMPOTENT</code></a>
        before you start the slave again. This allows the slave to
        continue to replicate, but its
        <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables will still be
        different from those on the master. This can be okay if the
        application logic is such that the contents of
        <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables can be safely lost
        (for example, if the <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables
        are used for caching).
        <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode=IDEMPOTENT</code></a>
        applies globally to all tables, so it may hide other replication
        errors in non-<a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables.
      </p><p>
        (The method just described is not applicable in MySQL Cluster,
        where <a class="link" href="replication.html#sysvar_slave_exec_mode"><code class="literal">slave_exec_mode</code></a> is always
        <code class="literal">IDEMPOTENT</code>, and cannot be changed.)
      </p><p>
        The size of <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables is
        limited by the value of the
        <a class="link" href="server-administration.html#sysvar_max_heap_table_size"><code class="literal">max_heap_table_size</code></a> system
        variable, which is not replicated (see
        <a class="xref" href="replication.html#replication-features-variables" title="17.4.1.36 Replication and Variables">Section 17.4.1.36, “Replication and Variables”</a>). A change in
        <code class="literal">max_heap_table_size</code> takes effect for
        <code class="literal">MEMORY</code> tables that are created or updated
        using <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER TABLE
        ... ENGINE = MEMORY</code></a> or <a class="link" href="sql-syntax.html#truncate-table" title="13.1.33 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE
        TABLE</code></a> following the change, or for all
        <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables following a server
        restart. If you increase the value of this variable on the
        master without doing so on the slave, it becomes possible for a
        table on the master to grow larger than its counterpart on the
        slave, leading to inserts that succeed on the master but fail on
        the slave with <span class="errortext">Table is full</span> errors. This
        is a known issue (Bug #48666). In such cases, you must set the
        global value of
        <a class="link" href="server-administration.html#sysvar_max_heap_table_size"><code class="literal">max_heap_table_size</code></a> on the
        slave as well as on the master, then restart replication. It is
        also recommended that you restart both the master and slave
        MySQL servers, to insure that the new value takes complete
        (global) effect on each of them.
      </p><p>
        See <a class="xref" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine">Section 15.4, “The MEMORY Storage Engine”</a>, for more
        information about <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> tables.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-temptables"></a>17.4.1.22 Replication and Temporary Tables</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478534368"></a><a class="indexterm" name="idm140301478532880"></a><a class="indexterm" name="idm140301478531392"></a><p>
        The discussion in the following paragraphs does not apply when
        <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format=ROW</code></a> because, in
        that case, temporary tables are not replicated; this means that
        there are never any temporary tables on the slave to be lost in
        the event of an unplanned shutdown by the slave. The remainder
        of this section applies only when using statement-based or
        mixed-format replication. Loss of replicated temporary tables on
        the slave can be an issue, whenever
        <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is
        <code class="literal">STATEMENT</code> or <code class="literal">MIXED</code>, for
        statements involving temporary tables that can be logged safely
        using statement-based format. For more information about
        row-based replication and temporary tables, see
        <a class="xref" href="replication.html#replication-rbr-usage-temptables" title="RBL, RBR, and temporary tables">RBL, RBR, and temporary tables</a>.
      </p><p><b>Safe slave shutdown when using temporary tables. </b>
          Temporary tables are replicated except in the case where you
          stop the slave server (not just the slave threads) and you
          have replicated temporary tables that are open for use in
          updates that have not yet been executed on the slave. If you
          stop the slave server, the temporary tables needed by those
          updates are no longer available when the slave is restarted.
          To avoid this problem, do not shut down the slave while it has
          temporary tables open. Instead, use the following procedure:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Issue a <code class="literal">STOP SLAVE SQL_THREAD</code> statement.
          </p></li><li class="listitem"><p>
            Use <a class="link" href="sql-syntax.html#show-status" title="13.7.5.36 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> to check the
            value of the
            <a class="link" href="server-administration.html#statvar_Slave_open_temp_tables"><code class="literal">Slave_open_temp_tables</code></a>
            variable.
          </p></li><li class="listitem"><p>
            If the value is not 0, restart the slave SQL thread with
            <code class="literal">START SLAVE SQL_THREAD</code> and repeat the
            procedure later.
          </p></li><li class="listitem"><p>
            When the value is 0, issue a <a class="link" href="programs.html#mysqladmin" title="4.5.2 mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin
            shutdown</strong></span></a> command to stop the slave.
</p></li></ol>
</div>
<p><b>Temporary tables and replication options. </b>
          By default, all temporary tables are replicated; this happens
          whether or not there are any matching
          <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>,
          <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a>, or
          <a class="link" href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a>
          options in effect. However, the
          <a class="link" href="replication.html#option_mysqld_replicate-ignore-table"><code class="option">--replicate-ignore-table</code></a> and
          <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table</code></a>
          options are honored for temporary tables.
        </p><p>
        A recommended practice when using statement-based or
        mixed-format replication is to designate a prefix for exclusive
        use in naming temporary tables that you do not want replicated,
        then employ a
        <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table</code></a>
        option to match that prefix. For example, you might give all
        such tables names beginning with <code class="literal">norep</code> (such
        as <code class="literal">norepmytable</code>,
        <code class="literal">norepyourtable</code>, and so on), then use
        <a class="link" href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table=norep%</code></a>
        to prevent them from being replicated.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-mysqldb"></a>17.4.1.23 Replication of the mysql System Database</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478500016"></a><a class="indexterm" name="idm140301478498560"></a><a class="indexterm" name="idm140301478497072"></a><a class="indexterm" name="idm140301478495584"></a><p>
        Data modification statements made to tables in the
        <code class="literal">mysql</code> database are replicated according to
        the value of <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>; if
        this value is <code class="literal">MIXED</code>, these statements are
        replicated using row-based format. However, statements that
        would normally update this information indirectly—such
        <a class="link" href="sql-syntax.html#grant" title="13.7.1.3 GRANT Syntax"><code class="literal">GRANT</code></a>,
        <a class="link" href="sql-syntax.html#revoke" title="13.7.1.5 REVOKE Syntax"><code class="literal">REVOKE</code></a>, and statements
        manipulating triggers, stored routines, and views—are
        replicated to slaves using statement-based replication.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-optimizer"></a>17.4.1.24 Replication and the Query Optimizer</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478486496"></a><a class="indexterm" name="idm140301478485008"></a><p>
        It is possible for the data on the master and slave to become
        different if a statement is written in such a way that the data
        modification is nondeterministic; that is, left up the query
        optimizer. (In general, this is not a good practice, even
        outside of replication.) Examples of nondeterministic statements
        include <a class="link" href="sql-syntax.html#delete" title="13.2.2 DELETE Syntax"><code class="literal">DELETE</code></a> or
        <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statements that use
        <code class="literal">LIMIT</code> with no <code class="literal">ORDER BY</code>
        clause; see <a class="xref" href="replication.html#replication-features-limit" title="17.4.1.15 Replication and LIMIT">Section 17.4.1.15, “Replication and LIMIT”</a>, for a
        detailed discussion of these.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-reserved-words"></a>17.4.1.25 Replication and Reserved Words</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478476768"></a><a class="indexterm" name="idm140301478475280"></a><p>
        You can encounter problems when you attempt to replicate from an
        older master to a newer slave and you make use of identifiers on
        the master that are reserved words in the newer MySQL version
        running on the slave. An example of this is using a table column
        named <code class="literal">current_user</code> on a 4.0 master that is
        replicating to a 4.1 or higher slave because
        <code class="literal">CURRENT_USER</code> is a reserved word beginning in
        MySQL 4.1. Replication can fail in such cases with Error 1064
        <span class="errortext">You have an error in your SQL syntax...</span>,
        <span class="emphasis"><em>even if a database or table named using the reserved
        word or a table having a column named using the reserved word is
        excluded from replication</em></span>. This is due to the fact
        that each SQL event must be parsed by the slave prior to
        execution, so that the slave knows which database object or
        objects would be affected; only after the event is parsed can
        the slave apply any filtering rules defined by
        <a class="link" href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a>,
        <a class="link" href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a>,
        <a class="link" href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a>, and
        <a class="link" href="replication.html#option_mysqld_replicate-ignore-table"><code class="option">--replicate-ignore-table</code></a>.
      </p><p>
        To work around the problem of database, table, or column names
        on the master which would be regarded as reserved words by the
        slave, do one of the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Use one or more <a class="link" href="sql-syntax.html#alter-table" title="13.1.7 ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>
            statements on the master to change the names of any database
            objects where these names would be considered reserved words
            on the slave, and change any SQL statements that use the old
            names to use the new names instead.
          </p></li><li class="listitem"><p>
            In any SQL statements using these database object names,
            write the names as quoted identifiers using backtick
            characters (<code class="literal">`</code>).
</p></li></ul>
</div>
<p>
        For listings of reserved words by MySQL version, see
        <a class="ulink" href="http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-optvar.html" target="_top">Reserved
        Words</a>, in the <em class="citetitle">MySQL Server Version
        Reference</em>. For identifier quoting rules, see
        <a class="xref" href="language-structure.html#identifiers" title="9.2 Schema Object Names">Section 9.2, “Schema Object Names”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-set-password"></a>17.4.1.26 SET PASSWORD and Row-Based Replication</h4>

</div>

</div>

</div>
<p>
        Row-based replication of <a class="link" href="sql-syntax.html#set-password" title="13.7.1.6 SET PASSWORD Syntax"><code class="literal">SET
        PASSWORD</code></a> statements from a MySQL 5.1 master to a MySQL
        5.5 slave did not work correctly prior to MySQL 5.1.53 on the
        master and MySQL 5.5.7 on the slave (see Bug #57098, Bug
        #57357).
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-slaveerrors"></a>17.4.1.27 Slave Errors During Replication</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478454368"></a><a class="indexterm" name="idm140301478452880"></a><a class="indexterm" name="idm140301478451392"></a><a class="indexterm" name="idm140301478449904"></a><p>
        If a statement produces the same error (identical error code) on
        both the master and the slave, the error is logged, but
        replication continues.
      </p><p>
        If a statement produces different errors on the master and the
        slave, the slave SQL thread terminates, and the slave writes a
        message to its error log and waits for the database
        administrator to decide what to do about the error. This
        includes the case that a statement produces an error on the
        master or the slave, but not both. To address the issue, connect
        to the slave manually and determine the cause of the problem.
        <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> is useful for
        this. Then fix the problem and run <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START
        SLAVE</code></a>. For example, you might need to create a
        nonexistent table before you can start the slave again.
      </p><p>
        If this error code validation behavior is not desirable, some or
        all errors can be masked out (ignored) with the
        <a class="link" href="replication.html#option_mysqld_slave-skip-errors"><code class="option">--slave-skip-errors</code></a> option.
      </p><p>
        For nontransactional storage engines such as
        <code class="literal">MyISAM</code>, it is possible to have a statement
        that only partially updates a table and returns an error code.
        This can happen, for example, on a multiple-row insert that has
        one row violating a key constraint, or if a long update
        statement is killed after updating some of the rows. If that
        happens on the master, the slave expects execution of the
        statement to result in the same error code. If it does not, the
        slave SQL thread stops as described previously.
      </p><p>
        If you are replicating between tables that use different storage
        engines on the master and slave, keep in mind that the same
        statement might produce a different error when run against one
        version of the table, but not the other, or might cause an error
        for one version of the table, but not the other. For example,
        since <code class="literal">MyISAM</code> ignores foreign key constraints,
        an <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a class="link" href="sql-syntax.html#update" title="13.2.11 UPDATE Syntax"><code class="literal">UPDATE</code></a> statement accessing an
        <code class="literal">InnoDB</code> table on the master might cause a
        foreign key violation but the same statement performed on a
        <code class="literal">MyISAM</code> version of the same table on the slave
        would produce no such error, causing replication to stop.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-server-side-help"></a>17.4.1.28 Replication of Server-Side Help Tables</h4>

</div>

</div>

</div>
<p>
        The server maintains tables in the <code class="literal">mysql</code>
        database that store information for the
        <a class="link" href="sql-syntax.html#help" title="13.8.3 HELP Syntax"><code class="literal">HELP</code></a> statement (see
        <a class="xref" href="sql-syntax.html#help" title="13.8.3 HELP Syntax">Section 13.8.3, “HELP Syntax”</a>. These tables can be loaded manually as
        described at <a class="xref" href="server-administration.html#server-side-help-support" title="5.1.10 Server-Side Help">Section 5.1.10, “Server-Side Help”</a>.
      </p><p>
        Help table content is derived from the MySQL Reference Manual.
        There are versions of the manual specific to each MySQL release
        series, so help content is specific to each series as well.
        Normally, you load a version of help content that matches the
        server version. This has implications for replication. For
        example, you would load MySQL 5.5 help content into a MySQL 5.5
        master server, but not necessarily replicate that content to a
        MySQL 5.6 slave server for which 5.6 help content is more
        appropriate.
      </p><p>
        This section describes how to manage help table content upgrades
        when your servers participate in replication. Server versions
        are one factor in this task. Another is that help table
        structure may differ between the master and the slave.
      </p><p>
        Assume that help content is stored in a file named
        <code class="filename">fill_help_tables.sql</code>. In MySQL
        distributions, this file is located under the
        <code class="filename">share</code> or <code class="literal">share/mysql</code>
        directory, and the most recent version is always available for
        download from <a class="ulink" href="http://dev.mysql.com/doc/index-other.html" target="_top">http://dev.mysql.com/doc/index-other.html</a>.
      </p><p>
        To upgrade help tables, using the following procedure.
        Connection parameters are not shown for the
        <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a> commands discussed here; in all cases,
        connect to the server using an account such as
        <code class="literal">root</code> that has privileges for modifying tables
        in the <code class="literal">mysql</code> database.
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Upgrade your servers by running
            <a class="link" href="programs.html#mysql-upgrade" title="4.4.7 mysql_upgrade — Check and Upgrade MySQL Tables"><span class="command"><strong>mysql_upgrade</strong></span></a>, first on the slaves and
            then on the master. This is the usual principle of upgrading
            slaves first.
          </p></li><li class="listitem"><p>
            Decide whether you want to replicate help table content from
            the master to its slaves. If not, load the content on the
            master and each slave individually. Otherwise, check for and
            resolve any incompatibilities between help table structure
            on the master and its slaves, then load the content into the
            master and let it replicate to the slaves.
          </p><p>
            More detail about these two methods of loading help table
            content follows.
</p></li></ol>
</div>
<h5><a name="idm140301478417136"></a>Loading Help Table Content Without Replication to Slaves</h5>
<p>
        To load help table content without replication, run this command
        on the master and each slave individually, using a
        <code class="filename">fill_help_tables.sql</code> file containing
        content appropriate to the server version (enter the command on
        one line):
      </p><pre class="programlisting">
mysql --init-command="SET sql_log_bin=0"
  mysql &lt; fill_help_tables.sql
</pre><p>
        Use the <a class="link" href="programs.html#option_mysql_init-command"><code class="option">--init-command</code></a> option on
        each server, including the slaves, in case a slave also acts as
        a master to other slaves in your replication topology. The
        <code class="literal">SET</code> statement suppresses binary logging.
        After the command has been run on each server to be upgraded,
        you are done.
</p>
<h5><a name="idm140301478411808"></a>Loading Help Table Content With Replication to Slaves</h5>
<p>
        If you do want to replicate help table content, check for help
        table incompatibilities between your master and its slaves. The
        <code class="literal">url</code> column in the
        <code class="literal">help_category</code> and
        <code class="literal">help_topic</code> tables was originally
        <code class="literal">CHAR(128)</code>, but is <code class="literal">TEXT</code> in
        newer MySQL versions to accommodate longer URLs. To check help
        table structure, use this statement:
      </p><pre class="programlisting">
SELECT TABLE_NAME, COLUMN_NAME, COLUMN_TYPE
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = 'mysql'
AND COLUMN_NAME = 'url';
</pre><p>
        For tables with the old structure, the statement produces this
        result:
      </p><pre class="programlisting">
+---------------+-------------+-------------+
| TABLE_NAME    | COLUMN_NAME | COLUMN_TYPE |
+---------------+-------------+-------------+
| help_category | url         | char(128)   |
| help_topic    | url         | char(128)   |
+---------------+-------------+-------------+
</pre><p>
        For tables with the new structure, the statement produces this
        result:
      </p><pre class="programlisting">
+---------------+-------------+-------------+
| TABLE_NAME    | COLUMN_NAME | COLUMN_TYPE |
+---------------+-------------+-------------+
| help_category | url         | text        |
| help_topic    | url         | text        |
+---------------+-------------+-------------+
</pre><p>
        If the master and slave both have the old structure or both have
        the new structure, they are compatible and you can replicate
        help table content by executing this command on the master:
      </p><pre class="programlisting">
mysql mysql &lt; fill_help_tables.sql
</pre><p>
        The table content will load into the master, then replicate to
        the slaves.
      </p><p>
        If the master and slave have incompatible help tables (one
        server has the old structure and the other has the new), you
        have a choice between not replicating help table content after
        all, or making the table structures compatible so that you can
        replicate the content.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            If you decide not to replicate the content after all,
            upgrade the master and slaves individually using
            <a class="link" href="programs.html#mysql" title="4.5.1 mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a> with the
            <a class="link" href="programs.html#option_mysql_init-command"><code class="option">--init-command</code></a> option, as
            described previously.
          </p></li><li class="listitem"><p>
            If instead you decide to make the table structures
            compatible, upgrade the tables on the server that has the
            old structure. Suppose that your master server has the old
            table structure. Upgrade its tables to the new structure
            manually by executing these statements (binary logging is
            disabled here to prevent replication of the changes to the
            slaves, which already have the new structure):
          </p><pre class="programlisting">
SET sql_log_bin=0;
ALTER TABLE mysql.help_category ALTER COLUMN url TEXT;
ALTER TABLE mysql.help_topic ALTER COLUMN url TEXT;
</pre><p>
            Then run this command on the master:
          </p><pre class="programlisting">
mysql mysql &lt; fill_help_tables.sql
</pre><p>
            The table content will load into the master, then replicate
            to the slaves.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-sql-mode"></a>17.4.1.29 Replication and Server SQL Mode</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478391840"></a><a class="indexterm" name="idm140301478390352"></a><a class="indexterm" name="idm140301478388864"></a><a class="indexterm" name="idm140301478387376"></a><a class="indexterm" name="idm140301478385888"></a><a class="indexterm" name="idm140301478384400"></a><p>
        Using different server SQL mode settings on the master and the
        slave may cause the same <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a>
        statements to be handled differently on the master and the
        slave, leading the master and slave to diverge. For best
        results, you should always use the same server SQL mode on the
        master and on the slave. This advice applies whether you are
        using statement-based or row-based replication.
      </p><p>
        If you are replicating partitioned tables, using different SQL
        modes on the master and the slave is likely to cause issues. At
        a minimum, this is likely to cause the distribution of data
        among partitions to be different in the master's and slave's
        copies of a given table. It may also cause inserts into
        partitioned tables that succeed on the master to fail on the
        slave.
      </p><p>
        For more information, see <a class="xref" href="server-administration.html#sql-mode" title="5.1.7 Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-timeout"></a>17.4.1.30 Replication Retries and Timeouts</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478377584"></a><a class="indexterm" name="idm140301478376096"></a><a class="indexterm" name="idm140301478374608"></a><a class="indexterm" name="idm140301478373536"></a><p>
        The global system variable
        <a class="link" href="replication.html#sysvar_slave_transaction_retries"><code class="literal">slave_transaction_retries</code></a>
        affects replication as follows: If the slave SQL thread fails to
        execute a transaction because of an <code class="literal">InnoDB</code>
        deadlock or because it exceeded the <code class="literal">InnoDB</code>
        <a class="link" href="innodb-storage-engine.html#sysvar_innodb_lock_wait_timeout"><code class="literal">innodb_lock_wait_timeout</code></a> value,
        or the <a class="link" href="mysql-cluster.html" title="Chapter 18 MySQL Cluster NDB 7.2"><code class="literal">NDBCLUSTER</code></a>
        <code class="literal">TransactionDeadlockDetectionTimeout</code> or
        <code class="literal">TransactionInactiveTimeout</code> value, the slave
        automatically retries the transaction
        <a class="link" href="replication.html#sysvar_slave_transaction_retries"><code class="literal">slave_transaction_retries</code></a> times
        before stopping with an error. The default value is 10. The
        total retry count can be seen in the output of
        <a class="link" href="sql-syntax.html#show-status" title="13.7.5.36 SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a>; see
        <a class="xref" href="server-administration.html#server-status-variables" title="5.1.6 Server Status Variables">Section 5.1.6, “Server Status Variables”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-timestamp"></a>17.4.1.31 Replication and TIMESTAMP</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478360128"></a><a class="indexterm" name="idm140301478358640"></a><a class="indexterm" name="idm140301478357152"></a><p>
        Older versions of MySQL (prior to 4.1) differed significantly in
        several ways in their handling of the
        <a class="link" href="data-types.html#datetime" title="11.3.1 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> data type from what is
        supported in MySQL versions 5.5 and newer; these
        include syntax extensions which are deprecated in MySQL 5.1, and
        that no longer supported in MySQL 5.5. This can cause problems
        (including replication failures) when replicating between MySQL
        Server versions, if you are using columns that are defined using
        the old <a class="link" href="data-types.html#datetime" title="11.3.1 The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP(N)</code></a> syntax. See
        <a class="xref" href="installing.html#upgrading-from-previous-series" title="2.11.1.1 Upgrading from MySQL 5.1 to 5.5">Section 2.11.1.1, “Upgrading from MySQL 5.1 to 5.5”</a>, for more
        information about the differences, how they can impact MySQL
        replication, and what you can do if you encounter such problems.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-timezone"></a>17.4.1.32 Replication and Time Zones</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478350160"></a><a class="indexterm" name="idm140301478348672"></a><p>
        The same system time zone should be set for both master and
        slave. Otherwise, statements depending on the local time on the
        master are not replicated properly, such as statements that use
        the <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> or
        <a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a> functions. You
        can set the time zone in which MySQL server runs by using the
        <a class="link" href="programs.html#option_mysqld_safe_timezone"><code class="option">--timezone=<em class="replaceable"><code>timezone_name</code></em></code></a>
        option of the <code class="filename">mysqld_safe</code> script or by
        setting the <code class="literal">TZ</code> environment variable. See also
        <a class="xref" href="replication.html#replication-features-functions" title="17.4.1.14 Replication and System Functions">Section 17.4.1.14, “Replication and System Functions”</a>.
      </p><p>
        If the master is MySQL 4.1 or earlier, both master and slave
        should also use the same default connection time zone. That is,
        the <a class="link" href="server-administration.html#option_mysqld_default-time-zone"><code class="option">--default-time-zone</code></a> parameter
        should have the same value for both master and slave.
      </p><p>
        <a class="link" href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ(...,...,@@session.time_zone)</code></a>
        is properly replicated only if both master and slave are running
        MySQL 5.0.4 or newer.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-transactions"></a>17.4.1.33 Replication and Transactions</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478335952"></a><a class="indexterm" name="idm140301478334464"></a><p><b>Mixing transactional and nontransactional statements within the same
          transaction. </b>
          In general, you should avoid transactions that update both
          transactional and nontransactional tables in a replication
          environment. You should also avoid using any statement that
          accesses both transactional (or temporary) and
          nontransactional tables and writes to any of them.
        </p><p>
        As of MySQL 5.5.2, the server uses these rules for binary
        logging:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            If the initial statements in a transaction are
            nontransactional, they are written to the binary log
            immediately. The remaining statements in the transaction are
            cached and not written to the binary log until the
            transaction is committed. (If the transaction is rolled
            back, the cached statements are written to the binary log
            only if they make nontransactional changes that cannot be
            rolled back. Otherwise, they are discarded.)
          </p></li><li class="listitem"><p>
            For statement-based logging, logging of nontransactional
            statements is affected by the
            <a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
            system variable. When this variable is
            <code class="literal">OFF</code> (the default), logging is as just
            described. When this variable is <code class="literal">ON</code>,
            logging occurs immediately for nontransactional statements
            occurring anywhere in the transaction (not just initial
            nontransactional statements). Other statements are kept in
            the transaction cache and logged when the transaction
            commits.
            <a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
            has no effect for row-format or mixed-format binary logging.
</p></li></ul>
</div>
<p><a name="replication-features-transactions-trx-nontrx-mixed"></a><b>Transactional, nontransactional, and mixed statements. </b><a class="indexterm" name="idm140301478322528"></a>
          To apply those rules, the server considers a statement
          nontransactional if it changes only nontransactional tables,
          and transactional if it changes only transactional tables.
          Prior to MySQL 5.5.6, a statement that changed both
          nontransactional and transactional tables was considered
          <span class="quote">“<span class="quote">mixed</span>”</span>. Beginning with MySQL 5.5.6, a statement
          that references both nontransactional and transactional tables
          and updates <span class="emphasis"><em>any</em></span> of the tables involved,
          is considered a mixed statement. Mixed statements, like
          transactional statements, are cached and logged when the
          transaction commits.
        </p><p>
        Beginning with MySQL 5.5.6, a mixed statement that updates a
        transactional table is considered unsafe if the statement also
        performs either of the following actions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Updates or reads a transactional table
          </p></li><li class="listitem"><p>
            Reads a nontransactional table and the transaction isolation
            level is less than REPEATABLE_READ
</p></li></ul>
</div>
<p>
        Also beginning with MySQL 5.5.6, any mixed statement following
        the update of a transactional table within a transaction is
        considered unsafe if it performs either of the following
        actions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Updates any table and reads from any temporary table
          </p></li><li class="listitem"><p>
            Updates a nontransactional table and
            binlog_direct_non_trans_update is OFF
</p></li></ul>
</div>
<p>
        For more information, see
        <a class="xref" href="replication.html#replication-rbr-safe-unsafe" title="17.1.2.3 Determination of Safe and Unsafe Statements in Binary Logging">Section 17.1.2.3, “Determination of Safe and Unsafe Statements in Binary Logging”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          A mixed statement is unrelated to mixed binary logging format.
</p>
</div>
<p>
        Before MySQL 5.5.2, the rules for binary logging are similar to
        those just described, except that there is no
        <a class="link" href="replication.html#sysvar_binlog_direct_non_transactional_updates"><code class="literal">binlog_direct_non_transactional_updates</code></a>
        system variable to affect logging of transactional statements.
        Thus, the server immediately logs only the initial
        nontransactional statements in a transaction and caches the rest
        until commit time.
      </p><p>
        In situations where transactions mix updates to transactional
        and nontransactional tables, the order of statements in the
        binary log is correct, and all needed statements are written to
        the binary log even in case of a
        <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>.
        However, when a second connection updates the nontransactional
        table before the first connection transaction is complete,
        statements can be logged out of order because the second
        connection update is written immediately after it is performed,
        regardless of the state of the transaction being performed by
        the first connection.
      </p><p><b>Using different storage engines on master and slave. </b>
          It is possible to replicate transactional tables on the master
          using nontransactional tables on the slave. For example, you
          can replicate an <code class="literal">InnoDB</code> master table as a
          <code class="literal">MyISAM</code> slave table. However, if you do
          this, there are problems if the slave is stopped in the middle
          of a <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">BEGIN</code></a>
          ... <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">COMMIT</code></a> block because the
          slave restarts at the beginning of the
          <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">BEGIN</code></a> block.
        </p><p>
        Beginning with MySQL 5.5.0, it is also safe to replicate
        transactions from <a class="link" href="storage-engines.html#myisam-storage-engine" title="15.3 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables on
        the master to transactional tables—such as tables that use
        the <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> storage engine—on
        the slave. In such cases (beginning with MySQL 5.5.0), an
        <a class="link" href="server-administration.html#sysvar_autocommit"><code class="literal">AUTOCOMMIT=1</code></a>
        statement issued on the master is replicated, thus enforcing
        <code class="literal">AUTOCOMMIT</code> mode on the slave.
      </p><p>
        When the storage engine type of the slave is nontransactional,
        transactions on the master that mix updates of transactional and
        nontransactional tables should be avoided because they can cause
        inconsistency of the data between the master transactional table
        and the slave nontransactional table. That is, such transactions
        can lead to master storage engine-specific behavior with the
        possible effect of replication going out of synchrony. MySQL
        does not issue a warning about this currently, so extra care
        should be taken when replicating transactional tables from the
        master to nontransactional tables on the slaves.
      </p><p><b>Changing the binary logging format within transactions. </b>
          Beginning with MySQL 5.5.3, the
          <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> system variable
          is read-only as long as a transaction is in progress. (Bug
          #47863)
        </p><p>
        Every transaction (including
        <a class="link" href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> transactions) is
        recorded in the binary log as though it starts with a
        <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">BEGIN</code></a>
        statement, and ends with either a
        <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">COMMIT</code></a> or a
        <a class="link" href="sql-syntax.html#commit" title="13.3.1 START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
        statement. In MySQL 5.5, this true is even for
        statements affecting tables that use a nontransactional storage
        engine (such as <a class="link" href="storage-engines.html#myisam-storage-engine" title="15.3 The MyISAM Storage Engine"><code class="literal">MyISAM</code></a>).
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-triggers"></a>17.4.1.34 Replication and Triggers</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478283568"></a><a class="indexterm" name="idm140301478282080"></a><p>
        With statement-based replication, triggers executed on the
        master also execute on the slave. With row-based replication,
        triggers executed on the master do not execute on the slave.
        Instead, the row changes on the master resulting from trigger
        execution are replicated and applied on the slave.
      </p><p>
        This behavior is by design. If under row-based replication the
        slave applied the triggers as well as the row changes caused by
        them, the changes would in effect be applied twice on the slave,
        leading to different data on the master and the slave.
      </p><p>
        If you want triggers to execute on both the master and the
        slave—perhaps because you have different triggers on the
        master and slave—you must use statement-based replication.
        However, to enable slave-side triggers, it is not necessary to
        use statement-based replication exclusively. It is sufficient to
        switch to statement-based replication only for those statements
        where you want this effect, and to use row-based replication the
        rest of the time.
      </p><p>
        A statement invoking a trigger (or function) that causes an
        update to an <code class="literal">AUTO_INCREMENT</code> column is not
        replicated correctly using statement-based replication. MySQL
        5.5 marks such statements as unsafe. (Bug #45677)
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-truncate"></a>17.4.1.35 Replication and TRUNCATE TABLE</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478275328"></a><a class="indexterm" name="idm140301478273840"></a><p>
        <a class="link" href="sql-syntax.html#truncate-table" title="13.1.33 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> is normally
        regarded as a DML statement, and so would be expected to be
        logged and replicated using row-based format when the binary
        logging mode is <code class="literal">ROW</code> or
        <code class="literal">MIXED</code>. However this caused issues when
        logging or replicating, in <code class="literal">STATEMENT</code> or
        <code class="literal">MIXED</code> mode, tables that used transactional
        storage engines such as <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> when
        the transaction isolation level was <code class="literal">READ
        COMMITTED</code> or <code class="literal">READ UNCOMMITTED</code>,
        which precludes statement-based logging.
      </p><p>
        <a class="link" href="sql-syntax.html#truncate-table" title="13.1.33 TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a> is treated for
        purposes of logging and replication as DDL rather than DML so
        that it can be logged and replicated as a statement. However,
        the effects of the statement as applicable to
        <a class="link" href="innodb-storage-engine.html" title="Chapter 14 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> and other transactional
        tables on replication slaves still follow the rules described in
        <a class="xref" href="sql-syntax.html#truncate-table" title="13.1.33 TRUNCATE TABLE Syntax">Section 13.1.33, “TRUNCATE TABLE Syntax”</a> governing such tables. (Bug
        #36763)
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-variables"></a>17.4.1.36 Replication and Variables</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478259712"></a><a class="indexterm" name="idm140301478258256"></a><a class="indexterm" name="idm140301478256768"></a><a class="indexterm" name="idm140301478255280"></a><a class="indexterm" name="idm140301478253792"></a><p>
        System variables are not replicated correctly when using
        <code class="literal">STATEMENT</code> mode, except for the following
        variables when they are used with session scope:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_character_set_client"><code class="literal">character_set_client</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_character_set_database"><code class="literal">character_set_database</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_character_set_server"><code class="literal">character_set_server</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_collation_database"><code class="literal">collation_database</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_collation_server"><code class="literal">collation_server</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_foreign_key_checks"><code class="literal">foreign_key_checks</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_identity"><code class="literal">identity</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_last_insert_id"><code class="literal">last_insert_id</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_pseudo_thread_id"><code class="literal">pseudo_thread_id</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_time_zone"><code class="literal">time_zone</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_timestamp"><code class="literal">timestamp</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_unique_checks"><code class="literal">unique_checks</code></a>
</p></li></ul>
</div>
<p>
        When <code class="literal">MIXED</code> mode is used, the variables in the
        preceding list, when used with session scope, cause a switch
        from statement-based to row-based logging. See
        <a class="xref" href="server-administration.html#binary-log-mixed" title="5.2.4.3 Mixed Binary Logging Format">Section 5.2.4.3, “Mixed Binary Logging Format”</a>.
      </p><p>
        <a class="link" href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> is also replicated
        except for the
        <a class="link" href="server-administration.html#sqlmode_no_dir_in_create"><code class="literal">NO_DIR_IN_CREATE</code></a> mode; the
        slave always preserves its own value for
        <a class="link" href="server-administration.html#sqlmode_no_dir_in_create"><code class="literal">NO_DIR_IN_CREATE</code></a>, regardless
        of changes to it on the master. This is true for all replication
        formats.
      </p><p>
        However, when <a class="link" href="programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a> parses a
        <code class="literal">SET @@sql_mode =
        <em class="replaceable"><code>mode</code></em></code> statement, the full
        <em class="replaceable"><code>mode</code></em> value, including
        <a class="link" href="server-administration.html#sqlmode_no_dir_in_create"><code class="literal">NO_DIR_IN_CREATE</code></a>, is passed to
        the receiving server. For this reason, replication of such a
        statement may not be safe when <code class="literal">STATEMENT</code> mode
        is in use.
      </p><p>
        The <a class="link" href="server-administration.html#sysvar_default_storage_engine"><code class="literal">default_storage_engine</code></a> and
        <a class="link" href="server-administration.html#sysvar_storage_engine"><code class="literal">storage_engine</code></a> system variables
        are not replicated, regardless of the logging mode; this is
        intended to facilitate replication between different storage
        engines.
      </p><p>
        The <a class="link" href="server-administration.html#sysvar_read_only"><code class="literal">read_only</code></a> system variable
        is not replicated. In addition, the enabling this variable has
        different effects with regard to temporary tables, table
        locking, and the <a class="link" href="sql-syntax.html#set-password" title="13.7.1.6 SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>
        statement in different MySQL versions.
      </p><p>
        The <a class="link" href="server-administration.html#sysvar_max_heap_table_size"><code class="literal">max_heap_table_size</code></a> system
        variable is not replicated. Increasing the value of this
        variable on the master without doing so on the slave can lead
        eventually to <span class="errortext">Table is full</span> errors on the
        slave when trying to execute
        <a class="link" href="sql-syntax.html#insert" title="13.2.5 INSERT Syntax"><code class="literal">INSERT</code></a> statements on a
        <a class="link" href="storage-engines.html#memory-storage-engine" title="15.4 The MEMORY Storage Engine"><code class="literal">MEMORY</code></a> table on the master that is
        thus permitted to grow larger than its counterpart on the slave.
        For more information, see
        <a class="xref" href="replication.html#replication-features-memory" title="17.4.1.21 Replication and MEMORY Tables">Section 17.4.1.21, “Replication and MEMORY Tables”</a>.
      </p><p>
        In statement-based replication, session variables are not
        replicated properly when used in statements that update tables.
        For example, the following sequence of statements will not
        insert the same data on the master and the slave:
      </p><pre class="programlisting">
SET max_join_size=1000;
INSERT INTO mytable VALUES(@@max_join_size);
</pre><p>
        This does not apply to the common sequence:
      </p><pre class="programlisting">
SET time_zone=...;
INSERT INTO mytable VALUES(CONVERT_TZ(..., ..., @@time_zone));
</pre><p>
        Replication of session variables is not a problem when row-based
        replication is being used, in which case, session variables are
        always replicated safely. See
        <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.
      </p><p>
        In MySQL 5.5, the following session variables are
        written to the binary log and honored by the replication slave
        when parsing the binary log, regardless of the logging format:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_foreign_key_checks"><code class="literal">foreign_key_checks</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_unique_checks"><code class="literal">unique_checks</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_character_set_client"><code class="literal">character_set_client</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_collation_database"><code class="literal">collation_database</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_collation_server"><code class="literal">collation_server</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a>
</p></li></ul>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Important
</div>
<p>
          Even though session variables relating to character sets and
          collations are written to the binary log, replication between
          different character sets is not supported.
</p>
</div>
<p>
        It is strongly recommended that you always use the same setting
        for the <a class="link" href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a>
        system variable on both master and slave. In particular, when a
        case-sensitive file system is used, setting this variable to 1
        on the slave, but to a different value on the master, can cause
        two types of problems: Names of databases are not converted to
        lowercase; in addition, when using row-based replication names
        of tables are also not converted. Either of these problems can
        cause replication to fail. This is a known issue, which is fixed
        in MySQL 5.6.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="replication-features-views"></a>17.4.1.37 Replication and Views</h4>

</div>

</div>

</div>
<a class="indexterm" name="idm140301478166192"></a><a class="indexterm" name="idm140301478164704"></a><p>
        Views are always replicated to slaves. Views are filtered by
        their own name, not by the tables they refer to. This means that
        a view can be replicated to the slave even if the view contains
        a table that would normally be filtered out by
        <code class="option">replication-ignore-table</code> rules. Care should
        therefore be taken to ensure that views do not replicate table
        data that would normally be filtered for security reasons.
      </p><p>
        Replication from a table to a samed-named view is supported
        using statement-based logging, but not when using row-based
        logging. In MySQL 5.5.31 and later, trying to do so when
        row-based logging is in effect causes an error. (Bug #11752707,
        Bug #43975)
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-compatibility"></a>17.4.2 Replication Compatibility Between MySQL Versions</h3>

</div>

</div>

</div>
<p>
      MySQL supports replication from one major version to the next
      higher major version. For example, you can replicate from a master
      running MySQL 4.1 to a slave running MySQL 5.0, from a master
      running MySQL 5.0 to a slave running MySQL 5.1, and so on.
    </p><p>
      However, one may encounter difficulties when replicating from an
      older master to a newer slave if the master uses statements or
      relies on behavior no longer supported in the version of MySQL
      used on the slave. For example, in MySQL 5.5,
      <a class="link" href="sql-syntax.html#create-table-select" title="13.1.17.2 CREATE TABLE ... SELECT Syntax"><code class="literal">CREATE TABLE
      ... SELECT</code></a> statements are permitted to change tables
      other than the one being created, but are no longer allowed to do
      so in MySQL 5.6 (see
      <a class="xref" href="replication.html#replication-features-create-select" title="17.4.1.5 Replication of CREATE TABLE ... SELECT Statements">Section 17.4.1.5, “Replication of CREATE TABLE ... SELECT Statements”</a>).
    </p><p>
      The use of more than 2 MySQL Server versions is not supported in
      replication setups involving multiple masters, regardless of the
      number of master or slave MySQL servers. This restriction applies
      not only to major versions, but to minor versions within the same
      major version as well. For example, if you are using a chained or
      circular replication setup, you cannot use MySQL
      5.5.1, MySQL 5.5.2, and MySQL
      5.5.4 concurrently, although you could use any 2 of
      these releases together.
    </p><p>
      In some cases, it is also possible to replicate between a master
      and a slave that is more than one major version newer than the
      master. However, there are known issues with trying to replicate
      from a master running MySQL 4.1 or earlier to a slave running
      MySQL 5.1 or later. To work around such problems, you can insert a
      MySQL server running an intermediate version between the two; for
      example, rather than replicating directly from a MySQL 4.1 master
      to a MySQL 5.1 slave, it is possible to replicate from a MySQL 4.1
      server to a MySQL 5.0 server, and then from the MySQL 5.0 server
      to a MySQL 5.1 server.
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        It is strongly recommended to use the most recent release
        available within a given MySQL major version because replication
        (and other) capabilities are continually being improved. It is
        also recommended to upgrade masters and slaves that use early
        releases of a major version of MySQL to GA (production) releases
        when the latter become available for that major version.
</p>
</div>
<p>
      Replication from newer masters to older slaves may be possible,
      but is generally not supported. This is due to a number of
      factors:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Binary log format changes. </b>
            The binary log format can change between major releases.
            While we attempt to maintain backward compatibility, this is
            not always possible. For example, the binary log format
            implemented in MySQL 5.0 changed considerably from that used
            in previous versions, especially with regard to handling of
            character sets,
            <a class="link" href="sql-syntax.html#load-data" title="13.2.6 LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
            INFILE</code></a>, and time zones. This means that
            replication from a MySQL 5.0 (or later) master to a MySQL
            4.1 (or earlier) slave is generally not supported.
          </p><p>
          This also has significant implications for upgrading
          replication servers; see
          <a class="xref" href="replication.html#replication-upgrade" title="17.4.3 Upgrading a Replication Setup">Section 17.4.3, “Upgrading a Replication Setup”</a>, for more information.
        </p></li><li class="listitem"><p><b>Use of row-based replication. </b>
            Row-based replication was implemented in MySQL 5.1.5, so you
            cannot replicate using row-based replication from any MySQL
            5.5 or later master to a slave older than MySQL
            5.1.5.
          </p><p>
          For more information about row-based replication, see
          <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.
        </p></li><li class="listitem"><p><b>SQL incompatibilities. </b>
            You cannot replicate from a newer master to an older slave
            using statement-based replication if the statements to be
            replicated use SQL features available on the master but not
            on the slave.
          </p><p>
          However, if both the master and the slave support row-based
          replication, and there are no data definition statements to be
          replicated that depend on SQL features found on the master but
          not on the slave, you can use row-based replication to
          replicate the effects of data modification statements even if
          the DDL run on the master is not supported on the slave.
</p></li></ul>
</div>
<p>
      For more information on potential replication issues, see
      <a class="xref" href="replication.html#replication-features" title="17.4.1 Replication Features and Issues">Section 17.4.1, “Replication Features and Issues”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-upgrade"></a>17.4.3 Upgrading a Replication Setup</h3>

</div>

</div>

</div>
<p>
      When you upgrade servers that participate in a replication setup,
      the procedure for upgrading depends on the current server versions
      and the version to which you are upgrading.
    </p><p>
      This section applies to upgrading replication from older versions
      of MySQL to MySQL 5.5. A 4.0 server should be 4.0.3
      or newer.
    </p><p>
      When you upgrade a master to 5.5 from an earlier
      MySQL release series, you should first ensure that all the slaves
      of this master are using the same 5.5.x release. If
      this is not the case, you should first upgrade the slaves. To
      upgrade each slave, shut it down, upgrade it to the appropriate
      5.5.x version, restart it, and restart replication.
      The 5.5 slave is able to read the old relay logs
      written prior to the upgrade and to execute the statements they
      contain. Relay logs created by the slave after the upgrade are in
      5.5 format.
    </p><p>
      After the slaves have been upgraded, shut down the master, upgrade
      it to the same 5.5.x release as the slaves, and
      restart it. The 5.5 master is able to read the old
      binary logs written prior to the upgrade and to send them to the
      5.5 slaves. The slaves recognize the old format and
      handle it properly. Binary logs created by the master subsequent
      to the upgrade are in 5.5 format. These too are
      recognized by the 5.5 slaves.
    </p><p>
      In other words, when upgrading to MySQL 5.5, the
      slaves must be MySQL 5.5 before you can upgrade the
      master to 5.5. Note that downgrading from
      5.5 to older versions does not work so simply: You
      must ensure that any 5.5 binary log or relay log has
      been fully processed, so that you can remove it before proceeding
      with the downgrade.
    </p><p>
      Downgrading a replication setup to a previous version cannot be
      done once you have switched from statement-based to row-based
      replication, and after the first row-based statement has been
      written to the binary log. See
      <a class="xref" href="replication.html#replication-formats" title="17.1.2 Replication Formats">Section 17.1.2, “Replication Formats”</a>.
    </p><p>
      Some upgrades may require that you drop and re-create database
      objects when you move from one MySQL series to the next. For
      example, collation changes might require that table indexes be
      rebuilt. Such operations, if necessary, will be detailed at
      <a class="xref" href="installing.html#upgrading-from-previous-series" title="2.11.1.1 Upgrading from MySQL 5.1 to 5.5">Section 2.11.1.1, “Upgrading from MySQL 5.1 to 5.5”</a>. It is safest to
      perform these operations separately on the slaves and the master,
      and to disable replication of these operations from the master to
      the slave. To achieve this, use the following procedure:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Stop all the slaves and upgrade them. Restart them with the
          <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option so
          that they do not connect to the master. Perform any table
          repair or rebuilding operations needed to re-create database
          objects, such as use of <code class="literal">REPAIR TABLE</code> or
          <code class="literal">ALTER TABLE</code>, or dumping and reloading
          tables or triggers.
        </p></li><li class="listitem"><p>
          Disable the binary log on the master. To do this without
          restarting the master, execute a <code class="literal">SET sql_log_bin =
          0</code> statement. Alternatively, stop the master and
          restart it without the
          <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> option. If you
          restart the master, you might also want to disallow client
          connections. For example, if all clients connect using TCP/IP,
          use the <a class="link" href="server-administration.html#option_mysqld_skip-networking"><code class="option">--skip-networking</code></a>
          option when you restart the master.
        </p></li><li class="listitem"><p>
          With the binary log disabled, perform any table repair or
          rebuilding operations needed to re-create database objects.
          The binary log must be disabled during this step to prevent
          these operations from being logged and sent to the slaves
          later.
        </p></li><li class="listitem"><p>
          Re-enable the binary log on the master. If you set
          <a class="link" href="server-administration.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a> to 0 earlier,
          execute a <code class="literal">SET sql_log_bin = 1</code> statement. If
          you restarted the master to disable the binary log, restart it
          with <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a>, and without
          <a class="link" href="server-administration.html#option_mysqld_skip-networking"><code class="option">--skip-networking</code></a> so that
          clients and slaves can connect.
        </p></li><li class="listitem"><p>
          Restart the slaves, this time without the
          <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option.
</p></li></ol>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-problems"></a>17.4.4 Troubleshooting Replication</h3>

</div>

</div>

</div>
<p>
      If you have followed the instructions but your replication setup
      is not working, the first thing to do is <span class="emphasis"><em>check the error
      log for messages</em></span>. Many users have lost time by not
      doing this soon enough after encountering problems.
    </p><p>
      If you cannot tell from the error log what the problem was, try
      the following techniques:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Verify that the master has binary logging enabled by issuing a
          <a class="link" href="sql-syntax.html#show-master-status" title="13.7.5.24 SHOW MASTER STATUS Syntax"><code class="literal">SHOW MASTER STATUS</code></a> statement.
          If logging is enabled, <code class="literal">Position</code> is nonzero.
          If binary logging is not enabled, verify that you are running
          the master with the <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a>
          option.
        </p></li><li class="listitem"><p>
          Verify that the master and slave both were started with the
          <a class="link" href="replication.html#option_mysqld_server-id"><code class="option">--server-id</code></a> option and that the
          ID value is unique on each server.
        </p></li><li class="listitem"><p>
          Verify that the slave is running. Use
          <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> to check
          whether the <code class="literal">Slave_IO_Running</code> and
          <code class="literal">Slave_SQL_Running</code> values are both
          <code class="literal">Yes</code>. If not, verify the options that were
          used when starting the slave server. For example,
          <a class="link" href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> prevents the
          slave threads from starting until you issue a
          <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statement.
        </p></li><li class="listitem"><p>
          If the slave is running, check whether it established a
          connection to the master. Use <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.30 SHOW PROCESSLIST Syntax"><code class="literal">SHOW
          PROCESSLIST</code></a>, find the I/O and SQL threads and check
          their <code class="literal">State</code> column to see what they
          display. See
          <a class="xref" href="replication.html#replication-implementation-details" title="17.2.1 Replication Implementation Details">Section 17.2.1, “Replication Implementation Details”</a>. If the
          I/O thread state says <code class="literal">Connecting to master</code>,
          check the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              Verify the privileges for the user being used for
              replication on the master.
            </p></li><li class="listitem"><p>
              Check that the host name of the master is correct and that
              you are using the correct port to connect to the master.
              The port used for replication is the same as used for
              client network communication (the default is
              <code class="literal">3306</code>). For the host name, ensure that
              the name resolves to the correct IP address.
            </p></li><li class="listitem"><p>
              Check that networking has not been disabled on the master
              or slave. Look for the
              <a class="link" href="server-administration.html#option_mysqld_skip-networking"><code class="option">skip-networking</code></a> option in
              the configuration file. If present, comment it out or
              remove it.
            </p></li><li class="listitem"><p>
              If the master has a firewall or IP filtering
              configuration, ensure that the network port being used for
              MySQL is not being filtered.
            </p></li><li class="listitem"><p>
              Check that you can reach the master by using
              <code class="literal">ping</code> or
              <code class="literal">traceroute</code>/<code class="literal">tracert</code>
              to reach the host.
</p></li></ul>
</div>
</li><li class="listitem"><p>
          If the slave was running previously but has stopped, the
          reason usually is that some statement that succeeded on the
          master failed on the slave. This should never happen if you
          have taken a proper snapshot of the master, and never modified
          the data on the slave outside of the slave thread. If the
          slave stops unexpectedly, it is a bug or you have encountered
          one of the known replication limitations described in
          <a class="xref" href="replication.html#replication-features" title="17.4.1 Replication Features and Issues">Section 17.4.1, “Replication Features and Issues”</a>. If it is a bug, see
          <a class="xref" href="replication.html#replication-bugs" title="17.4.5 How to Report Replication Bugs or Problems">Section 17.4.5, “How to Report Replication Bugs or Problems”</a>, for instructions on how to
          report it.
        </p></li><li class="listitem"><p>
          If a statement that succeeded on the master refuses to run on
          the slave, try the following procedure if it is not feasible
          to do a full database resynchronization by deleting the
          slave's databases and copying a new snapshot from the master:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
              Determine whether the affected table on the slave is
              different from the master table. Try to understand how
              this happened. Then make the slave's table identical to
              the master's and run <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.5 START SLAVE Syntax"><code class="literal">START
              SLAVE</code></a>.
            </p></li><li class="listitem"><p>
              If the preceding step does not work or does not apply, try
              to understand whether it would be safe to make the update
              manually (if needed) and then ignore the next statement
              from the master.
            </p></li><li class="listitem"><p>
              If you decide that the slave can skip the next statement
              from the master, issue the following statements:
            </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SET GLOBAL sql_slave_skip_counter = <em class="replaceable"><code>N</code></em>;</code></strong>
mysql&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
</pre><p>
              The value of <em class="replaceable"><code>N</code></em> should be 1 if
              the next statement from the master does not use
              <code class="literal">AUTO_INCREMENT</code> or
              <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>.
              Otherwise, the value should be 2. The reason for using a
              value of 2 for statements that use
              <code class="literal">AUTO_INCREMENT</code> or
              <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is that
              they take two events in the binary log of the master.
            </p><p>
              See also
              <a class="xref" href="sql-syntax.html#set-global-sql-slave-skip-counter" title="13.4.2.4 SET GLOBAL sql_slave_skip_counter Syntax">Section 13.4.2.4, “SET GLOBAL sql_slave_skip_counter Syntax”</a>.
            </p></li><li class="listitem"><p>
              If you are sure that the slave started out perfectly
              synchronized with the master, and that no one has updated
              the tables involved outside of the slave thread, then
              presumably the discrepancy is the result of a bug. If you
              are running the most recent version of MySQL, please
              report the problem. If you are running an older version,
              try upgrading to the latest production release to
              determine whether the problem persists.
</p></li></ol>
</div>
</li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="replication-bugs"></a>17.4.5 How to Report Replication Bugs or Problems</h3>

</div>

</div>

</div>
<p>
      When you have determined that there is no user error involved, and
      replication still either does not work at all or is unstable, it
      is time to send us a bug report. We need to obtain as much
      information as possible from you to be able to track down the bug.
      Please spend some time and effort in preparing a good bug report.
    </p><p>
      If you have a repeatable test case that demonstrates the bug,
      please enter it into our bugs database using the instructions
      given in <a class="xref" href="introduction.html#bug-reports" title="1.7 How to Report Bugs or Problems">Section 1.7, “How to Report Bugs or Problems”</a>. If you have a
      <span class="quote">“<span class="quote">phantom</span>”</span> problem (one that you cannot duplicate at
      will), use the following procedure:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Verify that no user error is involved. For example, if you
          update the slave outside of the slave thread, the data goes
          out of synchrony, and you can have unique key violations on
          updates. In this case, the slave thread stops and waits for
          you to clean up the tables manually to bring them into
          synchrony. <span class="emphasis"><em>This is not a replication problem. It is
          a problem of outside interference causing replication to
          fail.</em></span>
        </p></li><li class="listitem"><p>
          Run the slave with the
          <a class="link" href="replication.html#option_mysqld_log-slave-updates"><code class="option">--log-slave-updates</code></a> and
          <a class="link" href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> options. These
          options cause the slave to log the updates that it receives
          from the master into its own binary logs.
        </p></li><li class="listitem"><p>
          Save all evidence before resetting the replication state. If
          we have no information or only sketchy information, it becomes
          difficult or impossible for us to track down the problem. The
          evidence you should collect is:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              All binary log files from the master
            </p></li><li class="listitem"><p>
              All binary log files from the slave
            </p></li><li class="listitem"><p>
              The output of <a class="link" href="sql-syntax.html#show-master-status" title="13.7.5.24 SHOW MASTER STATUS Syntax"><code class="literal">SHOW MASTER
              STATUS</code></a> from the master at the time you
              discovered the problem
            </p></li><li class="listitem"><p>
              The output of <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE
              STATUS</code></a> from the slave at the time you discovered
              the problem
            </p></li><li class="listitem"><p>
              Error logs from the master and the slave
</p></li></ul>
</div>
</li><li class="listitem"><p>
          Use <a class="link" href="programs.html#mysqlbinlog" title="4.6.7 mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a> to examine the binary logs.
          The following should be helpful to find the problem statement.
          <em class="replaceable"><code>log_file</code></em> and
          <em class="replaceable"><code>log_pos</code></em> are the
          <code class="literal">Master_Log_File</code> and
          <code class="literal">Read_Master_Log_Pos</code> values from
          <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.35 SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a>.
        </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlbinlog --start-position=<em class="replaceable"><code>log_pos</code></em> <em class="replaceable"><code>log_file</code></em> | head</code></strong>
</pre></li></ol>
</div>
<p>
      After you have collected the evidence for the problem, try to
      isolate it as a separate test case first. Then enter the problem
      with as much information as possible into our bugs database using
      the instructions at <a class="xref" href="introduction.html#bug-reports" title="1.7 How to Report Bugs or Problems">Section 1.7, “How to Report Bugs or Problems”</a>.
</p>
</div>

</div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left"><a accesskey="p" href="ha-overview.html">Prev</a></td>
<td width="20%" align="center"><a accesskey="u" href="">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="mysql-cluster.html">Next</a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 16 High Availability and Scalability</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top">Chapter 18 MySQL Cluster NDB 7.2</td>
</tr>
</table>
</div>
</body>
</html>
